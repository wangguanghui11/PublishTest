(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4eac6be7"],{"0a85":function(e,t,n){},"0f5cf":function(e,t,n){"use strict";n("75fd")},"35a7":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Row",[n("page-filter",{ref:"pageFilter",attrs:{loading:e.tableLoading},on:{"on-filter-apply":e.onFilterApply}})],1),n("Row",{staticStyle:{"margin-top":"5px"}},[n("Card",{staticClass:"help-table-card",attrs:{shadow:""}},[n("Poptip",{attrs:{placement:"left-start",transfer:!0,width:720,"word-wrap":"",trigger:"hover"}},[n("div",{staticStyle:{"word-break":"break-all"},attrs:{slot:"content"},slot:"content"},[e._v("本页面Install和留存用户数与新增（180）页面、AF-cohort面板存在1%的差距，\n\n原因：两次安装时间间隔大于90天的同一个用户，AF会按照2个新用户统计，本页面按照1个新用户计算。\n\n举例：\n用户A，第一次安装日期是2021/1/1，第二次安装日期是2021/6/1，两次安装时间间隔（151天）大于90天，\n则：\n在AF面板以及新增（180）中，用户A计入2021/1/1的新用户，同时计入2021/6/1的新用户；\n在该页面，用户A只计入2021/1/1的新用户，不计入2021/6/1的新用户。\n\n说明：一个appsflyer_id 定义一个用户。")]),n("Icon",{staticStyle:{display:"inline-block"},attrs:{type:"ios-help-circle-outline",size:16,color:"#2d8cf0"}})],1),n("table-data",{ref:"table",staticClass:"retention-table",attrs:{data:e.tableData,"table-loading":e.tableLoading,"footer-data":e.totalData,"page-reset":e.pageReset,"page-data":e.pageData,"page-size-opts":e.pageSizeOpts,"field-formaters":e.field_formaters,"known-fields":e.abroad_cohort,dimensions:e.currDimensions,metrics:e.metrics,"day-range":e.dayRange,"default-dimensions":e.defaultDimensions,"all-dimensions":e.allDimensions,"all-metrics":e.allMetrics,"sync-dimensions":e.syncDimensions,"sync-metrics":e.syncMetrics,"no-download-modal":!0,"show-days":!0,"page-rooter":"analysisRetention"},on:{"on-select-day-change":e.handleSelectDayChange,"on-sort-change":e.handleSortChange,"metrics-ok":e.metricsOk,"on-table-refresh":e.handleTableRefresh,"on-download":e.download,"on-page-change":e.pageChange,"on-page-size-change":e.pageSizeChange,"on-page-reset-true":e.pageResetFalse,"on-dimensions-change":e.handleDimensionsChange}})],1),e.downloadLoading?n("Spin",{attrs:{size:"large",fix:""}}):e._e()],1)],1)},i=[],r=(n("ac4d"),n("8a81"),n("1c4c"),n("7f7f"),n("6b54"),n("8e6e"),n("456d"),n("ac6a"),n("5df3"),n("55dd"),n("ade3")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Card",{ref:"filter",staticClass:"filter-selection"},[n("div",[n("a-select",{staticClass:"inline-width",staticStyle:{"font-size":"12px"},attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"",autoClearSearchValue:!1,"max-tag-count":this.maxTagArr[0],"max-tag-text-length":this.maxTagTextArr[0],placeholder:"项目组-全部",optionFilterProp:"children"},on:{focus:function(t){return e.focusFun(0)},blur:function(t){return e.blurFun()},change:e.projectsChange,mouseenter:function(t){return e.mouseenterFun(0)},mouseleave:function(t){return e.mouseleaveFun()}},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return n("div",{},[n("v-nodes",{attrs:{vnodes:t}}),n("a-divider",{staticClass:"select-all-divider"}),n("div",{staticClass:"select-all-div",on:{mousedown:function(e){return e.preventDefault()}}},[n("span",{staticClass:"select-all-span"},[e._v(e._s(e.projects.length)+"/"+e._s(e.allProjects.length))]),n("Button",{attrs:{type:"primary"},on:{click:function(t){e.projects=e.allProjects,e.projectsChange()}}},[e._v("全选")])],1)],1)}}]),model:{value:e.projects,callback:function(t){e.projects=t},expression:"projects"}},e._l(e.allProjects,(function(t){return n("a-option",{key:t,attrs:{value:t}},[e._v(e._s(t)+"\n      ")])})),1),n("a-select",{staticClass:"inline-width",staticStyle:{"font-size":"12px"},attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"",autoClearSearchValue:!1,"max-tag-count":this.maxTagArr[1],"max-tag-text-length":this.maxTagTextArr[1],placeholder:"App-全部",optionFilterProp:"children"},on:{focus:function(t){return e.focusFun(1)},blur:function(t){return e.blurFun()},change:e.appChange,mouseenter:function(t){return e.mouseenterFun(1)},mouseleave:function(t){return e.mouseleaveFun()}},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return n("div",{},[n("v-nodes",{attrs:{vnodes:t}}),n("a-divider",{staticClass:"select-all-divider"}),n("div",{staticClass:"select-all-div",on:{mousedown:function(e){return e.preventDefault()}}},[n("span",{staticClass:"select-all-span"},[e._v(e._s(e.apps.length)+"/"+e._s(e.canSelectAllApp.length))]),n("Button",{attrs:{type:"primary"},on:{click:function(t){e.apps=e.canSelectAllApp.map((function(e){return e.app_id})),e.appChange()}}},[e._v("全选")])],1)],1)}}]),model:{value:e.apps,callback:function(t){e.apps=t},expression:"apps"}},e._l(e.canSelectAllApp,(function(t){return n("a-option",{key:t.app_id,attrs:{value:t.app_id}},[e._v(e._s(t.app_name)+"\n      ")])})),1),n("a-select",{staticClass:"inline-width",staticStyle:{"font-size":"12px"},attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"",autoClearSearchValue:!1,"max-tag-count":this.maxTagArr[2],"max-tag-text-length":this.maxTagTextArr[2],placeholder:"AppVersion-全部",optionFilterProp:"children"},on:{focus:function(t){return e.focusFun(2)},blur:function(t){return e.blurFun()},mouseenter:function(t){return e.mouseenterFun(2)},mouseleave:function(t){return e.mouseleaveFun()},dropdownVisibleChange:e.onDropdownAppVersion},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return n("div",{},[n("v-nodes",{attrs:{vnodes:t}}),n("a-divider",{staticClass:"select-all-divider"}),n("div",{staticClass:"select-all-div",on:{mousedown:function(e){return e.preventDefault()}}},[n("span",{staticClass:"select-all-span"},[e._v(e._s(e.appVersion.length)+"/"+e._s(e.canSelectAppVersion.length))]),n("Button",{attrs:{type:"primary"},on:{click:function(t){e.appVersion=e.canSelectAppVersion}}},[e._v("全选")])],1)],1)}}]),model:{value:e.appVersion,callback:function(t){e.appVersion=t},expression:"appVersion"}},e._l(e.canSelectAppVersion,(function(t,a){return n("a-option",{key:a,attrs:{value:t}},[e._v(e._s(t)+"\n      ")])})),1),n("a-select",{staticClass:"inline-width",staticStyle:{"font-size":"12px"},attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"",autoClearSearchValue:!1,"max-tag-count":this.maxTagArr[3],"max-tag-text-length":this.maxTagTextArr[3],placeholder:"国家-全部",optionFilterProp:"children"},on:{focus:function(t){return e.focusFun(3)},blur:function(t){return e.blurFun()},mouseenter:function(t){return e.mouseenterFun(3)},mouseleave:function(t){return e.mouseleaveFun()}},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return n("div",{},[n("v-nodes",{attrs:{vnodes:t}}),n("a-divider",{staticClass:"select-all-divider"}),n("div",{staticClass:"select-all-div",on:{mousedown:function(e){return e.preventDefault()}}},[n("span",{staticClass:"select-all-span"},[e._v(e._s(e.countries.length)+"/"+e._s(e.allCountries.length))]),n("Button",{attrs:{type:"primary"},on:{click:function(t){e.countries=e.allCountries.map((function(e){return e.country_id}))}}},[e._v("全选")])],1)],1)}}]),model:{value:e.countries,callback:function(t){e.countries=t},expression:"countries"}},e._l(e.allCountries,(function(t){return n("a-option",{key:t.country_id,attrs:{value:t.country_id}},[e._v(e._s(t.country_name+"("+t.country_id+")")+"\n      ")])})),1),n("a-select",{staticClass:"inline-width",staticStyle:{"font-size":"12px"},attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"",autoClearSearchValue:!1,"max-tag-count":this.maxTagArr[4],"max-tag-text-length":this.maxTagTextArr[4],placeholder:"MediaSource-全部",optionFilterProp:"children"},on:{focus:function(t){return e.focusFun(4)},blur:function(t){return e.blurFun()},mouseenter:function(t){return e.mouseenterFun(4)},mouseleave:function(t){return e.mouseleaveFun()},change:e.mediaSourcesChange},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return n("div",{},[n("v-nodes",{attrs:{vnodes:t}}),n("a-divider",{staticClass:"select-all-divider"}),n("div",{staticClass:"select-all-div",on:{mousedown:function(e){return e.preventDefault()}}},[n("span",{staticClass:"select-all-span"},[e._v(e._s(e.mediaSources.length)+"/"+e._s(e.allMediaSources.length))]),n("Button",{attrs:{type:"primary"},on:{click:function(t){e.mediaSources=e.allMediaSources.map((function(e){return e.id}))}}},[e._v("全选")])],1)],1)}}]),model:{value:e.mediaSources,callback:function(t){e.mediaSources=t},expression:"mediaSources"}},e._l(e.allMediaSources,(function(t){return n("a-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name)+"\n      ")])})),1),n("a-select",{staticClass:"inline-width",staticStyle:{"font-size":"12px"},attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"",autoClearSearchValue:!1,"max-tag-count":this.maxTagArr[5],"max-tag-text-length":this.maxTagTextArr[5],placeholder:"受众类型-全部",optionFilterProp:"children"},on:{focus:function(t){return e.focusFun(5)},blur:function(t){return e.blurFun()},mouseenter:function(t){return e.mouseenterFun(5)},mouseleave:function(t){return e.mouseleaveFun()}},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return n("div",{},[n("v-nodes",{attrs:{vnodes:t}}),n("a-divider",{staticClass:"select-all-divider"}),n("div",{staticClass:"select-all-div",on:{mousedown:function(e){return e.preventDefault()}}},[n("span",{staticClass:"select-all-span"},[e._v(e._s(e.audience.length)+"/"+e._s(e.canSelectAudience.length))]),n("Button",{attrs:{type:"primary"},on:{click:function(t){e.audience=e.canSelectAudience.map((function(t){return e.geyAudienceKey(t)}))}}},[e._v("全选")])],1)],1)}}]),model:{value:e.audience,callback:function(t){e.audience=t},expression:"audience"}},e._l(e.canSelectAudience,(function(t){return n("a-option",{key:t,attrs:{value:e.geyAudienceKey(t)}},[e._v(e._s(t)+"\n      ")])})),1),n("a-select",{staticClass:"inline-width",staticStyle:{"font-size":"12px"},attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"",autoClearSearchValue:!1,"max-tag-count":this.maxTagArr[6],"max-tag-text-length":this.maxTagTextArr[6],placeholder:"投放类型-全部",optionFilterProp:"children"},on:{focus:function(t){return e.focusFun(6)},blur:function(t){return e.blurFun()},mouseenter:function(t){return e.mouseenterFun(6)},mouseleave:function(t){return e.mouseleaveFun()},change:e.mediabuyChange},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return n("div",{},[n("v-nodes",{attrs:{vnodes:t}}),n("a-divider",{staticClass:"select-all-divider"}),n("div",{staticClass:"select-all-div",on:{mousedown:function(e){return e.preventDefault()}}},[n("span",{staticClass:"select-all-span"},[e._v(e._s(e.mediabuy_type.length)+"/"+e._s(e.canSelecMediabuyType.length))]),n("Button",{attrs:{type:"primary"},on:{click:function(t){e.mediabuy_type=e.canSelecMediabuyType}}},[e._v("全选")])],1)],1)}}]),model:{value:e.mediabuy_type,callback:function(t){e.mediabuy_type=t},expression:"mediabuy_type"}},e._l(e.canSelecMediabuyType,(function(t){return n("a-option",{key:t,attrs:{value:t}},[e._v(e._s(t)+"\n      ")])})),1),n("a-select",{staticClass:"inline-width",staticStyle:{"font-size":"12px"},attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"",autoClearSearchValue:!1,"max-tag-count":this.maxTagArr[7],"max-tag-text-length":this.maxTagTextArr[7],placeholder:"AEO类型-全部",optionFilterProp:"children"},on:{focus:function(t){return e.focusFun(7)},blur:function(t){return e.blurFun()},mouseenter:function(t){return e.mouseenterFun(7)},mouseleave:function(t){return e.mouseleaveFun()},change:e.aeoTypeChange},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return n("div",{},[n("v-nodes",{attrs:{vnodes:t}}),n("a-divider",{staticClass:"select-all-divider"}),n("div",{staticClass:"select-all-div",on:{mousedown:function(e){return e.preventDefault()}}},[n("span",{staticClass:"select-all-span"},[e._v(e._s(e.aeo_type.length)+"/"+e._s(e.canSelectAEOType.length))]),n("Button",{attrs:{type:"primary"},on:{click:function(t){e.aeo_type=e.canSelectAEOType}}},[e._v("全选")])],1)],1)}}]),model:{value:e.aeo_type,callback:function(t){e.aeo_type=t},expression:"aeo_type"}},e._l(e.canSelectAEOType,(function(t){return n("a-option",{key:t,attrs:{value:t}},[e._v(e._s(t)+"\n      ")])})),1),n("a-select",{staticClass:"inline-width",staticStyle:{"font-size":"12px"},attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"",autoClearSearchValue:!1,"max-tag-count":this.maxTagArr[8],"max-tag-text-length":this.maxTagTextArr[8],placeholder:"EventName-全部",optionFilterProp:"children"},on:{focus:function(t){return e.focusFun(8)},blur:function(t){return e.blurFun()},mouseenter:function(t){return e.mouseenterFun(8)},mouseleave:function(t){return e.mouseleaveFun()}},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return n("div",{},[n("v-nodes",{attrs:{vnodes:t}}),n("a-divider",{staticClass:"select-all-divider"}),n("div",{staticClass:"select-all-div",on:{mousedown:function(e){return e.preventDefault()}}},[n("span",{staticClass:"select-all-span"},[e._v(e._s(e.event_name.length)+"/"+e._s(e.canSelectEventName.length))]),n("Button",{attrs:{type:"primary"},on:{click:function(t){e.event_name=e.canSelectEventName}}},[e._v("全选")])],1)],1)}}]),model:{value:e.event_name,callback:function(t){e.event_name=t},expression:"event_name"}},e._l(e.canSelectEventName,(function(t){return n("a-option",{key:t,attrs:{value:t}},[e._v(e._s(t)+"\n      ")])})),1),n("a-select",{staticClass:"inline-width",staticStyle:{"font-size":"12px"},attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"",autoClearSearchValue:!1,"max-tag-count":this.maxTagArr[9],"max-tag-text-length":this.maxTagTextArr[9],placeholder:"优化师-全部",optionFilterProp:"children"},on:{focus:function(t){return e.focusFun(9)},blur:function(t){return e.blurFun()},mouseenter:function(t){return e.mouseenterFun(9)},mouseleave:function(t){return e.mouseleaveFun()}},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return n("div",{},[n("v-nodes",{attrs:{vnodes:t}}),n("a-divider",{staticClass:"select-all-divider"}),n("div",{staticClass:"select-all-div",on:{mousedown:function(e){return e.preventDefault()}}},[n("span",{staticClass:"select-all-span"},[e._v(e._s(e.optimizers.length)+"/"+e._s(e.allOptimizers.length))]),n("Button",{attrs:{type:"primary"},on:{click:function(t){e.optimizers=e.allOptimizers.map((function(e){return e.name}))}}},[e._v("全选")])],1)],1)}}]),model:{value:e.optimizers,callback:function(t){e.optimizers=t},expression:"optimizers"}},e._l(e.allOptimizers,(function(t){return n("a-option",{key:t.name,attrs:{value:t.name}},[e._v(e._s(t.name)+"\n      ")])})),1),n("a-select",{staticClass:"inline-width",staticStyle:{"font-size":"12px"},attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"",autoClearSearchValue:!1,"max-tag-count":this.maxTagArr[10],"max-tag-text-length":this.maxTagTextArr[10],placeholder:"OS Version-全部",optionFilterProp:"children"},on:{focus:function(t){return e.focusFun(10)},blur:function(t){return e.blurFun()},mouseenter:function(t){return e.mouseenterFun(10)},mouseleave:function(t){return e.mouseleaveFun()}},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return n("div",{},[n("v-nodes",{attrs:{vnodes:t}}),n("a-divider",{staticClass:"select-all-divider"}),n("div",{staticClass:"select-all-div",on:{mousedown:function(e){return e.preventDefault()}}},[n("span",{staticClass:"select-all-span"},[e._v(e._s(e.osVersion.length)+"/"+e._s(e.allOsVersion.length))]),n("Button",{attrs:{type:"primary"},on:{click:function(t){e.osVersion=e.allOsVersion}}},[e._v("全选")])],1)],1)}}]),model:{value:e.osVersion,callback:function(t){e.osVersion=t},expression:"osVersion"}},e._l(e.allOsVersion,(function(t){return n("a-option",{key:t,attrs:{value:t}},[e._v(e._s(t)+"\n      ")])})),1),n("div",{staticClass:"inline-width-div"},[n("span",[e._v("广告系列")]),n("Select",{staticClass:"inline-width-like",model:{value:e.adsLike,callback:function(t){e.adsLike=t},expression:"adsLike"}},e._l(e.allLike,(function(t){return n("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label)+"\n        ")])})),1),n("Input",{staticStyle:{width:"145px"},attrs:{placeholder:"输入关键字"},model:{value:e.adsWord,callback:function(t){e.adsWord=t},expression:"adsWord"}})],1),n("div",{staticClass:"inline-width-div"},[n("span",[e._v("广告组")]),n("Select",{staticClass:"inline-width-like",model:{value:e.adGroupLike,callback:function(t){e.adGroupLike=t},expression:"adGroupLike"}},e._l(e.allLike,(function(t){return n("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label)+"\n        ")])})),1),n("Input",{staticStyle:{width:"145px"},attrs:{placeholder:"输入关键字"},model:{value:e.adGroupWord,callback:function(t){e.adGroupWord=t},expression:"adGroupWord"}})],1),n("div",{staticClass:"inline-width-div"},[n("span",[e._v("广告")]),n("Select",{staticClass:"inline-width-like",model:{value:e.adLike,callback:function(t){e.adLike=t},expression:"adLike"}},e._l(e.allLike,(function(t){return n("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label)+"\n        ")])})),1),n("Input",{staticStyle:{width:"145px"},attrs:{placeholder:"输入关键字"},model:{value:e.adWord,callback:function(t){e.adWord=t},expression:"adWord"}})],1),n("div",{staticClass:"inline-width-div"},[n("span",[e._v("设备品牌")]),n("Select",{staticClass:"inline-width-like",model:{value:e.brandLike,callback:function(t){e.brandLike=t},expression:"brandLike"}},e._l(e.allLike,(function(t){return n("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label)+"\n        ")])})),1),n("Input",{staticStyle:{width:"120px"},attrs:{placeholder:"输入关键字"},model:{value:e.brandWord,callback:function(t){e.brandWord=t},expression:"brandWord"}})],1),n("div",{staticClass:"inline-width-div"},[n("span",[e._v("设备型号")]),n("Select",{staticClass:"inline-width-like",model:{value:e.deviceLike,callback:function(t){e.deviceLike=t},expression:"deviceLike"}},e._l(e.allLike,(function(t){return n("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label)+"\n        ")])})),1),n("Input",{staticStyle:{width:"130px"},attrs:{placeholder:"输入关键字"},model:{value:e.deviceWord,callback:function(t){e.deviceWord=t},expression:"deviceWord"}})],1),n("DatePicker",{staticClass:"inline-width",attrs:{type:"daterange",options:e.daterangeoption,clearable:!1,placement:"bottom-start",placeholder:"选择日期范围"},on:{"on-change":e.onDateChange},model:{value:e.rangeDates,callback:function(t){e.rangeDates=t},expression:"rangeDates"}}),n("Button",{attrs:{type:"primary",disabled:e.loading},on:{click:e.handleSubmit}},[e._v("Apply Filter")])],1),n("div",{staticClass:"optionsContents",attrs:{id:"optionsContent"}},e._l(e.tmpOptions,(function(t){return n("li",{key:t},[e._v(e._s(t))])})),0)])},o=[],l=(n("4f7f"),n("20d6"),n("2f62")),c=n("90de"),u=n("4b65"),d=n("9839"),p=(n("1ef0"),n("1157")),h=n.n(p);function f(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=m(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw r}}}}function m(e,t){if(e){if("string"===typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b={name:"page-filter",components:{ASelect:d["d"],AOption:d["d"].Option,VNodes:{functional:!0,render:function(e,t){return t.props.vnodes}}},data:function(){return{projects:[],apps:[],appVersion:[],countries:[],mediaSources:[],audience:[],aeo_type:[],mediabuy_type:[],event_name:[],osVersion:[],optimizers:[],adsLike:"LIKE",adGroupLike:"LIKE",adLike:"LIKE",deviceLike:"LIKE",brandLike:"LIKE",adsWord:"",adGroupWord:"",adWord:"",deviceWord:"",brandWord:"",allProjects:[],canSelectAllApp:[],allApp:[],canSelectAppVersion:[],allCountries:[],allMediaSources:[],allAudience:[],canSelectAudience:[],allMediabuyType:[],canSelecMediabuyType:[],allAEOType:[],canSelectAEOType:[],allEventName:[],canSelectEventName:[],allOsVersion:[],allOptimizers:[],searchRule:[],daterangeoption:{},rangeDates:[],allLike:[{label:"包含",value:"LIKE"},{label:"不含",value:"NOT LIKE"}],maxTagArr:[1,1,1,1,1,1,1,1,1,1,1,1],maxTagTextArr:[20,20,20,20,20,20,20,20,20,20,20,20],tmpAllOptions:[],tmpOptions:[],mark:0}},props:{loading:{type:Boolean,default:function(){return!1}}},methods:g(g({},Object(l["b"])(["getAllProject","getAppList","getAllCountry","getAllMediaSource","getAllOptimizer","getAllDesigner","getAllAudience","getAllAEOType","getAllMediabuyType","getAllEvent","getAllOsVersion"])),{},{onDropdownAppVersion:function(e){e&&0===this.apps.length&&this.$Message.warning("请先选择app")},projectsChange:function(e){var t=this;this.apps=[],this.projects.length>0?this.canSelectAllApp=this.allApp.filter((function(e){return t.projects.findIndex((function(t){return t===e.project}))>=0})):this.canSelectAllApp=[].concat(this.allApp),this.appChange(this.apps)},appChange:function(e){var t=this;this.appVersion=[],this.canSelectAppVersion=[];var n,a=f(this.apps);try{var i=function(){var e,a=n.value,i=t.allApp.filter((function(e){return e.app_id===a}))[0].versions,r=f(i);try{var s=function(){var n=e.value;t.canSelectAppVersion.findIndex((function(e){return e===n}))<0&&t.canSelectAppVersion.push(n)};for(r.s();!(e=r.n()).done;)s()}catch(o){r.e(o)}finally{r.f()}};for(a.s();!(n=a.n()).done;)i()}catch(r){a.e(r)}finally{a.f()}this.canSelectAppVersion.sort()},mediaSourcesChange:function(e){var t=this;if(this.audience=[],this.mediabuy_type=[],this.aeo_type=[],this.event_name=[],0===e.length)this.canSelectAudience=[].concat(this.allAudience),this.canSelectAEOType=[].concat(this.allAEOType),this.canSelecMediabuyType=[].concat(this.allMediabuyType),this.canSelectEventName=[].concat(this.allEventName);else{this.canSelectAudience=[],this.canSelectAEOType=[],this.canSelecMediabuyType=[],this.canSelectEventName=[],e.indexOf("facebook")>=0?this.canSelectAudience=this.allAudience:(e.indexOf("organic")>=0&&this.canSelectAudience.push("unknown"),(e.length>1||e.indexOf("organic")<0)&&this.canSelectAudience.push("非lookalike"));var n,a=f(e);try{var i=function(){var e=n.value;t.searchRule.map((function(n,a){n.media_source===e&&(t.canSelectAEOType.indexOf(n.aeo_type)<0&&t.canSelectAEOType.push(n.aeo_type),t.canSelecMediabuyType.indexOf(n.mediabuy_type)<0&&t.canSelecMediabuyType.push(n.mediabuy_type),t.canSelectEventName.indexOf(n.af_event_name)<0&&t.canSelectEventName.push(n.af_event_name))}))};for(a.s();!(n=a.n()).done;)i()}catch(r){a.e(r)}finally{a.f()}}this.canSelectAudience.sort((function(e,t){var n=1;"lookalike"===e?n=3:"非lookalike"===e&&(n=2);var a=1;return"lookalike"===t?a=3:"非lookalike"===t&&(a=2),a-n})),this.canSelectAEOType.sort(),this.canSelecMediabuyType.sort(),this.canSelectEventName.sort()},mediabuyChange:function(e){this.aeo_type=[],this.event_name=[],this.canSelectAEOType=[],this.canSelectEventName=[];var t=[].concat(this.mediaSources),n=[].concat(this.mediabuy_type);if(0===this.mediaSources.length){var a,i=f(this.allMediaSources);try{for(i.s();!(a=i.n()).done;){var r=a.value;t.push(r.name)}}catch(y){i.e(y)}finally{i.f()}}0===this.mediabuy_type.length&&(n=this.allMediabuyType);var s,o=f(t);try{for(o.s();!(s=o.n()).done;){var l,c=s.value,u=f(n);try{for(u.s();!(l=u.n()).done;){var d,p=l.value,h=f(this.searchRule);try{for(h.s();!(d=h.n()).done;){var m=d.value;m.media_source===c&&m.mediabuy_type===p&&(null!=m.aeo_type&&this.canSelectAEOType.indexOf(m.aeo_type)<0&&this.canSelectAEOType.push(m.aeo_type),null!=m.af_event_name&&this.canSelectEventName.indexOf(m.af_event_name)<0&&this.canSelectEventName.push(m.af_event_name))}}catch(y){h.e(y)}finally{h.f()}}}catch(y){u.e(y)}finally{u.f()}}}catch(y){o.e(y)}finally{o.f()}this.canSelectAEOType.sort(),this.canSelectEventName.sort()},aeoTypeChange:function(e){this.event_name=[],this.canSelectEventName=[];var t=[].concat(this.mediaSources),n=[].concat(this.mediabuy_type),a=[].concat(this.aeo_type);if(0===this.mediaSources.length){var i,r=f(this.allMediaSources);try{for(r.s();!(i=r.n()).done;){var s=i.value;t.push(s.name)}}catch(_){r.e(_)}finally{r.f()}}0===this.mediabuy_type.length&&(n=this.allMediabuyType),0===this.aeo_type.length&&(a=this.allAEOType);var o,l=f(t);try{for(l.s();!(o=l.n()).done;){var c,u=o.value,d=f(n);try{for(d.s();!(c=d.n()).done;){var p,h=c.value,m=f(a);try{for(m.s();!(p=m.n()).done;){var y,v=p.value,g=f(this.searchRule);try{for(g.s();!(y=g.n()).done;){var b=y.value;b.media_source===u&&b.mediabuy_type===h&&b.aeo_type===v&&null!=b.af_event_name&&this.canSelectEventName.indexOf(b.af_event_name)<0&&this.canSelectEventName.push(b.af_event_name)}}catch(_){g.e(_)}finally{g.f()}}}catch(_){m.e(_)}finally{m.f()}}}catch(_){d.e(_)}finally{d.f()}}}catch(_){l.e(_)}finally{l.f()}this.canSelectEventName.sort()},onDateChange:function(e){e.length>1&&new Date(e[1])<new Date("2020-10-28")&&this.$Message.warning("2020-10-28之前没数据")},handleSubmit:function(e){var t={projects:this.projects,apps:this.apps,appVersion:this.appVersion,countries:this.countries,mediaSources:this.mediaSources,audience:this.audience,aeo_type:this.aeo_type,mediabuy_type:this.mediabuy_type,event_name:this.event_name,osVersion:this.osVersion,optimizers:this.optimizers,adsLike:this.adsLike,adGroupLike:this.adGroupLike,adLike:this.adLike,deviceLike:this.deviceLike,brandLike:this.brandLike,adsWord:this.adsWord.trim(),adGroupWord:this.adGroupWord.trim(),adWord:this.adWord.trim(),deviceWord:this.deviceWord.trim(),brandWord:this.brandWord.trim(),rangeDates:this.rangeDates};this.$emit("on-filter-apply",t)},focusFun:function(e){this.mark=1,h()("#optionsContent").length&&h()("#optionsContent").css({display:"none"}),this.maxTagArr=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],this.maxTagTextArr=[20,20,20,20,20,20,20,20,20,20,20,20,20,20,20];var t=this;setTimeout((function(){t.maxTagArr.splice(e,0,10),t.maxTagTextArr.splice(e,0,100)}),500)},blurFun:function(){this.mark=0,this.maxTagArr.findIndex((function(e){return 10===e}))>=0&&(this.maxTagArr=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],this.maxTagTextArr=[20,20,20,20,20,20,20,20,20,20,20,20,20,20,20]),this.setItemValues()},mouseenterFun:function(e){if(1!==this.mark){this.tmpOptions=this.tmpAllOptions[e];var t=Object(u["g"])(this.$refs["filter"].$el.clientWidth,e),n=document.getElementById("optionsContent");h()("#optionsContent").length&&this.tmpOptions&&this.tmpOptions.length>0&&n&&(h()("#optionsContent").css({display:"block",left:t.left+"px"}),n.style.setProperty("top",t.top+"px","important"))}},mouseleaveFun:function(){this.hideContentItem(),this.setItemValues()},setItemValues:function(){var e=this;this.tmpAllOptions[0]=this.projects;var t=[];this.apps&&this.apps.map((function(n,a){e.canSelectAllApp&&e.canSelectAllApp.map((function(e,a){n===e.app_id&&t.push(e.app_name)}))})),this.tmpAllOptions[1]=t,this.tmpAllOptions[2]=this.appVersion;var n=[];this.countries&&this.countries.map((function(t,a){e.allCountries&&e.allCountries.map((function(e,a){t===e.country_id&&n.push(e.country_name+"("+t+")")}))})),this.tmpAllOptions[3]=n,this.tmpAllOptions[4]=this.mediaSources;var a=[];this.audience&&this.audience.map((function(e,t){"non-lookalike"===e?a.push("非lookalike"):a.push(e)})),this.tmpAllOptions[5]=a,this.tmpAllOptions[6]=this.mediabuy_type,this.tmpAllOptions[7]=this.aeo_type,this.tmpAllOptions[8]=this.event_name,this.tmpAllOptions[9]=this.optimizers,this.tmpAllOptions[10]=this.osVersion},geyAudienceKey:function(e){return"非lookalike"===e?"non-lookalike":e},getFilter:function(){return{projects:this.projects,apps:this.apps,appVersion:this.appVersion,countries:this.countries,mediaSources:this.mediaSources,audience:this.audience,aeo_type:this.aeo_type,mediabuy_type:this.mediabuy_type,event_name:this.event_name,osVersion:this.osVersion,optimizers:this.optimizers,adsLike:this.adsLike,adGroupLike:this.adGroupLike,adLike:this.adLike,deviceLike:this.deviceLike,brandLike:this.brandLike,adsWord:this.adsWord.trim(),adGroupWord:this.adGroupWord.trim(),adWord:this.adWord.trim(),deviceWord:this.deviceWord.trim(),brandWord:this.brandWord.trim(),rangeDates:[Object(u["c"])(this.rangeDates[0]),Object(u["c"])(this.rangeDates[1])],time_type:Object(u["i"])(this.rangeDates)}},setFilter:function(e){this.projects=e.projects,this.apps=e.apps,this.appVersion=e.appVersion,this.countries=e.countries,this.mediaSources=e.mediaSources,this.audience=e.audience,this.aeo_type=e.aeo_type,this.mediabuy_type=e.mediabuy_type,this.event_name=e.event_name,this.osVersion=e.osVersion,this.optimizers=e.optimizers,this.adsLike=e.adsLike,this.adGroupLike=e.adGroupLike,this.adLike=e.adLike,this.deviceLike=e.deviceLike,this.brandLike=e.brandLike,this.adsWord=e.adsWord.trim(),this.adGroupWord=e.adGroupWord.trim(),this.adWord=e.adWord.trim(),this.deviceWord=e.deviceWord.trim(),this.brandWord=e.brandWord.trim(),this.rangeDates=e.rangeDates,e.time_type&&(this.rangeDates=Object(c["f"])(e.time_type))},hideContentItem:function(){h()("#optionsContent").length&&h()("#optionsContent").css({display:"none"})}}),mounted:function(){var e=this;this.daterangeoption=Object(c["c"])(),Promise.all([this.getAllProject(),this.getAllCountry(),this.getAppList("analysisRetention"),this.getAllMediaSource(),this.getAllOptimizer(),this.getAllDesigner(),this.getAllAudience(),this.getAllAEOType(),this.getAllMediabuyType(),this.getAllEvent(),this.getAllOsVersion()]).then((function(t){e.allCountries=t[1],e.allApp=t[2],e.allMediaSources=t[3],e.canSelectAllApp=[].concat(e.allApp),e.allOptimizers=t[4],e.allProjects=t[0].filter((function(t){return e.allApp.findIndex((function(e){return e.project===t}))>=0})),e.allAudience=t[6],e.canSelectAudience=[].concat(e.allAudience),e.allAEOType=t[7],e.canSelectAEOType=[].concat(e.allAEOType),e.allMediabuyType=t[8],e.canSelecMediabuyType=[].concat(e.allMediabuyType),e.searchRule=t[9],e.searchRule.map((function(t,n){t.af_event_name&&null!==t.af_event_name&&e.allEventName.push(t.af_event_name)})),e.allEventName=Array.from(new Set(e.allEventName)),e.allEventName.sort(),e.canSelectEventName=[].concat(e.allEventName),e.allOsVersion=t[10]}))},created:function(){this.rangeDates=Object(c["f"])("1 week"),this.rangeDates[0].setTime(this.rangeDates[0].getTime()-864e5),this.rangeDates[1].setTime(this.rangeDates[1].getTime()-864e5)}},_=b,S=(n("0f5cf"),n("2877")),A=Object(S["a"])(_,s,o,!1,null,"64e1dd90",null),k=A.exports,O=n("bdcb"),w=n("4481");n("ca62");function x(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=C(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw r}}}}function C(e,t){if(e){if("string"===typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j={name:"mediabuy-campaign-estimate",components:{PageFilter:k,TableData:O["a"]},data:function(){return{inited:!1,defaultDimensions:["date"],knownDimensions:["date","project","app_name","app_version","country","media_source","audience_type","mediabuy_type","aeo_type","event_type","optimizer","campaign_name","adset_name","ad_name","os_version","device_brand","device_type"],inFields:[["projects","project"],["apps","app_id"],["appVersion","app_version"],["countries","country"],["mediaSources","media_source"],["audience","audience_type"],["aeo_type","aeo_type"],["mediabuy_type","mediabuy_type"],["event_name","event_type"],["osVersion","os_version"],["optimizers","optimizer"]],likeFields:[["adsWord","adsLike","campaign_name"],["adGroupWord","adGroupLike","adset_name"],["adWord","adLike","ad_name"],["deviceWord","deviceLike","device_type"],["brandWord","brandLike","device_brand"]],metrics:[],currFilterApply:{},currSortField:{},currDimensions:[],currPageIndex:1,currPageSize:100,pageSizeOpts:[50,100,200],pageReset:!1,tableLoading:!0,downloadLoading:!1,selectDayRange:30,syncDimensions:[],syncMetrics:[]}},computed:F(F({},Object(l["d"])({field_formaters:function(e){return e.dashboard_field.field_formaters},abroad_cohort:function(e){return e.dashboard_field.abroad_cohort},tableData:function(e){if(!0===this.inited){var t,n=x(e.abroad_cohort.retentionCohortTableData.data);try{for(n.s();!(t=n.n()).done;){for(var a=t.value,i={},r=0;r<=this.dayRange;++r)null==a["day"+r]||(a["day"+r]>=.6?i["day"+r]="blue1-table-info-column":a["day"+r]>.55?i["day"+r]="blue2-table-info-column":a["day"+r]>.5?i["day"+r]="blue3-table-info-column":a["day"+r]>.45?i["day"+r]="blue4-table-info-column":a["day"+r]>.4?i["day"+r]="blue5-table-info-column":a["day"+r]>.35?i["day"+r]="blue6-table-info-column":a["day"+r]>.3?i["day"+r]="blue7-table-info-column":a["day"+r]>.25?i["day"+r]="blue8-table-info-column":a["day"+r]>.2?i["day"+r]="blue9-table-info-column":a["day"+r]>.15?i["day"+r]="blue10-table-info-column":a["day"+r]>.1?i["day"+r]="blue11-table-info-column":a["day"+r]>.05?i["day"+r]="blue12-table-info-column":a["day"+r]>.01&&(i["day"+r]="blue13-table-info-column"));a.cellClassName=i}}catch(s){n.e(s)}finally{n.f()}return e.abroad_cohort.retentionCohortTableData.data}},totalData:function(e){if(!0===this.inited){var t=e.abroad_cohort.retentionCohortTotalData.data;if(t&&t.length>0){var n,a=x(t);try{for(a.s();!(n=a.n()).done;){for(var i=n.value,r={},s=0;s<=this.dayRange;++s)null==i["day"+s]||(i["day"+s]>=.6?r["day"+s]="blue1-table-info-column":i["day"+s]>.55?r["day"+s]="blue2-table-info-column":i["day"+s]>.5?r["day"+s]="blue3-table-info-column":i["day"+s]>.45?r["day"+s]="blue4-table-info-column":i["day"+s]>.4?r["day"+s]="blue5-table-info-column":i["day"+s]>.35?r["day"+s]="blue6-table-info-column":i["day"+s]>.3?r["day"+s]="blue7-table-info-column":i["day"+s]>.25?r["day"+s]="blue8-table-info-column":i["day"+s]>.2?r["day"+s]="blue9-table-info-column":i["day"+s]>.15?r["day"+s]="blue10-table-info-column":i["day"+s]>.1?r["day"+s]="blue11-table-info-column":i["day"+s]>.05?r["day"+s]="blue12-table-info-column":i["day"+s]>.01&&(r["day"+s]="blue13-table-info-column"));i.cellClassName=r}}catch(o){a.e(o)}finally{a.f()}return t[0]}}},pageData:function(e){if(!0===this.inited){var t=e.abroad_cohort.retentionCohortTotalData,n={page_size:t.page_size,has_next:t.has_next,has_prev:t.has_prev,total_num:t.total_num};return n}}})),{},{allDimensions:function(){return Object(u["j"])(this.abroad_cohort,this.knownDimensions)},allMetrics:function(){var e,t=[],n=x(this.knownMetrics);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.push({label:"D"+a.substring(1),val:a})}}catch(i){n.e(i)}finally{n.f()}return t},allCohorts:function(){return Object(u["j"])(this.abroad_cohort,this.knownCohorts)},dayRange:function(){return Object(u["f"])(this.currFilterApply,this.currDimensions,"analysisRetention")},knownMetrics:function(){var e=Object(u["f"])(this.currFilterApply,this.syncDimensions,"analysisRetention");e>this.selectDayRange&&(e=this.selectDayRange);for(var t=[],n=1;n<=e;++n)n<=30?t.push("day"+n):n<=60?n%5===0&&t.push("day"+n):n<=180?n%15===0&&t.push("day"+n):n%30===0&&t.push("day"+n);return t}}),methods:F(F({},Object(l["b"])(["getRetentionCohortTableData","getRetentionCohortTotalData","getRetentionCohortDownloadUrl"])),{},{onFilterApply:function(e){var t=!1;if(this.metrics.length===this.knownMetrics.length&&(t=!0),this.currFilterApply=JSON.parse(JSON.stringify(e)),this.currSortField={},this.currDimensions=JSON.parse(JSON.stringify(this.currDimensions)),this.currPageIndex=1,this.pageReset=!0,t){var n=JSON.stringify(this.knownMetrics);this.metrics=JSON.parse(n),this.syncMetrics=JSON.parse(n)}this.updatePageData()},handleSortChange:function(e,t,n){this.currPageIndex=1,this.currSortField={key:e.key,order:e.order},this.pageReset=!0,this.updateTableData()},handleTableRefresh:function(e,t){if(0!==this.syncDimensions.length){if(this.currDimensions=JSON.parse(JSON.stringify(e)),0===this.currDimensions.length){this.currDimensionsLength=0;var n=JSON.stringify(this.knownDimensions);this.currDimensions=JSON.parse(n)}else this.currDimensionsLength=1;if(this.currSortField={},t.sort((function(e,t){var n=e.substring(3),a=t.substring(3);return n-a})),this.metrics=t,0===this.metrics.length){var a=JSON.stringify(this.knownMetrics);this.metrics=JSON.parse(a)}this.currPageIndex=1,this.updateTableData(),this.updateTotalData(),this.pageReset=!0}else this.$Message.warning("维度至少选择一项")},handleDimensionsChange:function(e){this.syncDimensions=JSON.parse(JSON.stringify(e))},handleSelectDayChange:function(e){this.selectDayRange=e},metricsOk:function(e){this.syncMetrics=JSON.parse(JSON.stringify(e)),this.syncMetrics.length<=0&&(this.syncMetrics=JSON.parse(JSON.stringify(this.knownMetrics)))},download:function(e){this.downloadFile()},pageChange:function(e){this.currPageIndex=e,this.updateTableData()},pageSizeChange:function(e){this.currPageSize=e,this.pageReset=!0,this.updateTableData()},setDefaultDimensionsAndMetrics:function(){var e=Object(c["f"])("1 week");e[0].setTime(e[0].getTime()-864e5),e[1].setTime(e[1].getTime()-864e5),this.currFilterApply={rangeDates:e};var t=JSON.stringify(this.defaultDimensions);this.currDimensions=JSON.parse(t),this.syncDimensions=JSON.parse(t),t=JSON.stringify(this.knownMetrics),this.metrics=JSON.parse(t),this.syncMetrics=JSON.parse(t)},updateTableData:function(){var e=this;this.tableLoading=!0;var t=this.wrapTableReqParams();this.getRetentionCohortTableData(t).then((function(t){e.tableLoading=!1})).catch((function(t){e.tableLoading=!1,e.showError(t)}))},updateTotalData:function(){var e=this,t=this.wrapTotalReqParams();t.group_by&&this.getRetentionCohortTotalData(t).then((function(e){})).catch((function(t){return e.showError(t)}))},updatePageData:function(){var e=this;this.tableLoading=!0,this.chartLoading=!0,Promise.all([this.getRetentionCohortTableData(this.wrapTableReqParams()),this.getRetentionCohortTotalData(this.wrapTotalReqParams())]).then((function(t){e.inited=!0,e.tableLoading=!1,e.chartLoading=!1})).catch((function(t){e.tableLoading=!1,e.chartLoading=!1,e.showError(t)}))},downloadFile:function(){var e=this;this.downloadLoading=!0;var t=this.wrapDownloadReqParams();this.getRetentionCohortDownloadUrl(t).then((function(t){e.downloadLoading=!1;var n=document.createElement("a");n.href=t.url,n.click()})).catch((function(t){e.downloadLoading=!1,e.showError(t)}))},wrapTableReqParams:function(){var e={time_range:Object(u["r"])(this.currFilterApply),page:JSON.stringify({count:this.currPageIndex,size:this.currPageSize}),filtering:Object(u["m"])(this.currFilterApply,this.inFields,this.likeFields),group_by:Object(u["n"])(this.currDimensions),sort:Object(u["p"])(this.currSortField,1,this.currDimensions,this.currDimensionsLength),fields:Object(u["l"])(this.metrics)};return e},wrapTotalReqParams:function(){var e={time_range:Object(u["r"])(this.currFilterApply),filtering:Object(u["m"])(this.currFilterApply,this.inFields,this.likeFields),fields:Object(u["l"])(this.metrics),group_by:Object(u["n"])(this.currDimensions),page:JSON.stringify({count:this.currPageIndex,size:this.currPageSize}),query_type:"summary"};return e},wrapDownloadReqParams:function(){var e={time_range:Object(u["r"])(this.currFilterApply),filtering:Object(u["m"])(this.currFilterApply,this.inFields,this.likeFields),group_by:Object(u["n"])(this.currDimensions),fields:Object(u["l"])(this.metrics),file_format:"xlsx_formatted"};return e},showError:function(e){this.$Modal.error({title:"Error",content:e})},pageResetFalse:function(){this.pageReset=!1},onSelectPageInfo:function(e){var t=JSON.parse(e);this.$refs.pageFilter.setFilter(t.filter),this.$refs.table.$refs.childTableDimensions.setData(t.dimensions),this.currDimensions=JSON.parse(JSON.stringify(t.dimensions.dimensions.length>0?t.dimensions.dimensions:this.knownDimensions)),this.metrics=JSON.parse(JSON.stringify(t.dimensions.metrics.length>0?t.dimensions.metrics:this.knownMetrics)),t.filter.time_type&&(t.filter.rangeDates=Object(c["f"])(t.filter.time_type)),this.onFilterApply(t.filter)},onGetPageInfo:function(e){var t=this.$refs.pageFilter.getFilter(),n=this.$refs.table.$refs.childTableDimensions.getData(),a=JSON.stringify({filter:t,dimensions:n});w["a"].$emit("setPageInfo",e,a)}}),mounted:function(){this.setDefaultDimensionsAndMetrics(),this.updatePageData();var e=this;w["a"].$on("selectPageInfo",(function(t){e.onSelectPageInfo(t)})),w["a"].$on("getPageInfo",(function(t){e.onGetPageInfo(t)}))},beforeDestroy:function(){w["a"].$off("selectPageInfo"),w["a"].$off("getPageInfo")}},L=j,E=(n("418f"),Object(S["a"])(L,a,i,!1,null,null,null));t["default"]=E.exports},"418f":function(e,t,n){"use strict";n("0a85")},"75fd":function(e,t,n){}}]);