(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-643f235b"],{2575:function(e,t,n){},"45a2":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Card",{ref:"filter",staticClass:"filter-selection"},[n("div",[n("a-select",{staticClass:"inline-width",staticStyle:{"font-size":"12px"},attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"",autoClearSearchValue:!1,"max-tag-count":this.maxTagArr[0],"max-tag-text-length":this.maxTagTextArr[0],placeholder:"项目组-全部",optionFilterProp:"children"},on:{focus:function(t){return e.focusFun(0)},blur:function(t){return e.blurFun()},change:e.projectChange,mouseenter:function(t){return e.mouseenterFun(0)},mouseleave:function(t){return e.mouseleaveFun()}},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return n("div",{},[n("v-nodes",{attrs:{vnodes:t}}),n("a-divider",{staticClass:"select-all-divider"}),n("div",{staticClass:"select-all-div",on:{mousedown:function(e){return e.preventDefault()}}},[n("span",{staticClass:"select-all-span"},[e._v(e._s(e.projects.length)+"/"+e._s(e.allProjects.length))]),n("Button",{attrs:{type:"primary"},on:{click:function(t){e.projects=e.allProjects}}},[e._v("全选")])],1)],1)}}]),model:{value:e.projects,callback:function(t){e.projects=t},expression:"projects"}},e._l(e.allProjects,(function(t){return n("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1),n("a-select",{staticClass:"inline-width",staticStyle:{"font-size":"12px"},attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"",autoClearSearchValue:!1,"max-tag-count":this.maxTagArr[1],"max-tag-text-length":this.maxTagTextArr[1],placeholder:"App-全部",optionFilterProp:"children"},on:{focus:function(t){return e.focusFun(1)},blur:function(t){return e.blurFun()},mouseenter:function(t){return e.mouseenterFun(1)},mouseleave:function(t){return e.mouseleaveFun()}},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return n("div",{},[n("v-nodes",{attrs:{vnodes:t}}),n("a-divider",{staticClass:"select-all-divider"}),n("div",{staticClass:"select-all-div",on:{mousedown:function(e){return e.preventDefault()}}},[n("span",{staticClass:"select-all-span"},[e._v(e._s(e.apps.length)+"/"+e._s(e.canSelectAllApp.length))]),n("Button",{attrs:{type:"primary"},on:{click:function(t){e.apps=e.canSelectAllApp.map((function(e){return e.app_id}))}}},[e._v("全选")])],1)],1)}}]),model:{value:e.apps,callback:function(t){e.apps=t},expression:"apps"}},e._l(e.canSelectAllApp,(function(t){return n("Option",{key:t.app_id,attrs:{value:t.app_id}},[e._v(e._s(t.app_name)+"\n      ")])})),1),"chinaCumulate"!==this.pageRooter?n("a-select",{staticClass:"inline-width",staticStyle:{"font-size":"12px"},attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"",autoClearSearchValue:!1,"max-tag-count":this.maxTagArr[2],"max-tag-text-length":this.maxTagTextArr[2],placeholder:"安装渠道-全部",optionFilterProp:"children"},on:{focus:function(t){return e.focusFun(2)},blur:function(t){return e.blurFun()},mouseenter:function(t){return e.mouseenterFun(2)},mouseleave:function(t){return e.mouseleaveFun()}},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return n("div",{},[n("v-nodes",{attrs:{vnodes:t}}),n("a-divider",{staticClass:"select-all-divider"}),n("div",{staticClass:"select-all-div",on:{mousedown:function(e){return e.preventDefault()}}},[n("span",{staticClass:"select-all-span"},[e._v(e._s(e.mediaSources.length)+"/"+e._s(e.allMediaSources.length))]),n("Button",{attrs:{type:"primary"},on:{click:function(t){e.mediaSources=e.allMediaSources.map((function(e){return e.id}))}}},[e._v("全选")])],1)],1)}}],null,!1,1480411050),model:{value:e.mediaSources,callback:function(t){e.mediaSources=t},expression:"mediaSources"}},e._l(e.allMediaSources,(function(t){return n("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name)+"\n      ")])})),1):e._e(),"chinaCumulate"!==this.pageRooter?n("a-select",{staticClass:"inline-width",staticStyle:{"font-size":"12px"},attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"",autoClearSearchValue:!1,"max-tag-count":this.maxTagArr[3],"max-tag-text-length":this.maxTagTextArr[3],placeholder:"安装版本-全部",optionFilterProp:"children"},on:{focus:function(t){return e.focusFun(3)},blur:function(t){return e.blurFun()},mouseenter:function(t){return e.mouseenterFun(3)},mouseleave:function(t){return e.mouseleaveFun()}},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return n("div",{},[n("v-nodes",{attrs:{vnodes:t}}),n("a-divider",{staticClass:"select-all-divider"}),n("div",{staticClass:"select-all-div",on:{mousedown:function(e){return e.preventDefault()}}},[n("span",{staticClass:"select-all-span"},[e._v(e._s(e.appVersions.length)+"/"+e._s(e.allAppVersions.length))]),n("Button",{attrs:{type:"primary"},on:{click:function(t){e.appVersions=e.allAppVersions}}},[e._v("全选")])],1)],1)}}],null,!1,1490165525),model:{value:e.appVersions,callback:function(t){e.appVersions=t},expression:"appVersions"}},e._l(e.allAppVersions,(function(t){return n("Option",{key:t,attrs:{value:t}},[e._v(e._s(t)+"\n      ")])})),1):e._e(),"chinaCohort"===this.pageRooter?n("a-select",{staticClass:"inline-width",staticStyle:{"font-size":"12px"},attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"",autoClearSearchValue:!1,"max-tag-count":this.maxTagArr[4],"max-tag-text-length":this.maxTagTextArr[4],placeholder:"操作系统版本-全部",optionFilterProp:"children"},on:{focus:function(t){return e.focusFun(4)},blur:function(t){return e.blurFun()},mouseenter:function(t){return e.mouseenterFun(4)},mouseleave:function(t){return e.mouseleaveFun()}},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return n("div",{},[n("v-nodes",{attrs:{vnodes:t}}),n("a-divider",{staticClass:"select-all-divider"}),n("div",{staticClass:"select-all-div",on:{mousedown:function(e){return e.preventDefault()}}},[n("span",{staticClass:"select-all-span"},[e._v(e._s(e.os_version.length)+"/"+e._s(e.canSelectAllVersion.length))]),n("Button",{attrs:{type:"primary"},on:{click:function(t){e.os_version=e.canSelectAllVersion.map((function(e){return e.name}))}}},[e._v("全选")])],1)],1)}}],null,!1,3204308640),model:{value:e.os_version,callback:function(t){e.os_version=t},expression:"os_version"}},e._l(e.canSelectAllVersion,(function(t){return n("Option",{key:t.name,attrs:{value:t.name}},[e._v(e._s(t.name)+"\n      ")])})),1):e._e(),"chinaCohort"===this.pageRooter?n("a-select",{staticClass:"inline-width",staticStyle:{"font-size":"12px"},attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"",autoClearSearchValue:!1,"max-tag-count":this.maxTagArr[5],"max-tag-text-length":this.maxTagTextArr[5],placeholder:"手机品牌-全部",optionFilterProp:"children"},on:{focus:function(t){return e.focusFun(5)},blur:function(t){return e.blurFun()},mouseenter:function(t){return e.mouseenterFun(5)},mouseleave:function(t){return e.mouseleaveFun()}},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return n("div",{},[n("v-nodes",{attrs:{vnodes:t}}),n("a-divider",{staticClass:"select-all-divider"}),n("div",{staticClass:"select-all-div",on:{mousedown:function(e){return e.preventDefault()}}},[n("span",{staticClass:"select-all-span"},[e._v(e._s(e.device_brand.length)+"/"+e._s(e.canSelectAllBrand.length))]),n("Button",{attrs:{type:"primary"},on:{click:function(t){e.device_brand=e.canSelectAllBrand.map((function(e){return e.name}))}}},[e._v("全选")])],1)],1)}}],null,!1,1784963712),model:{value:e.device_brand,callback:function(t){e.device_brand=t},expression:"device_brand"}},e._l(e.canSelectAllBrand,(function(t){return n("Option",{key:t.name,attrs:{value:t.name}},[e._v(e._s(t.name)+"\n      ")])})),1):e._e(),"chinaCohort"===this.pageRooter?n("a-select",{staticClass:"inline-width",staticStyle:{"font-size":"12px"},attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"",autoClearSearchValue:!1,"max-tag-count":this.maxTagArr[6],"max-tag-text-length":this.maxTagTextArr[6],placeholder:"手机型号-全部",optionFilterProp:"children"},on:{focus:function(t){return e.focusFun(6)},blur:function(t){return e.blurFun()},mouseenter:function(t){return e.mouseenterFun(6)},mouseleave:function(t){return e.mouseleaveFun()}},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return n("div",{},[n("v-nodes",{attrs:{vnodes:t}}),n("a-divider",{staticClass:"select-all-divider"}),n("div",{staticClass:"select-all-div",on:{mousedown:function(e){return e.preventDefault()}}},[n("span",{staticClass:"select-all-span"},[e._v(e._s(e.std_device_model.length)+"/"+e._s(e.canSelectAllmodel.length))]),n("Button",{attrs:{type:"primary"},on:{click:function(t){e.std_device_model=e.canSelectAllmodel.map((function(e){return e.name}))}}},[e._v("全选")])],1)],1)}}],null,!1,3858017920),model:{value:e.std_device_model,callback:function(t){e.std_device_model=t},expression:"std_device_model"}},e._l(e.canSelectAllmodel,(function(t){return n("Option",{key:t.name,attrs:{value:t.name}},[e._v(e._s(t.name)+"\n      ")])})),1):e._e(),n("DatePicker",{staticClass:"inline-width",attrs:{type:"daterange",options:e.daterangeoption,clearable:!1,placement:"bottom-start",placeholder:"选择日期范围"},model:{value:e.rangeDates,callback:function(t){e.rangeDates=t},expression:"rangeDates"}}),n("Button",{attrs:{type:"primary",disabled:e.loading},on:{click:e.handleSubmit}},[e._v("Apply Filter")])],1),n("div",{staticClass:"optionsContents",attrs:{id:"optionsContent"}},e._l(e.tmpOptions,(function(t){return n("li",{key:t},[e._v(e._s(t))])})),0)])},i=[],r=(n("8e6e"),n("456d"),n("ac6a"),n("5df3"),n("7f7f"),n("20d6"),n("ade3")),s=n("2f62"),l=n("90de"),o=n("4b65"),c=n("9839"),u=(n("1ef0"),n("1157")),p=n.n(u);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={name:"page-filter",components:{ASelect:c["d"],Option:c["d"].Option,VNodes:{functional:!0,render:function(e,t){return t.props.vnodes}}},data:function(){return{projects:[],apps:[],mediaSources:[],mediabuy_channel:[],appVersions:[],allProjects:[],allApp:[],allMediabuyChannel:[],allAppVersions:[],canSelectAllApp:[],os_version:[],device_brand:[],canSelectAllBrand:[],std_device_model:[],daterangeoption:{},rangeDates:[],maxTagArr:[1,1,1,1,1,1,1],maxTagTextArr:[20,20,20,20,20,20,20],tmpAllOptions:[],tmpOptions:[],mark:0}},props:{pageRooter:{type:String,default:function(){return null}},canSelectAllVersion:{type:Array,default:function(){return[]}},allMediaSources:{type:Array,default:function(){return[]}},canSelectAllmodel:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:function(){return!1}}},methods:h(h({},Object(s["b"])(["getAllChinaProject","getAllAppForDashboard","getChinaAppVersion","getChinaMediaSource","getChinaMediabuyChannel","getBrandlist"])),{},{projectChange:function(e){var t=this;if(e.length>0){this.canSelectAllAppType=[],this.canSelectAllApp=[],this.appTypes=[],this.apps=[];for(var n=0;n<e.length;++n)for(var a=function(a){t.allApp[a].project===e[n]&&t.canSelectAllApp.findIndex((function(e){return e.app_id===t.allApp[a].app_id}))<0&&t.canSelectAllApp.push(t.allApp[a])},i=0;i<this.allApp.length;++i)a(i)}else this.apps=[],this.initAllSelect()},initAllSelect:function(){this.projects.length>0?this.projectChange(this.projects):(this.canSelectAllApp=this.allApp.filter((function(e){return null!=e})),this.canSelectAllMediaSource=this.allMediaSources.filter((function(e){return null!=e})))},handleSubmit:function(e){var t={projects:this.projects,apps:this.apps,rangeDates:this.rangeDates,mediaSources:this.mediaSources,mediabuy_channel:this.mediabuy_channel,appVersions:this.appVersions,os_version:this.os_version,device_brand:this.device_brand,std_device_model:this.std_device_model};this.$emit("on-filter-apply",t)},maxTagCountfun:function(e){return this.maxTagCountObj&&this.maxTagCountObj[e]?this.maxTagCountObj[e]:1},focusFun:function(e){this.mark=1,p()("#optionsContent").length&&p()("#optionsContent").css({display:"none"}),this.maxTagArr=[1,1,1,1,1,1,1],this.maxTagTextArr=[20,20,20,20,20,20,20];var t=this;setTimeout((function(){t.maxTagArr.splice(e,0,10),t.maxTagTextArr.splice(e,0,100)}),500)},blurFun:function(){this.mark=0,this.maxTagArr.findIndex((function(e){return 10===e}))>=0&&(this.maxTagArr=[1,1,1,1,1,1,1],this.maxTagTextArr=[20,20,20,20,20,20,20]),this.setItemValues()},mouseenterFun:function(e){if(1!==this.mark){this.tmpOptions=this.tmpAllOptions[e];var t=Object(o["g"])(this.$refs["filter"].$el.clientWidth,e),n=document.getElementById("optionsContent");p()("#optionsContent").length&&this.tmpOptions&&this.tmpOptions.length>0&&n&&(p()("#optionsContent").css({display:"block",left:t.left+"px"}),n.style.setProperty("top",t.top+"px","important"))}},mouseleaveFun:function(){this.hideContentItem(),this.setItemValues()},setItemValues:function(){var e=this;this.tmpAllOptions[0]=this.projects;var t=[];this.apps&&this.apps.map((function(n,a){e.canSelectAllApp&&e.canSelectAllApp.map((function(e,a){n===e.app_id&&t.push(e.app_name)}))})),this.tmpAllOptions[1]=t;var n=[];this.mediaSources&&this.mediaSources.map((function(t,a){e.allMediaSources&&e.allMediaSources.map((function(e,a){t===e.id&&n.push(e.name)}))})),this.tmpAllOptions[2]=n;var a=[];this.mediabuy_channel&&this.mediabuy_channel.map((function(t,n){e.allMediabuyChannel&&e.allMediabuyChannel.map((function(e,n){t===e.id&&a.push(e.name)}))})),this.tmpAllOptions[3]=this.appVersions,this.tmpAllOptions[4]=this.os_version,this.tmpAllOptions[5]=this.device_brand,this.tmpAllOptions[6]=this.std_device_model},getFilter:function(){return{projects:this.projects,apps:this.apps,mediaSources:this.mediaSources,mediabuy_channel:this.mediabuy_channel,appVersions:this.appVersions,os_version:this.os_version,device_brand:this.device_brand,std_device_model:this.std_device_model,rangeDates:[Object(o["c"])(this.rangeDates[0]),Object(o["c"])(this.rangeDates[1])],time_type:Object(o["i"])(this.rangeDates)}},setFilter:function(e){this.projects=e.projects,this.apps=e.apps,this.mediaSources=e.mediaSources,this.mediabuy_channel=e.mediabuy_channel,this.appVersions=e.appVersions,this.os_version=e.os_version,this.device_brand=e.device_brand,this.std_device_model=e.std_device_model,this.rangeDates=e.rangeDates,e.time_type&&(this.rangeDates=Object(l["f"])(e.time_type))},hideContentItem:function(){var e=document.getElementById("optionsContent");e&&(e.style.display="none")}}),mounted:function(){var e=this;this.daterangeoption=Object(l["b"])();var t=this.$route.path,n=t.indexOf("/china_cumulate")>-1||t.indexOf("/china_cohort")>-1?"china_cumulate":"";Promise.all([this.getAllChinaProject(),this.getAllAppForDashboard(n),this.getChinaMediaSource(),this.getChinaAppVersion(),this.getBrandlist()]).then((function(t){e.allApp=t[1].filter((function(e){return t[0].findIndex((function(t){return t===e.project}))>=0})),e.allProjects=t[0].filter((function(t){return e.allApp.findIndex((function(e){return e.project===t}))>=0})),e.allAppVersions=t[3],e.initAllSelect(),e.canSelectAllBrand=t[4]}))},created:function(){this.rangeDates=Object(l["f"])("1 week")}},m=f,v=(n("c832"),n("2877")),g=Object(v["a"])(m,a,i,!1,null,"dd411f8a",null);t["a"]=g.exports},"8b2b":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"dom",style:{width:e.previewStatus?e.client_width:"auto"}})},i=[],r=(n("7f7f"),n("28a5"),n("ac6a"),n("313e")),s=n.n(r),l=n("90de"),o=n("6612"),c=n.n(o),u={name:"line-chart",props:{chartData:{type:Object,default:function(){return{legendData:[],xAxisData:[],values:[]}}},fieldFormaters:{type:Object,default:function(){return{}}},status:{type:Boolean,default:function(){return!1}},previewStatus:{type:Boolean,default:function(){return!1}},moneyType:{type:String,default:function(){return null}}},data:function(){return{dom:null,client_width:1400,client_height:500}},methods:{resize:function(){this.dom.resize()},wrapOption:function(e){for(var t=[],n=this.fieldFormaters[this.chartData.chartField],a=parseInt(this.chartData.xAxisData.length/15),i=0;i<this.chartData.values.length;i++)t.push({name:this.chartData.legendData[i],type:"line",showAllSymbol:!0,data:this.chartData.values[i],itemStyle:{normal:{label:{show:this.status,formatter:function(t){if(t.dataIndex%(a+1)!==0)return"";var i=c()(t.value).format(n);return e&&i&&i.indexOf("$")>-1&&(i="¥"+i.substring(i.indexOf("$")+1,i.length)),i}}}}});var r=this.chartData.hasCountry;return{animation:!1,tooltip:{trigger:"item",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},formatter:function(t){if(r){var a=t.seriesName.split(" - "),i=a.pop(),s=a[0];a.length>1&&(s=a.join(" - "));var l=c()(t.value).format(n);return e&&l&&l.indexOf("$")>-1&&(l="¥"+l.substring(l.indexOf("$")+1,l.length)),"日期："+t.name+"<br/>App名称："+s+"<br/>国家："+i+"<br/>数值："+l}var o=c()(t.value).format(n);return e&&o&&o.indexOf("$")>-1&&(o="¥"+o.substring(o.indexOf("$")+1,o.length)),"日期："+t.name+"<br/>App名称："+t.seriesName+"<br/>数值："+o}},legend:{orient:"vertical",type:"scroll",right:10,icon:"circle",data:this.chartData.legendData},grid:{top:"10%",left:"1.2%",right:"300px",bottom:"3%",height:"80%",width:"auto",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,axisLabel:{rotate:15,interval:a},data:this.chartData.xAxisData}],yAxis:[{type:"value",axisLabel:{formatter:function(t){var a=c()(t).format(n);return e&&a&&a.indexOf("$")>-1&&(a="¥"+a.substring(a.indexOf("$")+1,a.length)),a}}}],series:t}},renderChart:function(){var e=this,t=this.wrapOption(this.moneyType);this.$nextTick((function(){e.dom=s.a.init(e.$refs.dom),e.dom.setOption(t,!0),e.autoHeight=e.previewStatus?500:350,e.dom.resize({height:e.autoHeight}),Object(l["m"])(window,"resize",e.resize)}))},callMethod:function(e){},_expandable:function(){this.client_width=document.body.clientWidth,this.client_height=document.body.clientHeight}},watch:{chartData:{deep:!0,handler:function(e,t){this.renderChart()}},status:function(e){this.renderChart()},previewStatus:function(e){this.renderChart()}},mounted:function(){this.renderChart(),this._expandable();var e=this;window.onresize=function(){e._expandable()}},beforeDestroy:function(){Object(l["l"])(window,"resize",this.resize)}},p=u,d=n("2877"),h=Object(d["a"])(p,a,i,!1,null,null,null);t["a"]=h.exports},c832:function(e,t,n){"use strict";n("2575")}}]);