(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2cc185b1"],{3614:function(t,e,n){},"3dd2":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"filter-selection",staticStyle:{float:"left"}},[n("span",[t._v("Group by")]),n("a-select",{staticClass:"inline-width",staticStyle:{width:"230px","margin-right":"10px","margin-left":"10px","font-size":"12px"},attrs:{mode:t.selectMode,filterable:"",showArrow:"","max-tag-count":1,"max-tag-text-length":20,placeholder:"至少选择一个",optionFilterProp:"children"},on:{focus:function(e){return t.focusFun(0)},blur:function(e){return t.blurFun()},change:t.handleChartGroupChange,mouseenter:function(e){return t.mouseenterFun(0)},mouseleave:function(e){return t.mouseleaveFun()}},model:{value:t.chartGroups,callback:function(e){t.chartGroups=e},expression:"chartGroups"}},t._l(t.allOptions,(function(e,r){return n("a-option",{key:r,attrs:{value:e.val}},[t._v(t._s(e.label)+"\n      ")])})),1),n("Button",{attrs:{type:"primary",disabled:t.disableRefreshButton},on:{click:t.handleRefresh}},[t._v("刷新")]),n("div",{staticClass:"optionsContents",attrs:{id:"optionsContentItem"}},t._l(t.tmpOptions,(function(e){return n("li",{key:e},[t._v(t._s(e))])})),0)],1)},i=[],a=(n("20d6"),n("4b65")),o=n("9839"),s=n("1157"),l=n.n(s),u={name:"chart-group",components:{ASelect:o["d"],AOption:o["d"].Option},props:{selectMode:{type:String,default:"multiple"},knownFields:{type:Array,default:function(){return[]}},allChartGroups:{type:Array,default:function(){return[]}},defaultChartGroups:{type:Array,default:function(){return[]}}},data:function(){return{chartGroups:[],tmpAllOptions:[],tmpOptions:[],mark:0}},computed:{allOptions:function(){var t=Object(a["j"])(this.knownFields,this.allChartGroups);return t.push({label:"Total",val:"total"}),t},disableRefreshButton:function(){return 0===this.chartGroups.length}},methods:{handleChartGroupChange:function(t){if("string"!==typeof t){if(t.length>1){var e=t.findIndex((function(t){return"total"===t}));0===e?t=t.filter((function(t){return"total"!==t})):e>0&&(t=["total"]),this.chartGroups=t}this.$emit("on-chart-group-change",t)}else this.$emit("on-chart-group-change",[t])},handleRefresh:function(){this.$emit("on-chart-group-refresh")},initChartGroups:function(){this.chartGroups=this.defaultChartGroups},mouseenterFun:function(t){if("default"!==this.selectMode&&1!==this.mark){this.tmpOptions=this.tmpAllOptions[t];var e=84,n=48,r=document.getElementById("optionsContentItem");l()("#optionsContentItem").length&&this.tmpOptions&&this.tmpOptions.length>0&&r&&(l()("#optionsContentItem").css({display:"block",left:e+"px"}),r.style.setProperty("top",n+"px","important"))}},mouseleaveFun:function(){"default"!==this.selectMode&&(this.hideContentItem(),this.setItemValues())},focusFun:function(t){"default"!==this.selectMode&&(this.mark=1,l()("#optionsContentItem").length&&l()("#optionsContentItem").css({display:"none"}),setTimeout((function(){}),500))},blurFun:function(){"default"!==this.selectMode&&(this.mark=0,this.setItemValues())},hideContentItem:function(){l()("#optionsContentItem").length&&l()("#optionsContentItem").css({display:"none"})},setItemValues:function(){var t=this,e=[];this.chartGroups.map((function(n,r){t.allOptions.map((function(t,r){n===t.val&&e.push(t.label)}))})),this.tmpAllOptions[0]=e}},mounted:function(){this.chartGroups=this.defaultChartGroups,this.setItemValues()}},h=u,c=(n("ccd5"),n("2877")),f=Object(c["a"])(h,r,i,!1,null,"759bf7c6",null);e["a"]=f.exports},"7ba5":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{ref:"dom",style:{width:t.previewStatus?t.client_width:"auto"}})])},i=[],a=(n("8e6e"),n("456d"),n("7f7f"),n("28a5"),n("20d6"),n("ade3")),o=(n("ac6a"),n("313e")),s=n.n(o),l=n("90de"),u=n("6612"),h=n.n(u),c=n("4b65");function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){Object(a["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var p={name:"group-mixture-chart",props:{chartData:{type:Object,default:function(){return{legendData1:[],legendData2:[],xAxisData:[],values:[],ChartDes:""}}},knownFields:{type:Array,default:function(){return[]}},fieldFormaters:{type:Object,default:function(){return{}}},defaultFormater:{type:String,default:function(){return""}},xAxisType:{type:String,default:function(){return"日期"}},status:{type:Boolean,default:function(){return!1}},previewStatus:{type:Boolean,default:function(){return!1}},moneyType:{type:String,default:function(){return null}},events:{type:Array,default:function(){return[]}}},data:function(){return{dom:null,client_width:1400,client_height:500}},methods:{resize:function(){this.dom.resize()},wrapOption:function(t){var e=[],n=this.fieldFormaters[this.chartData.chartField];null==n&&(n=this.defaultFormater);for(var r=parseInt(this.chartData.xAxisData.length/15),i="sort_free_rank"===this.chartData.chartField?2:0,a=0;a<this.chartData.values.length;a++){var o=d(d({},this.chartData.values[a]),{},{showAllSymbol:!0,itemStyle:{normal:{color:this.chartData.values[a].itemColor,label:{show:this.status,color:this.chartData.values[a].textColor?this.chartData.values[a].textColor:"",formatter:function(e){if(e.dataIndex%(r+1)!==0)return"";if(!e||!e.value)return 0;var n=e.value;return t&&n&&n.indexOf("$")>-1&&(n="¥"+n.substring(n.indexOf("$")+1,n.length)),"line"===e.seriesType?(n=n.toFixed(i)+"%",n):h()(n).format("0,0")}}}}});e.push(o)}var s=0===this.chartData.values.length,l=[];this.chartData.groups&&(l=this.chartData.groups.findIndex((function(t){return"total"===t}))>=0?[{label:"Total",val:"total"}]:Object(c["j"])(this.knownFields,this.chartData.groups));var u=this.events,f=this.chartData.xAxisData,p=this.chartData.ChartDes,m={title:{show:s,text:"暂无数据",left:"center",top:"center",textStyle:{color:"#464c5b",fontSize:16,fontWeight:400}},animation:!1,tooltip:{trigger:"item",axisPointer:{type:"shadow",crossStyle:{color:"#999"},label:{formatter:function(e){if("y"===e.axisDimension){var r=h()(e.value).format(n);return t&&r&&r.indexOf("$")>-1&&(r="¥"+r.substring(r.indexOf("$")+1,r.length)),r}var i=e.value;if(u.length>0){i="转化率 ";var a=f.findIndex((function(t){return t===e.value}));i+=a+1+": ",i+=u[a]+"  "+(a+2)+": ",i+=u[a+1]}return i},backgroundColor:"#6a7985"}},formatter:function(e){var n="",r=e.seriesName.split("/").reverse();2===r.length&&(n=r[1]),1===r.length&&(n=e.seriesName);var a=e.value.toFixed(i);t&&a&&a.indexOf("$")>-1&&(a="¥"+a.substring(a.indexOf("$")+1,a.length));var o="日期:".concat(e.name);if("bar"===e.seriesType&&(o+="<br/>",o+=l[0].label,o+=": ",o+=e.data.label),"line"===e.seriesType){for(var s=0;s<l.length;s++)o+="<br/>",o+=l[s].label,o+=": ",o+=r[s];o+="<br/>",o+=p,o+=": ",o+=a,o+="%"}else o+="<br/>",o+=n,o+=": ",o+=h()(a).format("0,0");return o}},legend:[{formatter:function(t){return t?(t.length>32&&(t=t.slice(0,32)+"..."),t):""},tooltip:{show:!0,trigger:"axis",axisPointer:{type:"shadow"}},orient:"vertical",type:"scroll",right:10,data:this.chartData.legendData2},{formatter:function(t){return t?(t.length>32&&(t=t.slice(0,32)+"..."),t):""},tooltip:{show:!0,trigger:"axis",axisPointer:{type:"shadow"}},orient:"horizontal",left:"3.2%",bottom:0,data:this.chartData.legendData1}],grid:{top:"10%",left:"1.2%",right:"260px",bottom:"3%",height:"80%",width:"auto",containLabel:!0},xAxis:[{type:"category",boundaryGap:!0,axisLabel:{rotate:15,interval:r},data:this.chartData.xAxisData}],yAxis:[{type:"value",splitNumber:10,axisLine:{show:!0},axisLabel:{formatter:"{value}"},splitLine:{show:!1}},{show:this.chartData.xAxisData.length>0,max:100,min:0,type:"value",splitNumber:10,axisLine:{show:!0},axisLabel:{formatter:"{value} %"},splitLine:{show:!1}}],series:e};return m},renderChart:function(){var t=this,e=this.wrapOption(this.moneyType);this.$nextTick((function(){t.dom=s.a.init(t.$refs.dom),t.dom.setOption(e,!0),t.autoHeight=t.previewStatus?500:350,t.dom.resize({height:t.autoHeight}),Object(l["m"])(window,"resize",t.resize)}))},reRenderChartSeries:function(){var t=this,e=this.wrapOption(this.moneyType),n=this.dom.getOption();null!=n&&(n.series=e.series),this.$nextTick((function(){t.dom=s.a.init(t.$refs.dom),t.dom.setOption(n,!0),t.autoHeight=t.previewStatus?500:350,t.dom.resize({height:t.autoHeight}),Object(l["m"])(window,"resize",t.resize)}))},callMethod:function(t){},_expandable:function(){this.client_width=document.body.clientWidth,this.client_height=document.body.clientHeight}},watch:{chartData:{deep:!0,handler:function(t,e){this.renderChart()}},status:function(t){this.reRenderChartSeries()},previewStatus:function(t){this.reRenderChartSeries()}},mounted:function(){this.renderChart(),this._expandable();var t=this;window.onresize=function(){t._expandable()}},beforeDestroy:function(){Object(l["l"])(window,"resize",this.resize)}},m=p,g=n("2877"),v=Object(g["a"])(m,r,i,!1,null,null,null);e["a"]=v.exports},"88e6":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"dom",style:{width:t.previewStatus?t.client_width:"auto"}})},i=[],a=(n("7f7f"),n("28a5"),n("20d6"),n("ac6a"),n("313e")),o=n.n(a),s=n("90de"),l=n("6612"),u=n.n(l),h=n("4b65"),c={name:"group-line-chart",props:{chartData:{type:Object,default:function(){return{legendData:[],xAxisData:[],values:[]}}},knownFields:{type:Array,default:function(){return[]}},fieldFormaters:{type:Object,default:function(){return{}}},defaultFormater:{type:String,default:function(){return""}},xAxisType:{type:String,default:function(){return"日期"}},status:{type:Boolean,default:function(){return!1}},previewStatus:{type:Boolean,default:function(){return!1}},moneyType:{type:String,default:function(){return null}},events:{type:Array,default:function(){return[]}},inverseStatus:{type:Boolean,default:function(){return!1}}},data:function(){return{dom:null,client_width:1400,client_height:500}},methods:{resize:function(){this.dom.resize()},wrapOption:function(t){var e=this,n=[],r=this.fieldFormaters[this.chartData.chartField];null==r&&(r=this.defaultFormater);var i="数值";null!=this.chartData.chartField&&(i=this.knownFields.filter((function(t){return t.val===e.chartData.chartField}))[0].label);for(var a=parseInt(this.chartData.xAxisData.length/15),o=0;o<this.chartData.values.length;o++)n.push({name:this.chartData.legendData[o],type:"line",showAllSymbol:!0,data:this.chartData.values[o],itemStyle:{normal:{label:{show:this.status,formatter:function(e){if(e.dataIndex%(a+1)!==0)return"";var n=u()(e.value).format(r);return t&&n&&n.indexOf("$")>-1&&(n="¥"+n.substring(n.indexOf("$")+1,n.length)),n}}}}});var s=0===this.chartData.legendData.length,l=[];this.chartData.groups&&(l=this.chartData.groups.findIndex((function(t){return"total"===t}))>=0?[{label:"Total",val:"total"}]:Object(h["j"])(this.knownFields,this.chartData.groups));var c=this.xAxisType,f=this.events,d=this.chartData.xAxisData,p=Object.hasOwnProperty.call(this.chartData,"grid")?this.chartData.grid.left:"1.2%";return{title:{show:s,text:"暂无数据",left:"center",top:"center",textStyle:{color:"#464c5b",fontSize:16,fontWeight:400}},animation:!1,tooltip:{trigger:"item",axisPointer:{type:"cross",label:{formatter:function(e){if("y"===e.axisDimension){var n=u()(e.value).format(r);return t&&n&&n.indexOf("$")>-1&&(n="¥"+n.substring(n.indexOf("$")+1,n.length)),n}var i=e.value;if(f.length>0){i="转化率 ";var a=d.findIndex((function(t){return t===e.value}));i+=a+1+": ",i+=f[a]+"  "+(a+2)+": ",i+=f[a+1]}return i},backgroundColor:"#6a7985"}},formatter:function(e){var n=e.seriesName.split("/"),a=u()(e.value).format(r);t&&a&&a.indexOf("$")>-1&&(a="¥"+a.substring(a.indexOf("$")+1,a.length));for(var o=c+(""!==c?": ":"")+e.name,s=0;s<l.length;s++)o+="<br/>",o+=l[s].label,o+=": ",o+=n[s];return o+="<br/>",o+=i,o+=": ",o+=a,o}},legend:{formatter:function(t){return t?(t.length>32&&(t=t.slice(0,32)+"..."),t):""},tooltip:{show:!0},orient:"vertical",type:"scroll",right:10,icon:"circle",data:this.chartData.legendData},grid:{top:"10%",left:p||"1.2%",right:"260px",bottom:"3%",height:"80%",width:"auto",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,axisLabel:{rotate:15,interval:a},axisLine:{onZero:!this.inverseStatus},data:this.chartData.xAxisData}],yAxis:[{inverse:!!this.inverseStatus,type:"value",axisLabel:{formatter:function(e){var n=u()(e).format(r);return t&&n&&n.indexOf("$")>-1&&(n="¥"+n.substring(n.indexOf("$")+1,n.length)),n}}}],series:n}},renderChart:function(){var t=this,e=this.wrapOption(this.moneyType);this.$nextTick((function(){t.dom=o.a.init(t.$refs.dom),t.dom.setOption(e,!0),t.autoHeight=t.previewStatus?500:350,t.dom.resize({height:t.autoHeight}),Object(s["m"])(window,"resize",t.resize)}))},reRenderChartSeries:function(){var t=this,e=this.wrapOption(this.moneyType),n=this.dom.getOption();null!=n&&(n.series=e.series),this.$nextTick((function(){t.dom=o.a.init(t.$refs.dom),t.dom.setOption(n,!0),t.autoHeight=t.previewStatus?500:350,t.dom.resize({height:t.autoHeight}),Object(s["m"])(window,"resize",t.resize)}))},callMethod:function(t){},_expandable:function(){this.client_width=document.body.clientWidth,this.client_height=document.body.clientHeight}},watch:{chartData:{deep:!0,handler:function(t,e){this.renderChart()}},status:function(t){this.reRenderChartSeries()},previewStatus:function(t){this.reRenderChartSeries()}},mounted:function(){this.renderChart(),this._expandable();var t=this;window.onresize=function(){t._expandable()}},beforeDestroy:function(){Object(s["l"])(window,"resize",this.resize)}},f=c,d=n("2877"),p=Object(d["a"])(f,r,i,!1,null,null,null);e["a"]=p.exports},ccd5:function(t,e,n){"use strict";n("3614")}}]);