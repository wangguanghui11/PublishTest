(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c213b"],{4988:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Card",[a("fruit-console-tables",{ref:"tables",attrs:{topadd:"",stripe:"",editable:"",searchable:"",batchDelete:!1,"search-place":"top",columns:e.columns,selectData:[{key:"app_name",value:e.canSelectApp},{key:"network_name",value:e.canSelectNetwork}],loading:e.loading},on:{"on-edit":e.handleEdit,"on-add":e.handleAdd,"on-delete":e.handleDelete,"on-batch-delete":e.handleBatchDelete,"on-selection-change":e.handleSelectionChange},model:{value:e.tableData,callback:function(t){e.tableData=t},expression:"tableData"}}),a("Modal",{attrs:{"footer-hide":!0,width:450},model:{value:e.showWindowBDrawer,callback:function(t){e.showWindowBDrawer=t},expression:"showWindowBDrawer"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:e.formHeadIcon,size:18}}),a("b",[e._v(" "+e._s(e.formHeaderName))])],1),a("div",{staticStyle:{"margin-right":"30px"}},[a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":110}},[a("FormItem",{attrs:{label:"App name",prop:"app_id"}},[a("Select",{attrs:{placeholder:"Select app",filterable:""},model:{value:e.formValidate.app_id,callback:function(t){e.$set(e.formValidate,"app_id",t)},expression:"formValidate.app_id"}},e._l(e.allApp,(function(t){return a("Option",{key:t.app_id,attrs:{value:t.app_id}},[e._v(e._s(t.app_name))])})),1)],1),a("FormItem",{attrs:{label:"Network",prop:"network_name"}},[a("Select",{attrs:{placeholder:"Select network"},model:{value:e.formValidate.network_name,callback:function(t){e.$set(e.formValidate,"network_name",t)},expression:"formValidate.network_name"}},e._l(e.allNetwork,(function(t){return a("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1),a("FormItem",{attrs:{label:"Network App ID",prop:"network_app_id"}},[a("Input",{attrs:{disabled:e.networkAppIdDisabled,placeholder:"Enter network app ID"},model:{value:e.formValidate.network_app_id,callback:function(t){e.$set(e.formValidate,"network_app_id",t)},expression:"formValidate.network_app_id"}})],1),a("FormItem",{staticStyle:{"margin-bottom":"5px"}},[a("Button",{staticStyle:{float:"right","margin-left":"8px"},attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formValidate")}}},[e._v("Submit")]),a("Button",{staticStyle:{float:"right"},on:{click:function(t){return e.handleReset("formValidate")}}},[e._v("Reset")])],1)],1)],1)])],1)],1)},r=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("ade3")),l=a("cd9b"),i=a("7d75"),p=a("2f62");function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c={name:"network-app-id",components:{FruitConsoleTables:l["a"],DragDrawer:i["a"]},data:function(){return{columns:[{title:"序号",key:"id",width:60,render:function(e,t){var a=t?t.index+1:"-";return e("div",a)}},{title:"App-Name",key:"app_name",searchable:!0,isSelect:!0},{title:"Network",key:"network_name",searchable:!0,isSelect:!0},{title:"Network-App-ID",key:"network_app_id",searchable:!0},{title:"Last-updated-date",key:"last_updated_date"},{title:"Operator",key:"operator"}],allApp:[],allNetwork:[],tableData:[],canSelectApp:[],canSelectNetwork:[],showWindowBDrawer:!1,showBDrawer3:!1,width1:300,width2:200,placement:!1,draggable:!0,formHeadIcon:"ios-add",formHeaderName:"Add network account",submitAdd:!0,networkAppIdDisabled:!1,formValidate:{app_id:"",app_name:"",network_name:"",network_app_id:""},ruleValidate:{app_id:[{required:!0,message:"Please select the app",trigger:"change"}],network_name:[{required:!0,message:"Please select the network",trigger:"change"}],network_app_id:[{required:!0,message:"The network app ID cannot be empty",trigger:"blur"}]},selectedRows:[],loading:!0}},methods:s(s({},Object(p["b"])(["getAllNetworkAppId","getAllNetwork","getAllApp","postNetworkAppId","putNetworkAppId","deleteNetworkAppId","batchDeleteNetworkAppId"])),{},{handleAdd:function(){this.networkAppIdDisabled=!1,this.$refs["formValidate"].resetFields(),this.formHeadIcon="ios-add",this.formHeaderName="Add network app ID",this.submitAdd=!0,this.showWindowBDrawer=!0},handleEdit:function(e){this.networkAppIdDisabled=!0,this.$refs["formValidate"].resetFields(),this.formValidate.app_id=e.row.app_id,this.formValidate.app_name=e.row.app_name,this.formValidate.network_name=e.row.network_name,this.formValidate.network_app_id=e.row.network_app_id,this.formHeadIcon="ios-create",this.formHeaderName="Update network app ID",this.submitAdd=!1,this.showWindowBDrawer=!0},handleSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){for(var a=t.formValidate.app_id,n="",r=0;r<t.allApp.length;r++)if(a===t.allApp[r].app_id){n=t.allApp[r].app_name;break}var o={app_id:a,app_name:n,network_name:t.formValidate.network_name,network_app_id:t.formValidate.network_app_id};t.submitAdd?t.postNetworkAppId({networkAppId:o}).then((function(e){t.tableData.push(e),t.showWindowBDrawer=!1,t.$Message.success("Add Success!")})).catch((function(e){t.$Modal.error({title:"Error",content:e})})):t.putNetworkAppId({networkAppId:o}).then((function(e){t.tableData=t.tableData.map((function(t){return t.network_app_id===e.network_app_id?e:t})),t.tableData.push({}),t.tableData.pop(),t.showWindowBDrawer=!1,t.$Message.success("Update Success!")})).catch((function(e){t.$Modal.error({title:"Error",content:e})}))}}))},handleDelete:function(e){var t=this;this.deleteNetworkAppId({networkAppId:e.row}).then((function(e){t.$Message.success("Delete Success!"),t.tableData=t.tableData.filter((function(t){return t.network_app_id_ID!==e.network_app_id_ID}))})).catch((function(e){t.$Modal.error({title:"Error",content:e})}))},handleSelectionChange:function(e){this.selectedRows=e},handleBatchDelete:function(){var e=this;if(this.selectedRows.length>0){var t=this;this.$Modal.confirm({title:"warning",content:"Are you sure to delete the selected?",onOk:function(){t.batchDeleteNetworkAppId(e.selectedRows).then((function(e){e.map((function(e){t.tableData=t.tableData.filter((function(t){return t.network_app_id!==e.network_app_id}))})),t.$Message.success("Batch delete Success!")})).catch((function(e){t.$Message.error(e)}))},onCancel:function(){}})}else this.$Modal.info({title:"Info",content:"You have not chosen"})},handleReset:function(e){this.$refs[e].resetFields()}}),computed:{placementComputed:function(){return this.placement?"left":"right"}},mounted:function(){var e=this;this.getAllNetwork().then((function(t){e.allNetwork=t.filter((function(e){return"facebook"===e.name||"vungle"===e.name||"unity"===e.name||"mintegral"===e.name||"bytedanceunion"===e.name||"fyber"===e.name})).map((function(e){return e.name})),e.canSelectNetwork=e.allNetwork})),this.getAllApp().then((function(t){e.allApp=t,e.canSelectApp=e.allApp.map((function(e){return e.app_name})),e.getAllNetworkAppId({apps:e.allApp}).then((function(t){e.tableData=t,e.loading=!1}))})),this.$store.state.user.access.indexOf("account_and_authority")>=0&&this.columns.push({title:"Handle",key:"handle",options:["delete"]})}},u=c,w=a("2877"),h=Object(w["a"])(u,n,r,!1,null,null,null);t["default"]=h.exports}}]);