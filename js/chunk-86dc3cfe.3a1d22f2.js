(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-86dc3cfe"],{"27ee2":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Card",[r("fruit-console-tables",{ref:"tables",attrs:{topadd:"",stripe:"",editable:"",searchable:"",batchDelete:!1,showDownload:!0,downloadName:"下载配置文件","search-place":"top",columns:e.columns,selectData:[{key:"app_name",value:e.canSelectApp},{key:"ad_type",value:e.canSelectAdType}],loading:e.loading},on:{"on-edit":e.handleEdit,"on-add":e.handleAdd,"on-conf":e.handleConf,"on-list":e.handleOrderList,"on-delete":e.handleDelete,"on-download":e.handleDownload,"on-batch-delete":e.handleBatchDelete,"on-selection-change":e.handleSelectionChange},model:{value:e.allWaterfall,callback:function(t){e.allWaterfall=t},expression:"allWaterfall"}}),r("Modal",{attrs:{title:"下载配置文件",width:350,"mask-closable":!1,"footer-hide":!0},model:{value:e.showDownload,callback:function(t){e.showDownload=t},expression:"showDownload"}},[r("span",[e._v("AppName:")]),r("Select",{staticStyle:{width:"250px","margin-left":"10px"},attrs:{filterable:!0,placeholder:"Select App"},model:{value:e.downloadApp,callback:function(t){e.downloadApp=t},expression:"downloadApp"}},e._l(e.allApp,(function(t,o){return r("Option",{key:o,attrs:{value:t.app_id}},[e._v(e._s(t.app_name))])})),1),r("Button",{staticStyle:{"margin-top":"10px","margin-left":"210px"},attrs:{type:"primary"},on:{click:e.onDownload}},[e._v("下载json文件")])],1),r("Modal",{attrs:{"footer-hide":!0,width:450},model:{value:e.waterfallDragDrawer,callback:function(t){e.waterfallDragDrawer=t},expression:"waterfallDragDrawer"}},[r("div",{staticStyle:{"margin-right":"30px"}},[r("waterfall-form",{attrs:{"row-event":e.rowEvent,"form-model":e.waterfall,"all-app":e.allApp,"all-ad-type":e.allAdType,"all-placement-group":e.allPlacementGroup,"all-country-group":e.allCountryGroup,"all-waterfall":e.allWaterfall,"form-show":e.waterfallDragDrawer,"remote-placement-group":"remotePlacementGroup","remote-country-group":"remoteCountryGroup"},on:{"on-submit":e.submitWaterfall}})],1)]),r("Modal",{attrs:{"footer-hide":!0,width:450},model:{value:e.waterfallConfDragDrawer,callback:function(t){e.waterfallConfDragDrawer=t},expression:"waterfallConfDragDrawer"}},[r("div",{staticStyle:{"margin-right":"30px"}},[r("waterfall-conf-form",{attrs:{"all-request-type":e.allRequestType,"form-model":e.waterfallConf,"form-show":e.waterfallConfDragDrawer},on:{"on-submit":e.submitWaterfallConfig}})],1)]),r("Modal",{attrs:{"footer-hide":!0,width:450},model:{value:e.waterfallOrdersDragDrawer,callback:function(t){e.waterfallOrdersDragDrawer=t},expression:"waterfallOrdersDragDrawer"}},[r("div",[r("waterfall-orders",{attrs:{"all-network-ad":e.allNetworkAd,"all-network":e.allNetwork,"order-list":e.orderList,"auto-order-list":e.autoOrderList,"bidding-order-list":e.biddingOrderList,"form-show":e.waterfallOrdersDragDrawer,"country-group-id":e.ordercountrygroupid,"all-country-group":e.allCountryGroup,"orders-app-id":e.ordersappid,"orders-ad-type":e.ordersadtype},on:{"on-orders-save":e.saveOrders}})],1)])],1)],1)},n=[],a=(r("8e6e"),r("456d"),r("ac6a"),r("5df3"),r("28a5"),r("7f7f"),r("ade3")),i=r("cd9b"),l=r("7d75"),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticStyle:{"border-bottom":"1px solid #e8eaec","padding-top":"1px","padding-right":"16px","padding-bottom":"14px","padding-left":"16px","line-height":"1","margin-bottom":"16px","font-size":"14px"},attrs:{slot:"header"},slot:"header"},[r("Icon",{attrs:{type:"addwaterfall"===e.rowEvent.name?"ios-add":"ios-create",size:18}}),r("b",[e._v(" "+e._s("addwaterfall"===e.rowEvent.name?"Add waterfall":"Update waterfall"))])],1),r("Form",{ref:"formx",attrs:{model:e.formModel,rules:e.ruleValidate,"label-width":130}},[r("FormItem",{attrs:{label:"App name",prop:"app_id"}},[r("Select",{attrs:{placeholder:"Select app",disabled:"addwaterfall"!==e.rowEvent.name,filterable:""},on:{"on-change":e.handleAppChange},model:{value:e.formModel.app_id,callback:function(t){e.$set(e.formModel,"app_id",t)},expression:"formModel.app_id"}},e._l(e.allApp,(function(t,o){return r("Option",{key:o,attrs:{value:t.app_id}},[e._v(e._s(t.app_name))])})),1)],1),r("FormItem",{attrs:{label:"Ad type",prop:"ad_type"}},[r("Select",{attrs:{placeholder:"Select ad type",disabled:"addwaterfall"!==e.rowEvent.name,filterable:""},on:{"on-change":e.handleAdTypeChange},model:{value:e.formModel.ad_type,callback:function(t){e.$set(e.formModel,"ad_type",t)},expression:"formModel.ad_type"}},e._l(e.allAdType,(function(t,o){return r("Option",{key:o,attrs:{value:t}},[e._v(e._s(t))])})),1)],1),r("FormItem",{attrs:{label:"Placement group",prop:"placement_group_id"}},[r("Select",{attrs:{placeholder:"Select placement group",filterable:""},on:{"on-change":e.handlePlacementChange},model:{value:e.formModel.placement_group_id,callback:function(t){e.$set(e.formModel,"placement_group_id",t)},expression:"formModel.placement_group_id"}},e._l(e.canSelectPlacementGroups,(function(t,o){return r("Option",{key:o,attrs:{value:t.placement_group_id}},[e._v(e._s(t.placement_group_name))])})),1)],1),r("FormItem",{attrs:{label:"Country group",prop:"country_group_id"}},[r("Select",{attrs:{placeholder:"Select country group",filterable:""},model:{value:e.formModel.country_group_id,callback:function(t){e.$set(e.formModel,"country_group_id",t)},expression:"formModel.country_group_id"}},e._l(e.canSelectCountryGroups,(function(t,o){return r("Option",{key:o,attrs:{value:t.country_group_id}},[e._v(e._s(t.country_group_name))])})),1)],1),r("FormItem",{staticStyle:{"margin-bottom":"5px"}},[r("Button",{staticStyle:{float:"right","margin-left":"8px"},attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formx")}}},[e._v("Submit")]),r("Button",{staticStyle:{float:"right"},on:{click:function(t){return e.handleReset("formx")}}},[e._v("Reset")])],1)],1)],1)},s=[],c=(r("4f7f"),{name:"waterfall-form",props:{rowEvent:{type:Object,default:function(){return{name:"addwaterfall",waterfall_id:""}}},formModel:{type:Object,default:function(){return{app_id:"",ad_type:"",placement_group_id:"",country_group_id:""}}},allApp:{type:Array,default:function(){return[]}},allAdType:{type:Array,default:function(){return[]}},allPlacementGroup:{type:Array,default:function(){return[]}},allCountryGroup:{type:Array,default:function(){return[]}},allWaterfall:{type:Array,default:function(){return[]}},formShow:{type:Boolean,default:!1}},data:function(){return{loadingPlacementGroup:!1,loadingCountryGroup:!1,ruleValidate:{app_id:[{required:!0,message:"Please select the app",trigger:"change"}],ad_type:[{required:!0,message:"Please select the ad type",trigger:"change"}],placement_group_id:[{required:!0,message:"Please select the placement group",trigger:"change"}],country_group_id:[{required:!0,message:"Please select the country group",trigger:"change"}]},canSelectPlacementGroups:[],canSelectCountryGroups:[]}},methods:{handleSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var r=t.validateForm({app_id:t.formModel.app_id,ad_type:t.formModel.ad_type,placement_group_id:t.formModel.placement_group_id,country_group_id:t.formModel.country_group_id,curr_waterfall_id:t.rowEvent.waterfall_id});!1===r?t.$Modal.error({title:"Error",content:"不支持country group和placement group这样组合!"}):t.$emit("on-submit",t.formModel)}}))},handleReset:function(e){this.$refs[e].resetFields()},handleAppChange:function(){var e=this;this.formModel.ad_type="",this.formModel.placement_group_id="",this.formModel.country_group_id="",this.canSelectPlacementGroups=this.allPlacementGroup.filter((function(t){return t.app_id===e.formModel.app_id&&(!e.formModel.ad_type||t.ad_type===e.formModel.ad_type)})),this.canSelectCountryGroups=this.allCountryGroup.filter((function(t){return t.app_id===e.formModel.app_id}))},handleAdTypeChange:function(){var e=this;this.formModel.placement_group_id="",this.formModel.country_group_id="",this.canSelectPlacementGroups=this.allPlacementGroup.filter((function(t){return t.app_id===e.formModel.app_id&&(!e.formModel.ad_type||t.ad_type===e.formModel.ad_type)}))},handlePlacementChange:function(){var e=this,t=this.allPlacementGroup.filter((function(t){return t.placement_group_id===e.formModel.placement_group_id}));t.length>0&&(this.formModel.ad_type=t[0].ad_type)},validateForm:function(e){var t=this,r=e.app_id,o=(e.ad_type,e.placement_group_id),n=e.country_group_id,a=e.curr_waterfall_id;if(r&&o&&n){var i=this.allCountryGroup.filter((function(e){return e.country_group_id===n}))[0];if(i.app_id!==r)return!1;var l=this.allWaterfall.filter((function(e){return e.app_id===r})).filter((function(e){return e.placement_group_id===o})).filter((function(e){return e.waterfall_id!==a})),d=l.filter((function(e){return e.country_group_id===n}));if(d.length>0)return!1;for(var s=[],c=function(e){var r=l[e],o=r.country_group_id,n=t.allCountryGroup.filter((function(e){return e.country_group_id===o}))[0].country_group;s=s.concat(n)},u=0;u<l.length;u++)c(u);var p=this.allCountryGroup.filter((function(e){return e.country_group_id===n}))[0].country_group,f=new Set(p),m=new Set(s.filter((function(e){return f.has(e)})));return!(m.size>0)}return!1},remotePlacementGroupSearch:function(e){var t=this,r=this.formModel.app_id,o=this.formModel.ad_type;this.filterPlacementGroup(r,o),void 0!==e&&null!==e&&""!==e&&(this.loadingCountryGroup=!0,setTimeout((function(){t.loadingCountryGroup=!1,t.remotePlacementGroup=t.remotePlacementGroup.filter((function(t){return"other"===t.placement_group_id||t.placement_group_name.toLowerCase().indexOf(e.toLowerCase())>-1}))}),1))},remoteCountryGroupSearch:function(e){var t=this,r=this.formModel.app_id,o=this.formModel.placement_group_id,n=this.rowEvent.waterfall_id;this.filterCountryGroup(r,o,n),void 0!==e&&null!==e&&""!==e&&(this.loadingCountryGroup=!0,setTimeout((function(){t.loadingCountryGroup=!1,t.remoteCountryGroup=t.remoteCountryGroup.filter((function(t){return"other"===t.country_group_id||t.country_group_name.toLowerCase().indexOf(e.toLowerCase())>-1}))}),1))},filterRemote:function(e){var t=this.formModel.app_id,r=this.formModel.ad_type,o=this.formModel.placement_group_id,n=this.rowEvent.waterfall_id;this.filterPlacementGroup(t,r),this.filterCountryGroup(t,o,n)},filterPlacementGroup:function(e,t){this.remotePlacementGroup=this.allPlacementGroup.filter((function(r){return"other"===r.placement_group_id||r.app_id===e&&r.ad_type===t}))},filterCountryGroup:function(e,t,r){var o=this;this.remoteCountryGroup=this.allCountryGroup.filter((function(n){if("other"===n.country_group_id)return!0;if(e!==n.app_id)return!1;for(var a=new Set(n.country_group),i=o.allWaterfall.filter((function(e){return e.waterfall_id!==r})).filter((function(e){return e.placement_group_id===t})),l=[],d=function(e){var t=i[e],r=t.country_group_id,n=o.allCountryGroup.filter((function(e){return e.country_group_id===r}))[0].country_group;l=l.concat(n)},s=0;s<i.length;s++)d(s);var c=new Set(l.filter((function(e){return a.has(e)})));return!(c&&c.size>0)}))}},mounted:function(){this.filterRemote()},computed:{showAdd:function(){return"addwaterfall"===this.rowEvent.name&&!0===this.formShow}},watch:{showAdd:function(e,t){!0===e&&this.handleReset("formx")},formModel:function(){var e=this;this.canSelectPlacementGroups=this.allPlacementGroup.filter((function(t){return t.app_id===e.formModel.app_id&&(""===e.formModel.ad_type||t.ad_type===e.formModel.ad_type)})),this.canSelectCountryGroups=this.allCountryGroup.filter((function(t){return t.app_id===e.formModel.app_id}))}}}),u=c,p=r("2877"),f=Object(p["a"])(u,d,s,!1,null,null,null),m=f.exports,h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticStyle:{"border-bottom":"1px solid #e8eaec","padding-top":"1px","padding-right":"16px","padding-bottom":"14px","padding-left":"16px","line-height":"1","margin-bottom":"16px","font-size":"14px"},attrs:{slot:"header"},slot:"header"},[r("Icon",{attrs:{type:e.headerIcon,size:18}}),r("b",[e._v(" "+e._s(e.headerName))])],1),r("Form",{ref:"formx",attrs:{model:e.formModel,rules:e.ruleValidate,"label-width":130}},[r("FormItem",{attrs:{label:"Request type",prop:"requesttype"}},[r("Select",{attrs:{placeholder:"Select request type"},model:{value:e.formModel.requesttype,callback:function(t){e.$set(e.formModel,"requesttype",t)},expression:"formModel.requesttype"}},e._l(e.allRequestType,(function(t,o){return r("Option",{key:o,attrs:{value:t.request_type_id}},[e._v(e._s(t.request_type_name))])})),1)],1),r("FormItem",{attrs:{label:"Concurrent number",prop:"concurrent_number"}},[r("Input",{attrs:{placeholder:"Enter concurrent number",number:""},model:{value:e.formModel.concurrent_number,callback:function(t){e.$set(e.formModel,"concurrent_number",t)},expression:"formModel.concurrent_number"}})],1),r("FormItem",{attrs:{label:"Mininum caches",prop:"minimumcaches"}},[r("Input",{attrs:{placeholder:"Enter mininum caches",number:""},model:{value:e.formModel.minimumcaches,callback:function(t){e.$set(e.formModel,"minimumcaches",t)},expression:"formModel.minimumcaches"}})],1),r("FormItem",{attrs:{label:"Enable loop",prop:"enableloop"}},[r("i-switch",{attrs:{size:"large","true-color":"#13ce66","false-color":"#ff4949"},model:{value:e.formModel.enableloop,callback:function(t){e.$set(e.formModel,"enableloop",t)},expression:"formModel.enableloop"}},[r("span",{attrs:{slot:"open"},slot:"open"},[e._v("Yes")]),r("span",{attrs:{slot:"close"},slot:"close"},[e._v("No")])])],1),e.displayLoopTime?r("FormItem",{attrs:{label:"Loop time",prop:"looptime"}},[r("Input",{attrs:{placeholder:"Enter Loop time",number:""},model:{value:e.formModel.looptime,callback:function(t){e.$set(e.formModel,"looptime",t)},expression:"formModel.looptime"}})],1):e._e(),r("FormItem",{staticStyle:{"margin-bottom":"5px"}},[r("Button",{staticStyle:{float:"right","margin-left":"8px"},attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formx")}}},[e._v("Submit")]),r("Button",{staticStyle:{float:"right"},on:{click:function(t){return e.handleReset("formx")}}},[e._v("Reset")])],1)],1)],1)},_=[],g=(r("c5f6"),r("7cdf"),{name:"waterfall-conf-form",props:{allRequestType:{type:Array,default:function(){return[]}},formModel:{type:Object,default:function(){return{requesttype:0,concurrent_number:0,minimumcaches:0,enableloop:!1,looptime:0}}},formShow:{type:Boolean,default:!1}},data:function(){var e=this,t=function(e,t,r){if(!t)return r(new Error("Cannot be empty"));Number.isInteger(t)?t<=0?r(new Error("Must be over 0")):r():r(new Error("Please enter an integer"))},r=function(t,r,o){!0===e.formModel.enableloop?r?Number.isInteger(r)?r<=0?o(new Error("Must be over 0")):o():o(new Error("Please enter an integer")):o(new Error("Cannot be empty")):o()};return{headerIcon:"md-settings",headerName:"Edit waterfall config",ruleValidate:{requesttype:[{required:!0,message:"Please select the request type",trigger:"change"}],concurrent_number:[{required:!0,validator:t,trigger:"blur"}],minimumcaches:[{required:!0,validator:t,trigger:"blur"}],looptime:[{required:!0,validator:r,trigger:"blur"}]}}},computed:{displayLoopTime:function(){return"true"===this.formModel.enableloop||!0===this.formModel.enableloop}},methods:{handleSubmit:function(e){var t=this;this.$refs[e].validate((function(e){e&&t.$emit("on-submit",t.formModel)}))},handleReset:function(e){this.$refs[e].resetFields(),this.formModel.enableloop=!1}}}),w=g,y=Object(p["a"])(w,h,_,!1,null,null,null),k=y.exports,b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{overflow:"hidden"}},[r("div",{staticStyle:{"border-bottom":"1px solid #e8eaec","padding-top":"1px","padding-right":"16px","padding-bottom":"14px","padding-left":"16px","line-height":"1","margin-bottom":"16px","font-size":"14px"},attrs:{slot:"header"},slot:"header"},[r("Icon",{attrs:{type:e.headerIcon,size:18}}),r("b",[e._v(" "+e._s(e.headerName))])],1),r("div",{staticStyle:{"max-height":"550px","overflow-x":"hidden"}},[r("H4",[e._v("Bidding")]),r("transition-group",e._l(e.insideBiddingOrderList,(function(t,o){return r("div",{key:o,staticClass:"item"},[e.currBiddingFormIndex===o?r("Form",{ref:"BiddingorderForm"+o,refInFor:!0,attrs:{model:e.formModelBidding,rules:e.ruleValidate,inline:""}},[r("FormItem",[r("Badge",{attrs:{count:o+1,"class-name":"my-badge-margin"}})],1),r("FormItem",{attrs:{prop:"network_ad_id"}},[r("Select",{attrs:{filterable:"","allow-create":"",placeholder:"Select network ad"},on:{"on-change":e.networkAdChangeBidding},model:{value:e.formModelBidding.network_ad_id,callback:function(t){e.$set(e.formModelBidding,"network_ad_id",t)},expression:"formModelBidding.network_ad_id"}},e._l(e.canSelectNetworkAd,(function(t,o){return r("Option",{key:o,attrs:{value:t.network_ad_id}},[e._v(e._s(t.network_name+" => "+t.custom_ad_name))])})),1)],1),r("FormItem",[r("Icon",{attrs:{type:"md-checkmark",size:"18",color:"#00FF00"},on:{click:function(t){return e.handleSaveBidding("orderForm",o)}}}),r("Icon",{attrs:{type:"md-close",size:"18",color:"#FF0000"},on:{click:function(t){return e.handleCancelBidding("orderForm",o)}}})],1)],1):r("div",{staticClass:"form-item-line"},[r("Badge",{attrs:{count:o+1,"class-name":"my-badge-bg"}}),r("span",{staticClass:"myspanborder"},[e._v(e._s(t.network_name))]),r("span",{staticClass:"myspanborder"},[e._v(e._s(t.network_ad_name))]),r("Icon",{staticStyle:{float:"right"},attrs:{type:"md-create",size:"18",color:"#CC66FF"},on:{click:function(t){return e.handleEditBidding(o)}}}),r("Icon",{staticStyle:{float:"right"},attrs:{type:"md-close",size:"18",color:"#FF0000"},on:{click:function(t){return e.handleDeleteBidding(o)}}})],1)],1)})),0),r("Button",{staticStyle:{"margin-left":"0.3rem"},attrs:{type:"primary",icon:"ios-add"},on:{click:e.handleAddBidding}},[e._v("Add Order")]),r("Divider",{staticStyle:{margin:"10px"}}),r("H4",[e._v("Waterfall")]),r("vuedraggable",{staticClass:"wrapper",attrs:{disabled:!e.currEnabled},model:{value:e.insideOrderList,callback:function(t){e.insideOrderList=t},expression:"insideOrderList"}},[r("transition-group",e._l(e.insideOrderList,(function(t,o){return r("div",{key:o,staticClass:"item"},[e.currFormIndex===o?r("Form",{ref:"orderForm"+o,refInFor:!0,attrs:{model:e.formModel,rules:e.ruleValidate,inline:""}},[r("FormItem",[r("Badge",{attrs:{count:o+1,"class-name":"my-badge-margin"}})],1),r("FormItem",{attrs:{prop:"network_ad_id"}},[r("Select",{attrs:{filterable:"","allow-create":"",placeholder:"Select network ad"},on:{"on-change":e.networkAdChange},model:{value:e.formModel.network_ad_id,callback:function(t){e.$set(e.formModel,"network_ad_id",t)},expression:"formModel.network_ad_id"}},e._l(e.canSelectNetworkAd,(function(t,o){return r("Option",{key:o,attrs:{value:t.network_ad_id}},[e._v(e._s(t.network_name+" => "+t.custom_ad_name))])})),1)],1),r("FormItem",{attrs:{prop:"price_tag"}},[r("Input",{staticStyle:{width:"6rem"},attrs:{placeholder:"Enter price tag"},model:{value:e.formModel.price_tag,callback:function(t){e.$set(e.formModel,"price_tag",t)},expression:"formModel.price_tag"}})],1),r("FormItem",[r("Icon",{attrs:{type:"md-checkmark",size:"18",color:"#00FF00"},on:{click:function(t){return e.handleSave("orderForm",o)}}}),r("Icon",{attrs:{type:"md-close",size:"18",color:"#FF0000"},on:{click:function(t){return e.handleCancel("orderForm",o)}}})],1)],1):r("div",{staticClass:"form-item-line"},[r("Badge",{attrs:{count:o+1,"class-name":"my-badge-bg"}}),r("span",{staticClass:"myspanborder"},[e._v(e._s(t.network_name))]),r("span",{staticClass:"myspanborder"},[e._v(e._s(t.network_ad_name))]),r("span",{staticClass:"myspanborder"},[e._v(e._s(t.price_tag))]),r("Icon",{staticStyle:{float:"right"},attrs:{type:"md-create",size:"18",color:"#CC66FF"},on:{click:function(t){return e.handleEdit(o)}}}),r("Icon",{staticStyle:{float:"right"},attrs:{type:"md-close",size:"18",color:"#FF0000"},on:{click:function(t){return e.handleDelete(o)}}})],1)],1)})),0)],1),r("Button",{staticStyle:{"margin-left":"0.3rem"},attrs:{type:"primary",icon:"ios-add"},on:{click:e.handleAdd}},[e._v("Add Order")]),r("Button",{staticStyle:{"margin-left":"0.3rem"},attrs:{type:"warning",icon:"md-reorder",disabled:!e.currEnabled},on:{click:e.handleSort}},[e._v("Sort by price(desc)")]),r("Divider",{staticStyle:{margin:"10px"}}),r("H4",[e._v("Auto")]),r("vuedraggable",{staticClass:"wrapper",attrs:{disabled:!e.currEnabled},model:{value:e.insideAutoOrderList,callback:function(t){e.insideAutoOrderList=t},expression:"insideAutoOrderList"}},[r("transition-group",e._l(e.insideAutoOrderList,(function(t,o){return r("div",{key:o,staticClass:"item"},[e.currAutoFormIndex===o?r("Form",{ref:"AutoorderForm"+o,refInFor:!0,attrs:{model:e.formModelAuto,rules:e.ruleValidate,inline:""}},[r("FormItem",[r("Badge",{attrs:{count:o+1,"class-name":"my-badge-margin"}})],1),r("FormItem",{attrs:{prop:"network_ad_id"}},[r("Select",{attrs:{filterable:"","allow-create":"",placeholder:"Select network ad"},on:{"on-change":e.networkAdChangeAuto},model:{value:e.formModelAuto.network_ad_id,callback:function(t){e.$set(e.formModelAuto,"network_ad_id",t)},expression:"formModelAuto.network_ad_id"}},e._l(e.canSelectNetworkAd,(function(t,o){return r("Option",{key:o,attrs:{value:t.network_ad_id}},[e._v(e._s(t.network_name+" => "+t.custom_ad_name))])})),1)],1),r("FormItem",[r("Icon",{attrs:{type:"md-checkmark",size:"18",color:"#00FF00"},on:{click:function(t){return e.handleSaveAuto("orderForm",o)}}}),r("Icon",{attrs:{type:"md-close",size:"18",color:"#FF0000"},on:{click:function(t){return e.handleCancelAuto("orderForm",o)}}})],1)],1):r("div",{staticClass:"form-item-line"},[r("Badge",{attrs:{count:o+1,"class-name":"my-badge-bg"}}),r("span",{staticClass:"myspanborder"},[e._v(e._s(t.network_name))]),r("span",{staticClass:"myspanborder"},[e._v(e._s(t.network_ad_name))]),r("span",{staticClass:"myspanborder"},[e._v(e._s(t.price_tag))]),r("Icon",{staticStyle:{float:"right"},attrs:{type:"md-create",size:"18",color:"#CC66FF"},on:{click:function(t){return e.handleEditAuto(o)}}}),r("Icon",{staticStyle:{float:"right"},attrs:{type:"md-close",size:"18",color:"#FF0000"},on:{click:function(t){return e.handleDeleteAuto(o)}}})],1)],1)})),0)],1),r("Button",{staticStyle:{"margin-left":"0.3rem"},attrs:{type:"primary",icon:"ios-add"},on:{click:e.handleAddAuto}},[e._v("Add Order")])],1),r("Divider",{staticStyle:{margin:"10px"}}),r("Button",{staticStyle:{float:"right"},attrs:{type:"success",icon:"ios-checkmark"},on:{click:e.handleListSave}},[e._v("Save List")])],1)},v=[],A=r("53ca"),M=(r("20d6"),r("55dd"),r("b76a")),O=r.n(M),S={name:"waterfall-orders",components:{vuedraggable:O.a},props:{allNetworkAd:{type:Array,default:function(){return[]}},allNetwork:{type:Array,default:function(){return[]}},orderList:{type:Array,default:function(){return[]}},autoOrderList:{type:Array,default:function(){return[]}},biddingOrderList:{type:Array,default:function(){return[]}},countryGroupId:{type:String,default:""},allCountryGroup:{type:Array,default:function(){return[]}},ordersAppId:{type:String,default:""},ordersAdType:{type:String,default:""},formShow:{type:Boolean,default:!1}},data:function(){return{currEnabled:!0,headerIcon:"ios-list",headerName:"Edit order list",currFormIndex:-1,cacheFormModel:null,insideOrderList:[],canAdd:!0,canSelectNetworkAd:[],formModel:{network_name:"",network_ad_id:"",network_ad_name:"",price_tag:"",is_new:!1},ruleValidate:{network_ad_id:[{required:!0,message:"Please select network ad",trigger:"change"}],price_tag:[{required:!0,message:"The price tag cannot be empty",trigger:"blur"}]},currAutoFormIndex:-1,insideAutoOrderList:[],formModelAuto:{network_name:"",network_ad_id:"",network_ad_name:"",price_tag:"",is_new:!1},currBiddingFormIndex:-1,insideBiddingOrderList:[],formModelBidding:{network_name:"",network_ad_id:"",network_ad_name:"",is_new:!1}}},methods:{networkAdChange:function(e){if(this.allNetworkAd&&this.allNetworkAd.length>0)for(var t=0;t<this.allNetworkAd.length;t++)if(e===this.allNetworkAd[t].network_ad_id){this.formModel.network_name=this.allNetworkAd[t].network_name,this.formModel.network_ad_name=this.allNetworkAd[t].custom_ad_name;break}},handleSort:function(){var e=this;this.$Modal.confirm({title:"warning",content:"Are you sure descending order by price?",onOk:function(){e.insideOrderList.sort((function(e,t){return isNaN(e.price_tag)?1:isNaN(t.price_tag)?-1:t.price_tag-e.price_tag}))},onCancel:function(){}})},handleAdd:function(){var e=this;!0===this.canAdd&&(this.formModel={network_name:"",network_ad_id:"",network_ad_name:"",price_tag:"",is_new:!0},this.canSelectNetworkAd=this.allNetworkAd.filter((function(t){return!e.disableNetworkAd(t,"waterfall")})),this.insideOrderList.push(this.formModel),this.currEnabled=!1,this.currFormIndex=this.insideOrderList.length-1,this.canAdd=!1)},handleEdit:function(e){var t=this;this.canSelectNetworkAd=this.allNetworkAd.filter((function(r){return r.network_ad_id===t.insideOrderList[e].network_ad_id||!t.disableNetworkAd(r,"waterfall")})),this.formModel=this.insideOrderList[e],this.cacheFormModel=Object.assign({},this.formModel),this.insideOrderList.push({}),this.insideOrderList.pop(),this.currFormIndex=e,this.currEnabled=!1},handleSave:function(e,t){var r=this;if(null!==this.formModel.network_ad_id&&""!==this.formModel.network_ad_id)if(null===this.formModel.price_tag||""===this.formModel.price_tag||isNaN(this.formModel.price_tag))this.$Modal.error({title:"Error",content:"price can not be empty!"});else{var o=this.allNetworkAd.filter((function(e){return e.network_ad_id===r.formModel.network_ad_id}))[0].custom_ad_name;this.insideOrderList[t]=this.formModel,this.insideOrderList[t].network_ad_name=o,this.currFormIndex=-1,this.currEnabled=!0,this.canAdd=!0}else this.$Modal.error({title:"Error",content:"You have no selection network ad!"})},handleCancel:function(e,t){this.formModel.is_new?this.insideOrderList.splice(t,1):this.insideOrderList[t]=this.cacheFormModel,this.currFormIndex=-1,this.currEnabled=!0,this.canAdd=!0},handleDelete:function(e){this.insideOrderList.splice(e,1),this.currFormIndex>e&&(this.currFormIndex=this.currFormIndex-1)},networkAdChangeAuto:function(e){if(this.allNetworkAd&&this.allNetworkAd.length>0)for(var t=0;t<this.allNetworkAd.length;t++)if(e===this.allNetworkAd[t].network_ad_id){this.formModelAuto.network_name=this.allNetworkAd[t].network_name,this.formModelAuto.network_ad_name=this.allNetworkAd[t].custom_ad_name;break}},handleAddAuto:function(){var e=this;!0===this.canAdd&&(this.formModelAuto={network_name:"",network_ad_id:"",network_ad_name:"",price_tag:"auto",is_new:!0},this.canSelectNetworkAd=this.allNetworkAd.filter((function(t){return!e.disableNetworkAd(t,"waterfall")})),this.insideAutoOrderList.push(this.formModelAuto),this.currEnabled=!1,this.currAutoFormIndex=this.insideAutoOrderList.length-1,this.canAdd=!1)},handleEditAuto:function(e){var t=this;this.canSelectNetworkAd=this.allNetworkAd.filter((function(r){return r.network_ad_id===t.insideAutoOrderList[e].network_ad_id||!t.disableNetworkAd(r,"waterfall")})),this.formModelAuto=this.insideAutoOrderList[e],this.cacheFormModel=Object.assign({},this.formModelAuto),this.insideAutoOrderList.push({}),this.insideAutoOrderList.pop(),this.currAutoFormIndex=e,this.currEnabled=!1},handleSaveAuto:function(e,t){var r=this;if(null!==this.formModelAuto.network_ad_id&&""!==this.formModelAuto.network_ad_id){var o=this.allNetworkAd.filter((function(e){return e.network_ad_id===r.formModelAuto.network_ad_id}))[0].custom_ad_name;this.insideAutoOrderList[t]=this.formModelAuto,this.insideAutoOrderList[t].network_ad_name=o,this.currAutoFormIndex=-1,this.currEnabled=!0,this.canAdd=!0}else this.$Modal.error({title:"Error",content:"You have no selection network ad!"})},handleCancelAuto:function(e,t){this.formModelAuto.is_new?this.insideAutoOrderList.splice(t,1):this.insideAutoOrderList[t]=this.cacheFormModel,this.currAutoFormIndex=-1,this.currEnabled=!0,this.canAdd=!0},handleDeleteAuto:function(e){this.insideAutoOrderList.splice(e,1),this.currAutoFormIndex>e&&(this.currAutoFormIndex=this.currAutoFormIndex-1)},networkAdChangeBidding:function(e){if(this.allNetworkAd&&this.allNetworkAd.length>0)for(var t=0;t<this.allNetworkAd.length;t++)if(e===this.allNetworkAd[t].network_ad_id){this.formModelBidding.network_name=this.allNetworkAd[t].network_name,this.formModelBidding.network_ad_name=this.allNetworkAd[t].custom_ad_name;break}},handleAddBidding:function(){var e=this;!0===this.canAdd&&(this.formModelBidding={network_name:"",network_ad_id:"",network_ad_name:"",is_new:!0},this.canSelectNetworkAd=this.allNetworkAd.filter((function(t){return!e.disableNetworkAd(t,"bidding")})),this.insideBiddingOrderList.push(this.formModelBidding),this.currEnabled=!1,this.currBiddingFormIndex=this.insideBiddingOrderList.length-1,this.canAdd=!1)},handleEditBidding:function(e){var t=this;this.canSelectNetworkAd=this.allNetworkAd.filter((function(r){return r.network_ad_id===t.insideBiddingOrderList[e].network_ad_id||!t.disableNetworkAd(r,"bidding")})),this.formModelBidding=this.insideBiddingOrderList[e],this.cacheFormModel=Object.assign({},this.formModelBidding),this.insideBiddingOrderList.push({}),this.insideBiddingOrderList.pop(),this.currBiddingFormIndex=e,this.currEnabled=!1},handleSaveBidding:function(e,t){var r=this;if(null!==this.formModelBidding.network_ad_id&&""!==this.formModelBidding.network_ad_id){var o=this.allNetworkAd.filter((function(e){return e.network_ad_id===r.formModelBidding.network_ad_id}))[0].custom_ad_name;this.insideBiddingOrderList[t]=this.formModelBidding,this.insideBiddingOrderList[t].network_ad_name=o,this.currBiddingFormIndex=-1,this.currEnabled=!0,this.canAdd=!0}else this.$Modal.error({title:"Error",content:"You have no selection network ad!"})},handleCancelBidding:function(e,t){this.formModelBidding.is_new?this.insideBiddingOrderList.splice(t,1):this.insideBiddingOrderList[t]=this.cacheFormModel,this.currBiddingFormIndex=-1,this.currEnabled=!0,this.canAdd=!0},handleDeleteBidding:function(e){this.insideBiddingOrderList.splice(e,1),this.currBiddingFormIndex>e&&(this.currBiddingFormIndex=this.currBiddingFormIndex-1)},handleListSave:function(){for(var e=0;e<this.insideOrderList.length;e++)if(""===this.insideOrderList[e].price_tag||isNaN(this.insideOrderList[e].price_tag))return void this.$Modal.error({title:"Error",content:"price can not be empty!"});this.$emit("on-orders-save",this.insideOrderList,this.insideAutoOrderList,this.insideBiddingOrderList)},disableNetworkAd:function(e,t){var r=this;if(!1===e.state)return!0;var o=this.allNetwork.filter((function(t){return t.name===e.network_name}));if(0===o.length)return!0;if(o[0].type!==t)return!0;var n=new Set;this.insideOrderList&&this.insideOrderList.length>0&&this.insideOrderList.forEach((function(e,t){n.add(e.network_ad_id)})),this.insideAutoOrderList&&this.insideAutoOrderList.length>0&&this.insideAutoOrderList.forEach((function(e,t){n.add(e.network_ad_id)})),this.insideBiddingOrderList&&this.insideBiddingOrderList.length>0&&this.insideBiddingOrderList.forEach((function(e,t){n.add(e.network_ad_id)}));var a=n.has(e.network_ad_id);if(!0===a)return a;if(e.app_id!==this.ordersAppId||e.ad_type!==this.ordersAdType)return!0;if(e.country_grouplist.findIndex((function(e){return e===r.countryGroupId}))>=0)return!1;for(var i=function(t){var o=r.allCountryGroup.findIndex((function(r){return r.country_group_id===e.country_grouplist[t]}));if(o>=0&&r.allCountryGroup[o].country_group.findIndex((function(e){return"default"===e}))>=0)return{v:!1}},l=0;l<e.country_grouplist.length;++l){var d=i(l);if("object"===Object(A["a"])(d))return d.v}return!0},clearData:function(){this.cacheFormModel=null,this.insideOrderList=[],this.canAdd=!0},clearAutoData:function(){this.cacheFormModel=null,this.insideAutoOrderList=[],this.canAdd=!0},clearBiddingData:function(){this.cacheFormModel=null,this.insideBiddingOrderList=[],this.canAdd=!0}},watch:{orderList:{deep:!0,handler:function(e,t){this.clearData();var r=JSON.stringify(e);this.insideOrderList=JSON.parse(r)}},autoOrderList:{deep:!0,handler:function(e,t){this.clearAutoData();var r=JSON.stringify(e);this.insideAutoOrderList=JSON.parse(r)}},biddingOrderList:{deep:!0,handler:function(e,t){this.clearBiddingData();var r=JSON.stringify(e);this.insideBiddingOrderList=JSON.parse(r)}},formShow:function(e,t){!0===e&&(this.currFormIndex=-1,this.currAutoFormIndex=-1,this.currBiddingFormIndex=-1,this.currEnabled=!0,this.canAdd=!0)}}},F=S,C=(r("d44d"),Object(p["a"])(F,b,v,!1,null,null,null)),x=C.exports,D=r("2f62");function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){Object(a["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var N={name:"placement-group",components:{FruitConsoleTables:i["a"],DragDrawer:l["a"],WaterfallForm:m,WaterfallConfForm:k,WaterfallOrders:x},data:function(){return{initData:!1,topAdd:!0,rowEvent:{name:"",waterfall_id:""},waterfall:{},waterfallConf:{},orderList:[],autoOrderList:[],biddingOrderList:[],waterfallDragDrawer:!1,waterfallConfDragDrawer:!1,waterfallOrdersDragDrawer:!1,remotePlacementGroup:[],remoteCountryGroup:[],columns:[{title:"序号",key:"id",width:60,render:function(e,t){var r=t?t.index+1:"-";return e("div",r)}},{title:"App-Name",key:"app_name",searchable:!0,isSelect:!0},{title:"Ad-Type",key:"ad_type",searchable:!0,isSelect:!0},{title:"Placement-Group-Name",key:"placement_group_name",searchable:!0,width:180,render:function(e,t){return e("Button",{props:{type:"text"}},[e("Icon",{props:{type:"md-pin",size:16,color:"#FF0000"}}),e("span",t.row.placement_group_name)])}},{title:"Country-Group-Name",key:"country_group_name",width:180,searchable:!0,render:function(e,t){return e("Button",{props:{type:"text"}},[e("Icon",{props:{type:"md-flag",size:16,color:"#FF0000"}}),e("span",t.row.country_group_name)])}},{title:"Last-updated-date",key:"last_updated_date",width:160},{title:"Operator",key:"operator"},{title:"Handle",key:"handle",options:["edit","delete"],button:[function(e,t,r){return e("Icon",{props:{type:"md-settings",size:32,color:"#9999FF"},on:{click:function(){r.$emit("on-conf",t)}}})},function(e,t,r){return e("Icon",{props:{type:"ios-list",size:32,color:"#339933"},on:{click:function(){r.$emit("on-list",t)}}})}]}],width1:350,width2:450,placement:!1,draggable:!0,ordersappid:"",ordersadtype:"",ordercountrygroupid:"",selectedRows:[],canSelectApp:[],canSelectAdType:[],showDownload:!1,downloadApp:"",loading:!0}},methods:I(I({},Object(D["b"])(["getAllNetworkAdType","getAllRequestType","getAllApp","getAllNetworkAd","getAllNetwork","getAllPlacementGroup","getAllCountryGroup","postWaterfall","putWaterfall","deleteWaterfall","batchDeleteWaterfall","getWaterfallOrders","getWaterfallAutoOrders","getWaterfallBiddingOrders","setWaterfallOrders","setWaterfallAutoOrders","setWaterfallBiddingOrders","setAllWaterfall","getAllWaterfall","getSdkFileUrl"])),{},{handleAdd:function(){this.rowEvent={name:"addwaterfall",waterfall_id:""}},handleEdit:function(e){this.rowEvent={name:"waterfall",waterfall_id:e.row.waterfall_id}},handleDelete:function(e){var t=this;this.deleteWaterfall(e.row).then((function(e){t.$Message.success("Delete Success!")})).catch((function(e){t.$Modal.error({title:"Error",content:e})}))},handleDownload:function(){this.downloadApp="",this.showDownload=!0},onDownload:function(){var e=this;""!==this.downloadApp?(this.showDownload=!1,this.loading=!0,this.getSdkFileUrl(this.downloadApp).then((function(t){e.loading=!1;var r=document.createElement("a");r.href=t.url,r.click()})).catch((function(t){e.loading=!1,e.$Modal.error({title:"Error",content:t})}))):this.$message.error("请选择app")},handleSelectionChange:function(e){this.selectedRows=e},handleBatchDelete:function(){var e=this;if(this.selectedRows.length>0){var t=this;this.$Modal.confirm({title:"warning",content:"Are you sure to delete the selected?",onOk:function(){t.batchDeleteWaterfall(e.selectedRows).then((function(e){t.$Message.success("Batch delete Success!")})).catch((function(e){t.$Message.error(e)}))},onCancel:function(){}})}else this.$Modal.info({title:"Info",content:"You have not chosen"})},handleConf:function(e){this.rowEvent={name:"waterfallConf",waterfall_id:e.row.waterfall_id}},handleOrderList:function(e){this.rowEvent={name:"waterfallOrders",waterfall_id:e.row.waterfall_id},this.ordersappid=e.row.app_id,this.ordersadtype=e.row.ad_type,this.ordercountrygroupid=e.row.country_group_id},submitWaterfall:function(e){var t=this;if("addwaterfall"===this.rowEvent.name){var r=Object.assign({},e,{app_version_group_id:"none",requesttype:0,concurrent_number:0,looptime:0,enableloop:!1,minimumcaches:0});this.postWaterfall(r).then((function(e){t.hideForms(),t.$Message.success("Add Success!")})).catch((function(e){t.$Modal.error({title:"Error",content:e})}))}else if("waterfall"===this.rowEvent.name){var o=this.getWaterfall(this.rowEvent.waterfall_id),n=Object.assign({},e,{waterfall_id:o.waterfall_id,requesttype:o.requesttype?o.requesttype:0,concurrent_number:o.concurrent_number?o.concurrent_number:0,looptime:o.looptime?o.looptime:0,enableloop:o.enableloop,minimumcaches:o.minimumcaches?o.minimumcaches:0});this.putWaterfall(n).then((function(e){t.hideForms(),t.$Message.success("Update Success!")})).catch((function(e){t.$Modal.error({title:"Error",content:e})}))}},submitWaterfallConfig:function(e){var t=this,r=this.getWaterfall(this.rowEvent.waterfall_id),o=Object.assign({},e,{app_id:r.app_id,ad_type:r.ad_type,placement_group_id:r.placement_group_id,country_group_id:r.country_group_id,app_version_group_id:"none",waterfall_id:r.waterfall_id});this.putWaterfall(o).then((function(e){t.hideForms(),t.$Message.success("Save waterfall config Success!")})).catch((function(e){t.$Modal.error({title:"Error",content:e})}))},saveOrders:function(e,t,r){var o=this;this.setWaterfallOrders({waterfall_id:this.rowEvent.waterfall_id,orderList:e,autoOrderList:t,biddingOrderList:r}).then((function(e){o.hideForms(),o.$Message.success("Save order list success!")})).catch((function(e){o.$Modal.error({title:"Error",content:e})}))},getWaterfall:function(e){return this.allWaterfall.filter((function(t){return t.waterfall_id===e}))[0]},showWaterfall:function(){this.waterfallConfDragDrawer=!1,this.waterfallOrdersDragDrawer=!1,this.waterfallDragDrawer=!0},showWaterfallConfig:function(){this.waterfallDragDrawer=!1,this.waterfallOrdersDragDrawer=!1,this.waterfallConfDragDrawer=!0},showWaterfallOrders:function(){this.waterfallDragDrawer=!1,this.waterfallConfDragDrawer=!1,this.waterfallOrdersDragDrawer=!0},hideForms:function(){this.waterfallDragDrawer=!1,this.waterfallConfDragDrawer=!1,this.waterfallOrdersDragDrawer=!1},setWaterfallFormRemoteData:function(){this.remotePlacementGroup=[].concat(this.allPlacementGroup),this.remoteCountryGroup=[].concat(this.allCountryGroup)}}),computed:I({placementComputed:function(){return this.placement?"left":"right"}},Object(D["d"])({allApp:function(e){return e.app_setting.allApp},allAdType:function(e){return e.network_ad_type.allNetworkAdType},allRequestType:function(e){return e.request_type.allRequestType},allNetworkAd:function(e){return e.network_ad.allNetworkAd},allNetwork:function(e){return e.network_name.allNetwork},allCountryGroup:function(e){return e.country_group.allCountryGroup},allPlacementGroup:function(e){return e.placement_group.allPlacementGroup},allWaterfall:function(e){var t=this;if(!0===this.initData)return e.waterfall.allWaterfall.map((function(r){r.app_name=e.app_setting.allApp.filter((function(e){return e.app_id===r.app_id}))[0].app_name,r.placement_group_name="none";var o=t.allPlacementGroup.filter((function(e){return e.placement_group_id===r.placement_group_id}));o.length>0&&(r.placement_group_name=o[0].placement_group_name),r.country_group_name="none";var n=t.allCountryGroup.filter((function(e){return e.country_group_id===r.country_group_id}));return n.length>0&&(r.country_group_name=n[0].country_group_name),r.state=!0,r.last_updated_date=r.updated_at.split(".")[0],r}))}})),watch:{rowEvent:{deep:!0,handler:function(e,t){var r=this;if("addwaterfall"===e.name)this.waterfall={app_id:"",ad_type:"",placement_group_id:"",country_group_id:""},this.setWaterfallFormRemoteData(),this.showWaterfall();else if("waterfall"===e.name){var o=this.getWaterfall(e.waterfall_id);this.waterfall={app_id:o.app_id,ad_type:o.ad_type,placement_group_id:o.placement_group_id,country_group_id:o.country_group_id},this.setWaterfallFormRemoteData(),this.showWaterfall()}else if("waterfallConf"===e.name){var n=this.getWaterfall(e.waterfall_id);this.waterfallConf={requesttype:n.requesttype+"",concurrent_number:n.concurrent_number,minimumcaches:n.minimumcaches,enableloop:n.enableloop,looptime:n.looptime},this.showWaterfallConfig()}else"waterfallOrders"===e.name&&this.getWaterfallOrders({waterfall_id:e.waterfall_id}).then((function(e){if(e.order_list&&e.order_list.length>0)for(var t=function(t){var o=r.allNetworkAd.filter((function(r){return r.network_ad_id===e.order_list[t].network_ad_id}))[0];e.order_list[t].network_name=o.network_name,e.order_list[t].network_ad_name=o.custom_ad_name},o=0;o<e.order_list.length;o++)t(o);if(r.orderList=e.order_list,e.auto_list&&e.auto_list.length>0)for(var n=function(t){var o=r.allNetworkAd.filter((function(r){return r.network_ad_id===e.auto_list[t].network_ad_id}))[0];e.auto_list[t].network_name=o.network_name,e.auto_list[t].network_ad_name=o.custom_ad_name},a=0;a<e.auto_list.length;a++)n(a);if(r.autoOrderList=e.auto_list,e.bidding_list&&e.bidding_list.length>0)for(var i=function(t){var o=r.allNetworkAd.filter((function(r){return r.network_ad_id===e.bidding_list[t].network_ad_id}))[0];e.bidding_list[t].network_name=o.network_name,e.bidding_list[t].network_ad_name=o.custom_ad_name},l=0;l<e.bidding_list.length;l++)i(l);r.biddingOrderList=e.bidding_list,r.showWaterfallOrders()})).catch((function(e){r.$Modal.error({title:"Error",content:e})}))}}},mounted:function(){var e=this;this.getAllApp().then((function(t){var r=t;e.canSelectApp=r.map((function(e){return e.app_name})),Promise.all([e.getAllNetworkAdType(),e.getAllRequestType(),e.getAllCountryGroup(r),e.getAllPlacementGroup(r),e.getAllNetworkAd({apps:r}),e.getAllWaterfall(),e.getAllNetwork()]).then((function(t){e.canSelectAdType=t[0],e.initData=!0,e.loading=!1}))}))}},B=N,E=Object(p["a"])(B,o,n,!1,null,null,null);t["default"]=E.exports},"7cdf":function(e,t,r){var o=r("5ca1");o(o.S,"Number",{isInteger:r("9c12")})},"9c12":function(e,t,r){var o=r("d3f4"),n=Math.floor;e.exports=function(e){return!o(e)&&isFinite(e)&&n(e)===e}},d44d:function(e,t,r){"use strict";r("fa78")},fa78:function(e,t,r){}}]);