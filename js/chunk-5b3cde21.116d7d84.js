(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b3cde21"],{1357:function(t,e,i){},3334:function(t,e,i){"use strict";i("a112")},"87dc":function(t,e,i){"use strict";i("96db")},"8a8d":function(t,e,i){"use strict";i("9205")},"8dc2":function(t,e,i){},9205:function(t,e,i){},"96db":function(t,e,i){},a112:function(t,e,i){},bdcb:function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Row",{directives:[{name:"show",rawName:"v-show",value:t.haveDimension,expression:"haveDimension"}],staticStyle:{"margin-bottom":"5px"}},[i("Col",{attrs:{span:"21"}},[i("table-dimensions",{ref:"childTableDimensions",attrs:{dimensions:t.dimensions,"default-metrics":t.metrics,"default-dimensions":t.defaultDimensions,"all-dimensions":t.allDimensions,"curr-all-dimensions":t.currAllDimensions,"all-metrics":t.allMetrics,"show-days":t.showDays,loading:t.tableLoading,"show-multi-sort":t.showMultiSort,"tmp-tag":t.tmpTag,"curr-cohort":t.currCohort,"page-rooter":t.pageRooter},on:{"metrics-ok":t.metricsOk,"on-table-refresh":t.handleRefresh,"on-dimensions-change":t.handleDimensionsChange,"on-set-dimensions":t.handleSetDimensions,"on-select-day-change":t.handleSelectDayChange,"on-multi-sort-change":t.handleMultiSortChange}})],1),i("Col",{attrs:{span:"3"}},[i("table-download",{staticStyle:{float:"right"},attrs:{"all-dimensions":t.allDimensions,"all-calculation-method":t.allCalculationMethod,"all-metrics":t.allMetrics,"sync-dimensions":t.syncDimensions,"sync-metrics":t.syncMetrics,"all-cohorts":t.allCohorts,"all-special-cohorts":t.allSpecialCohorts,"curr-cohort":t.currCohort,"calculate-by":t.calculateBy,"curr-calculate-type":t.currCalculateType,"curr-cohort-type":t.currCohortType,loading:t.tableLoading,"no-download-modal":t.noDownloadModal,"tmp-tag":t.tmpTag,pageAeoTag:t.pageAeo,"page-rooter":t.pageRooter,"tab-select-day":t.tabSelectDay},on:{"on-download":t.download}})],1)],1),t.showTable?i("div",{directives:[{name:"show",rawName:"v-show",value:t.tableData.length>0||t.tableLoading,expression:"tableData.length > 0 || tableLoading"}]},[i("Row",[i("Table",{staticClass:"topTable",attrs:{data:t.tableData,columns:t.tableColumnsData,loading:t.tableLoading,border:"",height:t.tableHeight},on:{"on-column-width-resize":t.handleColumnWidthResize,"on-sort-change":t.handleSortChange}}),i("Table",{directives:[{name:"show",rawName:"v-show",value:t.haveTotal,expression:"haveTotal"}],staticClass:"summeryTable",attrs:{data:t.tableDataFun(),columns:t.totalColumnsData,loading:t.tableLoading,border:"","show-header":!1,height:"58","span-method":t.handleSpan},on:{"on-sort-change":t.handleSortChange}})],1),i("Row",{staticStyle:{"text-align":"center"}},[i("Page",{ref:"tablePages",attrs:{"page-size":t.pageData.page_size,total:t.pageData.total_num,current:1,"page-size-opts":t.pageSizeOpts,"show-sizer":"","show-total":"","show-elevator":""},on:{"on-change":t.pageChange,"on-page-size-change":t.pageSizeChange}})],1)],1):t._e(),t.showTable?i("div",{directives:[{name:"show",rawName:"v-show",value:t.tableData.length<=0&&!t.tableLoading,expression:"tableData.length <= 0 && !tableLoading"}],staticStyle:{"text-align":"center",height:"300px"}},["eventFunnelActivity"==t.pageRooter?i("span",{staticStyle:{"font-size":"15px"}},[t._v("暂无记录")]):i("span",{staticStyle:{"font-size":"15px"}},[t._v("暂无数据")])]):t._e()],1)},o=[],n=(i("ac4d"),i("8a81"),i("5df3"),i("1c4c"),i("7f7f"),i("6b54"),i("20d6"),i("ac6a"),i("2909")),s=(i("c5f6"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("a-select",{staticClass:"inline-width",attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"","max-tag-count":1,placeholder:t.placeholder[0],optionFilterProp:"children"},on:{change:t.handleDimensionsChange},model:{value:t.dimensions,callback:function(e){t.dimensions=e},expression:"dimensions"}},t._l(t.selectAllDimensions,(function(e,r){return i("Option",{key:r,attrs:{value:e.val,disabled:t.disabledFun(e)}},[t._v(t._s(e.label))])})),1),t._v(" \n  "),i("a-select",{staticClass:"inline-width",attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"","max-tag-count":1,placeholder:t.placeholder[1],optionFilterProp:"children"},on:{blur:t.handleMetricsClose},model:{value:t.metrics,callback:function(e){t.metrics=e},expression:"metrics"}},t._l(t.allMetrics,(function(e,r){return i("Option",{key:r,attrs:{value:e.val}},[t._v(t._s(e.label))])})),1),t._v(" \n  "),t.showDays?i("a-select",{staticStyle:{display:"inline-block",width:"110px"},attrs:{showArrow:""},on:{change:t.handleSelectDayChange},model:{value:t.selectDay,callback:function(e){t.selectDay=e},expression:"selectDay"}},t._l(t.daysOptions,(function(e,r){return i("Option",{key:r,attrs:{value:e.val}},[t._v(t._s(e.label))])})),1):t._e(),i("Modal",{attrs:{title:"排序",closable:!1,"footer-hide":!0,"mask-closable":!1,width:"620px"},model:{value:t.multiSortModal,callback:function(e){t.multiSortModal=e},expression:"multiSortModal"}},[i("Form",{ref:"formMultiSort",attrs:{model:t.formMultiSort,"label-width":70}},[t._l(t.formMultiSort.currMultiSort,(function(e,r){return i("div",{key:r,staticStyle:{"margin-bottom":"5px"}},[i("Row",{key:r},[i("Col",{attrs:{span:"15"}},[i("FormItem",{key:"field"+r,attrs:{label:"依据"+(r+1)+":",prop:"currMultiSort."+r+".field",rules:{required:!0,message:"参数名不能为空",trigger:"change"}}},[i("a-select",{staticClass:"inline-width",attrs:{filterable:"",showArrow:"","max-tag-count":1,placeholder:"Select field",optionFilterProp:"children"},on:{change:function(e){return t.handleSortChange()}},model:{value:e.field,callback:function(i){t.$set(e,"field",i)},expression:"sortItem.field"}},t._l(t.allSortField,(function(e,r){return i("Option",{key:r,attrs:{value:e.val,disabled:t.disabledSortField(e.val)}},[t._v(t._s(e.label))])})),1)],1)],1),i("Col",{attrs:{span:"9"}},[i("FormItem",{key:"value"+r,attrs:{label:"顺序:",prop:"currMultiSort."+r+".order"}},[i("a-select",{staticClass:"sort-width",attrs:{filterable:"",showArrow:"","max-tag-count":1,optionFilterProp:"children"},on:{change:function(e){return t.handleSortChange()}},model:{value:e.order,callback:function(i){t.$set(e,"order",i)},expression:"sortItem.order"}},[i("Option",{attrs:{value:"ascending"}},[t._v(t._s("升序"))]),i("Option",{attrs:{value:"descending"}},[t._v(t._s("降序"))])],1),i("Button",{attrs:{icon:"md-remove",type:"text"},on:{click:function(e){return t.handleRemoveSort(r)}}}),r+1===t.formMultiSort.currMultiSort.length?i("Button",{attrs:{icon:"md-add",type:"text"},on:{click:t.handleAddSort}}):t._e()],1)],1)],1)],1)})),0===t.formMultiSort.currMultiSort.length?i("Button",{staticStyle:{float:"right"},attrs:{icon:"md-add",type:"text"},on:{click:t.handleAddSort}}):t._e()],2),i("Divider"),i("div",{staticStyle:{height:"40px"}},[i("Button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.handleSortOk}},[t._v("确定")]),i("Button",{staticStyle:{float:"right"},attrs:{type:"text"},on:{click:t.handleCancelSort}},[t._v("取消")])],1)],1),t.showMultiSort?i("Button",{staticStyle:{"margin-left":"10px","margin-bottom":"3px"},attrs:{disabled:t.loading},on:{click:t.handleMultiSort}},[t._v(t._s(t.formMultiSort.currMultiSort.length>0?"排序("+t.formMultiSort.currMultiSort.length+")":"排序"))]):t._e(),i("Button",{staticStyle:{"margin-left":"10px","margin-bottom":"3px"},attrs:{disabled:t.loading,type:"primary"},on:{click:t.handleRefresh}},[t._v("刷新")])],1)}),a=[],l=i("9839"),c={name:"table-dimensions",components:{ASelect:l["d"],Option:l["d"].Option},props:{placeholder:{type:Array,default:function(){return["维度","指标"]}},allDimensions:{type:Array,default:function(){return[]}},currAllDimensions:{type:Array,default:function(){return[]}},defaultDimensions:{type:Array,default:function(){return[]}},allMetrics:{type:Array,default:function(){return[]}},tmpTag:{type:Boolean,default:function(){return!1}},currCohort:{type:String,default:function(){return null}},pageRooter:{type:String,default:function(){return null}},defaultMetrics:{type:Array,default:function(){return[]}},showDays:{type:Boolean,default:function(){return!1}},showMultiSort:{type:Boolean,default:function(){return!1}},loading:{type:Boolean,default:function(){return!1}}},data:function(){return{multiSortModal:!1,sortField:"",order:"ascending",formMultiSort:{currMultiSort:[]},dimensions:[],metrics:[],selectDay:30}},methods:{handleDimensionsChange:function(t){this.$emit("on-dimensions-change",t)},handleDimensionsClose:function(t){if(!1===t){var e=this.dimensions.filter((function(t){return"all"===t}));e.length>0&&(this.dimensions=[])}this.$emit("dimensions-ok",this.dimensions)},handleMetricsClose:function(t){var e=this.metrics.filter((function(t){return"all"===t}));e.length>0&&(this.metrics=[]),this.$emit("metrics-ok",this.metrics)},handleSelectDayChange:function(t){this.$emit("on-select-day-change",t)},handleRefresh:function(){this.$emit("on-multi-sort-change",this.formMultiSort.currMultiSort.filter((function(t){return 0!==t.field.length}))),this.tmpTag?this.dimensions&&this.dimensions.length>0?this.$emit("on-table-refresh",this.dimensions,this.metrics):this.$Message.error("Please choose at least one dimension"):this.$emit("on-table-refresh",this.dimensions,this.metrics,this.selectDay)},handleCancelSort:function(){this.formMultiSort.currMultiSort=this.formMultiSort.currMultiSort.filter((function(t){return 0!==t.field.length})),this.multiSortModal=!1},handleSortOk:function(){var t=this;this.$refs["formMultiSort"].validate((function(e){e&&(t.handleRefresh(),t.multiSortModal=!1)}))},handleMultiSort:function(){this.$refs["formMultiSort"].validate(),0===this.formMultiSort.currMultiSort.length&&this.formMultiSort.currMultiSort.push({field:[],order:"ascending"}),this.multiSortModal=!0},getData:function(){return this.showDays?{dimensions:this.dimensions,metrics:this.metrics,selectDay:this.selectDay}:{dimensions:this.dimensions,metrics:this.metrics}},setData:function(t){this.showDays?(this.dimensions=t.dimensions,this.metrics=t.metrics,this.selectDay=t.selectDay):(this.dimensions=t.dimensions,this.metrics=t.metrics)},disabledFun:function(t){return"country"===t.val||"pubsite"===t.val?!!t.disableStatus||!!(this.dimensions.indexOf("age")>-1||this.dimensions.indexOf("gender")>-1||this.dimensions.indexOf("publisher_platform")>-1||this.dimensions.indexOf("platform_position")>-1):"age"===t.val||"gender"===t.val?!!t.disableStatus||!!(this.dimensions.indexOf("country")>-1||this.dimensions.indexOf("pubsite")>-1||this.dimensions.indexOf("publisher_platform")>-1||this.dimensions.indexOf("platform_position")>-1):("publisher_platform"===t.val||"platform_position"===t.val)&&(!!t.disableStatus||!!(this.dimensions.indexOf("country")>-1||this.dimensions.indexOf("pubsite")>-1||this.dimensions.indexOf("age")>-1||this.dimensions.indexOf("gender")>-1))},resetDimension:function(){var t=this.dimensions&&this.dimensions.length>0?this.dimensions&&this.dimensions.filter((function(t){return"age"!==t&&"gender"!==t&&"country"!==t&&"pubsite"!==t&&"publisher_platform"!==t&&"platform_position"!==t})):[];t=t&&t.length>0?t:["date"],this.dimensions=JSON.parse(JSON.stringify(t)),this.$emit("on-set-dimensions",this.dimensions)},disabledSortField:function(t){return this.formMultiSort.currMultiSort.findIndex((function(e){return e.field===t}))>=0},handleAddSort:function(){this.formMultiSort.currMultiSort.push({field:[],order:"ascending"})},handleRemoveSort:function(t){this.formMultiSort.currMultiSort.splice(t,1)},handleSortChange:function(){this.$emit("on-multi-sort-change",this.formMultiSort.currMultiSort.filter((function(t){return 0!==t.field.length})))},clearMultiSort:function(){this.formMultiSort.currMultiSort=[],this.$emit("on-multi-sort-change",[])}},computed:{selectAllDimensions:function(){return"chinaCohort"===this.pageRooter?this.currAllDimensions:this.allDimensions},allSortField:function(){var t=this,e=this.dimensions.length>0?this.allDimensions.filter((function(e){return t.dimensions.indexOf(e.val)>=0})):this.allDimensions,i=this.metrics.length>0?this.allMetrics.filter((function(e){return t.metrics.indexOf(e.val)>=0})):this.allMetrics;return e.concat(i)},daysOptions:function(){return"analysisRetention"===this.pageRooter?[{val:30,label:"30days"},{val:60,label:"60days"},{val:90,label:"90days"},{val:180,label:"180days"},{val:360,label:"360days"},{val:36e3,label:"全部"}]:[{val:30,label:"30days"},{val:60,label:"60days"},{val:90,label:"90days"},{val:180,label:"180days"}]}},watch:{allMetrics:function(t){var e=this;this.metrics=this.metrics.filter((function(t){return e.allMetrics.findIndex((function(e){return e.val===t}))>=0})),this.$emit("metrics-ok",this.metrics)},currCohort:function(t){"revenue"!==t&&"ecpm"!==t&&"avimpression"!==t&&"chinaCohort"===this.pageRooter&&this.dimensions.indexOf(!0)&&this.dimensions.length>0&&(this.dimensions=this.dimensions.filter((function(t,e){return"placement"!==t})),this.dimensions.length<1&&this.dimensions.push("date"),this.$emit("on-dimensions-change",this.dimensions))},allSortField:function(t){var e=this;this.formMultiSort.currMultiSort=this.formMultiSort.currMultiSort.filter((function(t){return e.allSortField.findIndex((function(e){return e.val===t.field}))>=0}))}},mounted:function(){this.metrics=JSON.parse(JSON.stringify(this.defaultMetrics)),this.dimensions=JSON.parse(JSON.stringify(this.defaultDimensions))}},h=c,u=(i("ff87"),i("2877")),d=Object(u["a"])(h,s,a,!1,null,"07878121",null),p=d.exports,f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Button",{attrs:{type:"primary",disabled:t.loading,icon:"ios-cloud-download-outline"},on:{click:t.openModal}},[t._v("下载")]),i("Modal",{attrs:{width:"820px",title:"下载设置","footer-hide":""},model:{value:t.resetPwdModal,callback:function(e){t.resetPwdModal=e},expression:"resetPwdModal"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("Icon",{attrs:{type:"ios-cloud-download-outline",size:18}}),i("b",[t._v("下载设置")])],1),i("Row",[i("Col",{attrs:{span:"3"}},[i("legend",[t._v("维度")])]),i("Col",{attrs:{span:"21"}},[this.tmpTag?t._e():i("Checkbox",{attrs:{indeterminate:t.dimensionsCb.indeterminate,value:t.dimensionsCb.checkAll},nativeOn:{click:function(e){return e.preventDefault(),t.handleDimensionsCheckAll.apply(null,arguments)}}},[t._v("全选")]),"mediabuyDetail"===this.pageRooter?i("CheckboxGroup",{model:{value:t.dimensions,callback:function(e){t.dimensions=e},expression:"dimensions"}},[t._l(t.allDimensions,(function(e,r){return i("Checkbox",{key:r,staticClass:"mediabuyDetailLabel",attrs:{label:e.val,disabled:t.disabledFun(e)}},[t._v(t._s(e.label))])})),i("br")],2):t._e(),"mediabuyDetail"!=this.pageRooter?i("CheckboxGroup",{model:{value:t.dimensions,callback:function(e){t.dimensions=e},expression:"dimensions"}},t._l(t.allDimensions,(function(e,r){return i("Checkbox",{key:r,attrs:{label:e.val,disabled:t.disabledFun(e)}},[t._v(t._s(e.label))])})),1):t._e()],1)],1),i("Divider"),"chinaCohort"!==this.pageRooter&&"abroadCohort"!==this.pageRooter&&"abroadCohort180"!==this.pageRooter?i("Row",[i("Col",{attrs:{span:"3"}},[i("legend",[t._v("指标")])]),i("Col",{attrs:{span:"21"}},[0===t.allSpecialCohorts.length?i("Checkbox",{attrs:{indeterminate:t.metricsCb.indeterminate,value:t.metricsCb.checkAll},nativeOn:{click:function(e){return e.preventDefault(),t.handleMetricsCheckAll(1)}}},[t._v("全选")]):t._e(),i("CheckboxGroup",{on:{"on-change":t.handleMetricsChange},model:{value:t.metrics,callback:function(e){t.metrics=e},expression:"metrics"}},[t._l(t.allMetrics,(function(e,r){return i("Checkbox",{key:r,attrs:{label:e.val}},[t._v(t._s(e.label))])})),t.allCohorts.length>0?i("div",t._l(t.allCohorts,(function(e,r){return i("Checkbox",{key:r,attrs:{label:e.val}},[t._v(t._s(e.label))])})),1):t._e(),t.allSpecialCohorts.length>0?i("div",t._l(t.allSpecialCohorts,(function(e,r){return i("Checkbox",{key:r,attrs:{label:e.val}},[t._v(t._s(e.label))])})),1):t._e()],2)],1)],1):t._e(),"chinaCohort"===this.pageRooter||"abroadCohort"===this.pageRooter||"abroadCohort180"===this.pageRooter?i("Row",[i("Col",{attrs:{span:"3"}},[i("legend",[t._v("基础指标")])]),i("Col",{attrs:{span:"21"}},[0===t.allSpecialCohorts.length||"abroadCohort"===this.pageRooter||"abroadCohort180"===this.pageRooter?i("Checkbox",{attrs:{indeterminate:t.basicMetricsCb.indeterminate,value:t.basicMetricsCb.checkAll},nativeOn:{click:function(e){return e.preventDefault(),t.handleMetricsCheckAll(2)}}},[t._v("全选")]):t._e(),i("CheckboxGroup",{on:{"on-change":t.handleBasicMetricsChange},model:{value:t.basicMetrics,callback:function(e){t.basicMetrics=e},expression:"basicMetrics"}},t._l(t.allMetrics,(function(e,r){return i("Checkbox",{key:r,attrs:{label:e.val}},[t._v(t._s(e.label))])})),1)],1),"chinaCohort"===this.pageRooter||"abroadCohort"===this.pageRooter||"abroadCohort180"===this.pageRooter?i("Divider"):t._e(),"chinaCohort"===this.pageRooter?i("Col",{attrs:{span:"3"}},[i("legend",[t._v("核心指标")])]):t._e(),"chinaCohort"===this.pageRooter?i("Col",{attrs:{span:"21"}},[i("RadioGroup",{on:{"on-change":t.handleCoreMetricsTypeChange},model:{value:t.coreMetrics,callback:function(e){t.coreMetrics=e},expression:"coreMetrics"}},[i("div",t._l(t.allCohorts,(function(e,r){return i("Radio",{key:r,attrs:{label:e.val}},[t._v(t._s(e.label))])})),1)])],1):t._e(),"abroadCohort"===this.pageRooter?i("Col",{attrs:{span:"3"}},[i("legend",[t._v("核心指标")])]):t._e(),"abroadCohort"===this.pageRooter?i("Col",{attrs:{span:"21"}},[i("CheckboxGroup",{on:{"on-change":t.handleBasicMetricsArrChange},model:{value:t.coreMetricsArr,callback:function(e){t.coreMetricsArr=e},expression:"coreMetricsArr"}},t._l(t.allSpecialCohorts,(function(e,r){return i("Checkbox",{key:r,attrs:{label:e.val}},[t._v(t._s(e.label))])})),1)],1):t._e(),"abroadCohort180"===this.pageRooter?i("Col",{attrs:{span:"3"}},[i("legend",[t._v("核心指标")])]):t._e(),"abroadCohort180"===this.pageRooter?i("Col",{attrs:{span:"21"}},[i("RadioGroup",{on:{"on-change":t.handleCoreMetricsTypeChange},model:{value:t.coreMetrics,callback:function(e){t.coreMetrics=e},expression:"coreMetrics"}},t._l(t.allSpecialCohorts,(function(e,r){return i("span",{key:r},[i("Radio",{key:r,attrs:{label:e.val}},[t._v(t._s(e.label))]),4===r||6===r||9===r||12===r||15===r||16===r||19===r||22===r||24===r||25===r||28===r?i("br"):t._e()],1)})),0)],1):t._e()],1):t._e(),t.showCalculateType()?i("Divider"):t._e(),t.showCalculateType()?i("Row",{staticClass:"boxItem"},[i("Col",{attrs:{span:"3"}},[i("legend",[t._v("计算方式")])]),i("Col",{attrs:{span:"21"}},[i("RadioGroup",{on:{"on-change":t.handleCalculateTypeChange},model:{value:t.calculateType,callback:function(e){t.calculateType=e},expression:"calculateType"}},t._l(t.allCalculationMethod,(function(e,r){return i("Radio",{key:r,staticStyle:{"margin-left":"10px"},attrs:{label:e.val}},[t._v("by "+t._s(e.label))])})),1)],1)],1):t._e(),t.allCohorts.length>0||"abroadCohort180"===t.pageRooter?i("Divider"):t._e(),t.allCohorts.length>0||"abroadCohort180"===t.pageRooter?i("Row",[i("Col",{attrs:{span:"3"}},[i("legend",[t._v("数据类型")])]),i("Col",{attrs:{span:"21"}},[i("RadioGroup",{on:{"on-change":t.handleCohoreTypeChange},model:{value:t.cohortType,callback:function(e){t.cohortType=e},expression:"cohortType"}},[i("Radio",{attrs:{label:"grand_total",disabled:t.isDisableTotal()}},[t._v("累计")]),i("Radio",{attrs:{label:"on_the_day"}},[t._v("当日")])],1)],1)],1):t._e(),"chinaCohort"===this.pageRooter||"abroadCohort180"===t.pageRooter?i("Divider"):t._e(),"chinaCohort"===this.pageRooter||"abroadCohort180"===t.pageRooter?i("Row",[i("Col",{attrs:{span:"3"}},[i("legend",[t._v("数据周期")])]),i("Col",{attrs:{span:"21"}},[i("RadioGroup",{model:{value:t.dataCycle,callback:function(e){t.dataCycle=e},expression:"dataCycle"}},[i("Radio",{attrs:{label:"30"}},[t._v("30天")]),i("Radio",{attrs:{label:"60"}},[t._v("60天")]),i("Radio",{attrs:{label:"90"}},[t._v("90天")]),i("Radio",{attrs:{label:"180"}},[t._v("180天")])],1)],1)],1):t._e(),i("Divider"),i("Row",[i("Col",{attrs:{span:"3"}},[i("legend",[t._v("格式")])]),i("Col",{attrs:{span:"21"}},[i("RadioGroup",{model:{value:t.fileFormat,callback:function(e){t.fileFormat=e},expression:"fileFormat"}},["gpSalesReport"===this.pageRooter||"chinaCumulate"===this.pageRooter||"mediabuyDetail"===this.pageRooter||"mediabuyCampaignEstimate"===this.pageRooter||"chinaCohort"===this.pageRooter||"abroadCohort"===this.pageRooter||"abroadCohort180"===this.pageRooter||"profitLoss"===this.pageRooter||"analysisRetention"===this.pageRooter||"mediabuyCreativeData"===this.pageRooter||this.pageAeoTag?i("Radio",{attrs:{label:"xlsx_formatted"}},[t._v("xlsx(formatted data)")]):t._e(),"mediabuyCreativeData"!==this.pageRooter?i("Radio",{attrs:{label:"xlsx"}},[t._v(t._s("gpSalesReport"===this.pageRooter||"chinaCumulate"===this.pageRooter||"mediabuyDetail"===this.pageRooter||"mediabuyCampaignEstimate"===this.pageRooter||"chinaCohort"===this.pageRooter||"abroadCohort"===this.pageRooter||"abroadCohort180"===this.pageRooter||"profitLoss"===this.pageRooter||"analysisRetention"===this.pageRooter||this.pageAeoTag?"xlsx(raw data)":".xlsx"))]):t._e(),i("Radio",{attrs:{label:"csv"}},[t._v(t._s("gpSalesReport"===this.pageRooter||"chinaCumulate"===this.pageRooter||"mediabuyDetail"===this.pageRooter||"mediabuyCampaignEstimate"===this.pageRooter||"chinaCohort"===this.pageRooter||"abroadCohort"===this.pageRooter||"abroadCohort180"===this.pageRooter||"profitLoss"===this.pageRooter||"analysisRetention"===this.pageRooter||this.pageAeoTag?"csv(raw data)":".csv"))])],1)],1)],1),i("Divider"),i("Row",[i("Button",{staticStyle:{float:"right","margin-left":"10px"},attrs:{type:"primary"},on:{click:t.handleDownload}},[t._v("下载")]),i("Button",{staticStyle:{"margin-left":"8px",float:"right"},on:{click:t.cancelDownload}},[t._v("取消")])],1)],1)],1)},m=[],y=(i("28a5"),i("6762"),{name:"table-download",props:{allDimensions:{type:Array,default:function(){return[]}},allCalculationMethod:{type:Array,default:function(){return[]}},allMetrics:{type:Array,default:function(){return[]}},syncDimensions:{type:Array,default:function(){return[]}},syncMetrics:{type:Array,default:function(){return[]}},allCohorts:{type:Array,default:function(){return[]}},allSpecialCohorts:{type:Array,default:function(){return[]}},currCohort:{type:String,default:function(){return null}},calculateBy:{type:String,default:function(){return null}},currCalculateType:{type:String,default:function(){return null}},currCohortType:{type:String,default:function(){return null}},tmpTag:{type:Boolean,default:function(){return!1}},pageAeoTag:{type:Boolean,default:function(){return!1}},pageRooter:{type:String,default:function(){return null}},tabSelectDay:{type:Number,default:function(){return null}},loading:{type:Boolean,default:function(){return!1}},noDownloadModal:{type:Boolean,default:function(){return!1}}},data:function(){return{resetPwdModal:!1,dimensions:[],metrics:[],basicMetrics:["installs","cost","average_cpi"],coreMetrics:"roi",coreMetricsArr:["roi"],showType:[],dataCycle:"30",fileFormat:"xlsx",cohortType:"grand_total",calculateType:"installs"}},computed:{dimensionsCb:function(){var t=this;return this.dimensions.length===this.allDimensions.length?(-1!==this.dimensions.indexOf("placement")&&("retention"!==this.coreMetrics&&"ads_arpu"!==this.coreMetrics&&"roi"!==this.coreMetrics||(t.coreMetrics="revenue")),{indeterminate:!1,checkAll:!0}):this.dimensions.length>0?(-1!==this.dimensions.indexOf("placement")&&("retention"!==this.coreMetrics&&"ads_arpu"!==this.coreMetrics&&"roi"!==this.coreMetrics||(t.coreMetrics="revenue")),{indeterminate:!0,checkAll:!1}):{indeterminate:!1,checkAll:!1}},metricsCb:function(){return this.metrics.length===this.allMetrics.length+this.allCohorts.length?{indeterminate:!1,checkAll:!0}:this.metrics.length>0?{indeterminate:!0,checkAll:!1}:{indeterminate:!1,checkAll:!1}},basicMetricsCb:function(){return"chinaCohort"===this.pageRooter||"abroadCohort"===this.pageRooter?3===this.basicMetrics.length?{indeterminate:!1,checkAll:!0}:this.basicMetrics.length>0?{indeterminate:!0,checkAll:!1}:{indeterminate:!1,checkAll:!1}:"abroadCohort180"===this.pageRooter?5===this.basicMetrics.length?{indeterminate:!1,checkAll:!0}:this.basicMetrics.length>0?{indeterminate:!0,checkAll:!1}:{indeterminate:!1,checkAll:!1}:void 0}},methods:{openModal:function(){this.noDownloadModal?this.handleDownload():this.resetPwdModal=!0},handleDimensionsCheckAll:function(){if(this.dimensionsIndeterminate?this.checkAllDimensions=!1:this.checkAllDimensions=!this.checkAllDimensions,this.dimensionsIndeterminate=!1,this.checkAllDimensions){var t=this.allDimensions.map((function(t){return t.val}));this.dimensions=t,"chinaCohort"!==this.pageRooter||"retention"!==this.coreMetrics&&"ads_arpu"!==this.coreMetrics&&"roi"!==this.coreMetrics||(this.coreMetrics="revenue")}else this.dimensions=[]},handleMetricsCheckAll:function(t){if(2===t)if(this.metricsIndeterminate?this.checkAllBasicMetrics=!1:this.checkAllBasicMetrics=!this.checkAllBasicMetrics,this.metricsIndeterminate=!1,this.checkAllBasicMetrics){var e=this.allMetrics.map((function(t){return t.val}));this.basicMetrics=e,e.length>0&&this.handleBasicMetricsChange(this.basicMetrics)}else this.basicMetrics=[];else if(this.metricsIndeterminate?this.checkAllMetrics=!1:this.checkAllMetrics=!this.checkAllMetrics,this.metricsIndeterminate=!1,this.checkAllMetrics){var i=this.allMetrics.map((function(t){return t.val}));this.metrics=i,i=this.allCohorts.map((function(t){return t.val})),this.metrics=this.metrics.concat(i),i.length>0&&this.handleMetricsChange(this.metrics)}else this.metrics=[]},handleDownload:function(){var t={dimensions:this.dimensions,metrics:this.metrics,fileFormat:this.fileFormat,calculate_by:this.calculateType};if(this.allCohorts.length>0&&(t.cohortType=this.cohortType),"chinaCohort"===this.pageRooter&&(t.core_metrics=this.coreMetrics,t.basic_metrics=this.basicMetrics,t.period=this.dataCycle),"abroadCohort180"===this.pageRooter&&(t.core_metrics=this.coreMetrics,t.basic_metrics=this.basicMetrics,t.cohortType=this.cohortType,t.period=this.dataCycle),"abroadCohort"===this.pageRooter){if(this.coreMetricsArr&&this.coreMetricsArr.length<1)return void this.$Message.error({duration:3,content:"至少选择一个核心指标"});t.core_metrics=this.coreMetricsArr,t.basic_metrics=this.basicMetrics}this.resetPwdModal=!1,this.$emit("on-download",t)},cancelDownload:function(){this.resetPwdModal=!1},handleMetricsChange:function(t){var e=t.indexOf("retention");e>=0&&e===t.length-1?this.cohortType&&(this.cohortType="on_the_day",e=this.metrics.indexOf("staytime_by_active_users"),e>=0&&this.metrics.splice(e,1),e=this.metrics.indexOf("staytime_by_engaged_users"),e>=0&&this.metrics.splice(e,1),e=this.metrics.indexOf("avimpression_by_active_users"),e>=0&&this.metrics.splice(e,1),e=this.metrics.indexOf("avimpression_by_engaged_users"),e>=0&&this.metrics.splice(e,1),e=this.metrics.indexOf("retention_users"),e>=0&&this.metrics.splice(e,1),e=this.metrics.indexOf("unique_users"),e>=0&&this.metrics.splice(e,1)):t.indexOf("staytime_by_active_users")>=0||t.indexOf("staytime_by_engaged_users")>=0||t.indexOf("avimpression_by_active_users")>=0||t.indexOf("avimpression_by_engaged_users")>=0?(e=this.metrics.indexOf("retention"),e>=0&&this.metrics.splice(e,1),this.cohortType&&(this.cohortType="on_the_day")):t.indexOf("staytime")<0&&t.indexOf("avimpression")<0&&t.indexOf("ad_show_fail")<0&&t.indexOf("ad_show_fail")<0&&t.indexOf("enter_homepage")>=0&&("unique_users"===this.calculateType&&(this.calculateType="installs"),this.cohortType="grand_total",1===this.metrics.length&&(this.cohortType="on_the_day")),t.indexOf("enter_homepage")>=0&&("unique_users"===this.calculateType&&(this.calculateType="installs"),"installs"===this.calculateType&&(this.cohortType="on_the_day"))},handleBasicMetricsArrChange:function(t){var e=t.indexOf("retention"),i=t.indexOf("iap_arppu"),r=t.indexOf("non_ad_users_percentage");if(e>=0&&e===t.length-1)this.cohortType&&("abroadCohort"===this.pageRooter?this.cohortType="on_the_day":this.cohortType="grand_total");else if(i>=0&&i===t.length-1||r>=0&&r===t.length-1){if(this.cohortType&&"grand_total"===this.cohortType){this.cohortType="on_the_day";var o=t.indexOf("retention");o>=0&&"abroadCohort"!==this.pageRooter&&this.coreMetricsArr.splice(o,1)}}else(t.indexOf("enter_homepage")>=0||t.indexOf("pay_rate")>=0)&&("unique_users"===this.calculateType&&(this.calculateType="installs"),this.cohortType="on_the_day")},handleCalculateTypeChange:function(t){if("abroadCohort"===this.pageRooter){if("retention_users"===t)"grand_total"===this.cohortType&&(this.cohortType="on_the_day");else if("unique_users"===t)if("grand_total"===this.cohortType){this.cohortType="on_the_day";var e=this.coreMetricsArr.indexOf("enter_homepage");e>-1&&this.coreMetricsArr.splice(e,1);var i=this.coreMetricsArr.indexOf("retention");i>=0&&this.coreMetricsArr.splice(i,1)}else{var r=this.coreMetricsArr.indexOf("enter_homepage");r>=0&&this.coreMetricsArr.splice(r,1);var o=this.coreMetricsArr.indexOf("pay_rate");o>-1&&this.coreMetricsArr.splice(o,1)}}else if("installs"===t){if("grand_total"===this.cohortType){var n=this.metrics.indexOf("enter_homepage");n>=0&&this.metrics.splice(n,1)}}else if("unique_users"===t){if(this.cohortType="on_the_day","on_the_day"===this.cohortType){var s=this.metrics.indexOf("enter_homepage");s>=0&&this.metrics.splice(s,1)}}else this.cohortType="on_the_day"},handleCohoreTypeChange:function(t){if("on_the_day"===this.cohortType);else if("abroadCohort"===this.pageRooter){if("installs"===this.calculateType){var e=this.coreMetricsArr.indexOf("iap_arppu");e>-1&&this.coreMetricsArr.splice(e,1);var i=this.coreMetricsArr.indexOf("non_ad_users_percentage");i>-1&&this.coreMetricsArr.splice(i,1);var r=this.coreMetricsArr.indexOf("enter_homepage");r>-1&&this.coreMetricsArr.splice(r,1);var o=this.coreMetricsArr.indexOf("retention");o>=0&&this.coreMetricsArr.splice(o,1);var n=this.coreMetricsArr.indexOf("pay_rate");n>-1&&this.coreMetricsArr.splice(n,1)}else{var s=this.coreMetricsArr.indexOf("iap_arppu");s>-1&&this.coreMetricsArr.splice(s,1);var a=this.coreMetricsArr.indexOf("non_ad_users_percentage");a>-1&&this.coreMetricsArr.splice(a,1);var l=this.coreMetricsArr.indexOf("enter_homepage");l>-1&&this.coreMetricsArr.splice(l,1);var c=this.coreMetricsArr.indexOf("retention");c>=0&&this.coreMetricsArr.splice(c,1);var h=this.coreMetricsArr.indexOf("pay_rate");h>-1&&this.coreMetricsArr.splice(h,1),this.calculateType="installs",this.cohortType="grand_total"}1===this.coreMetricsArr.length&&(this.coreMetricsArr.indexOf("non_ad_users_percentage")>-1||this.coreMetricsArr.indexOf("iap_arppu")>-1)&&(this.coreMetricsArr=["roi"]),this.cohortType="grand_total"}else{"retention"===this.coreMetrics&&(this.coreMetrics="roi"),this.calculateType="installs";var u=this.metrics.indexOf("staytime_by_active_users");u>=0&&this.metrics.splice(u,1);var d=this.metrics.indexOf("retention");d>=0&&this.metrics.splice(d,1),u=this.metrics.indexOf("staytime_by_engaged_users"),u>=0&&this.metrics.splice(u,1),u=this.metrics.indexOf("avimpression_by_active_users"),u>=0&&this.metrics.splice(u,1),u=this.metrics.indexOf("avimpression_by_engaged_users"),u>=0&&this.metrics.splice(u,1),u=this.metrics.indexOf("enter_homepage"),u>=0&&this.metrics.splice(u,1)}},handleBasicMetricsChange:function(t){},disabledFun:function(t){return"country"===t.val||"pubsite"===t.val?!!t.disableStatus||!!(this.dimensions.indexOf("age")>-1||this.dimensions.indexOf("gender")>-1||this.dimensions.indexOf("publisher_platform")>-1||this.dimensions.indexOf("platform_position")>-1):"age"===t.val||"gender"===t.val?!!t.disableStatus||!!(this.dimensions.indexOf("country")>-1||this.dimensions.indexOf("pubsite")>-1||this.dimensions.indexOf("publisher_platform")>-1||this.dimensions.indexOf("platform_position")>-1):("publisher_platform"===t.val||"platform_position"===t.val)&&(!!t.disableStatus||!!(this.dimensions.indexOf("country")>-1||this.dimensions.indexOf("pubsite")>-1||this.dimensions.indexOf("age")>-1||this.dimensions.indexOf("gender")>-1))},disableCoreMetricsArr:function(t){if(this.coreMetricsArr&&this.coreMetricsArr.length>=5)return!(this.coreMetricsArr.indexOf(t.val)>-1)},showCalculateType:function(){return!("abroadCohort"!==this.pageRooter&&!this.pageAeoTag)},isDisableTotal:function(t){if("abroadCohort180"===this.pageRooter){var e=["avimpression_by_au","avimpression_by_eu","click_ad_button_by_au","click_ad_button_by_eu","ad_show_fail_by_au","ad_show_fail_by_eu","non_ad_users_percentage","iap_avg_revenue_by_au","iap_avg_times_by_au","pay_rate_by_au","retention","staytime_by_au","staytime_by_eu","enter_homepage_by_in","enter_homepage_by_au"];return null==t&&(t=this.coreMetrics),!!e.includes(t)}return!1},handleCoreMetricsTypeChange:function(t){if("abroadCohort180"!==this.pageRooter){if("retention"===t&&"grand_total"===this.cohortType&&(this.cohortType="on_the_day"),("retention"===t||"ads_arpu"===t||"roi"===t)&&-1!==this.dimensions.indexOf("placement")){var e=t.indexOf("placement");this.dimensions.splice(e,1)}}else this.isDisableTotal(t)&&"grand_total"===this.cohortType&&(this.cohortType="on_the_day")}},watch:{syncDimensions:function(t){var e=[];this.allDimensions&&this.allDimensions.map((function(t,i){e.push(t.val)})),this.dimensions=t&&t.length>0?t:e,this.dataCycle=this.tabSelectDay+"","chinaCohort"===this.pageRooter&&(this.coreMetrics=this.currCohort,this.cohortType=this.currCohortType,this.basicMetrics=this.syncMetrics),"abroadCohort"===this.pageRooter&&(this.coreMetricsArr=this.currCohort&&this.currCohort.split(","),this.cohortType=this.currCohortType,this.basicMetrics=this.syncMetrics,this.calculateType=this.calculateBy)},syncMetrics:function(t){this.currCohort?this.metrics=t.concat(this.currCohort):this.metrics=t,"chinaCohort"===this.pageRooter&&(this.cohortType=this.currCohortType,this.basicMetrics=t,this.coreMetrics=this.currCohort,this.dataCycle=this.tabSelectDay+"",this.dimensions=this.syncDimensions),"abroadCohort"===this.pageRooter&&(this.cohortType=this.currCohortType,this.basicMetrics=t,this.coreMetricsArr=this.currCohort&&this.currCohort.split(","),this.dimensions=this.syncDimensions,this.calculateType=this.calculateBy),"abroadCohort180"===this.pageRooter&&(this.basicMetrics=t)},currCohort:function(t){this.metrics=this.syncMetrics.concat(t),"chinaCohort"===this.pageRooter?(this.coreMetrics=t,this.basicMetrics=this.syncMetrics,this.dimensions=this.syncDimensions,this.dataCycle=this.tabSelectDay+"",this.cohortType=this.currCohortType):"abroadCohort"===this.pageRooter?(this.coreMetricsArr=t&&t.split(","),this.basicMetrics=this.syncMetrics,this.dimensions=this.syncDimensions,this.cohortType=this.currCohortType,this.calculateType=this.calculateBy):"abroadCohort180"===this.pageRooter&&(this.coreMetrics=t,this.isDisableTotal(this.coreMetrics)&&"grand_total"===this.cohortType&&(this.cohortType="on_the_day"))},currCohortType:function(t){this.cohortType=t,"chinaCohort"===this.pageRooter?(this.basicMetrics=this.syncMetrics,this.coreMetrics=this.currCohort,this.dimensions=this.syncDimensions,this.dataCycle=this.tabSelectDay+""):"abroadCohort"===this.pageRooter&&(this.basicMetrics=this.syncMetrics,this.coreMetricsArr=this.currCohort&&this.currCohort.split(","),this.dimensions=this.syncDimensions,this.dataCycle=this.tabSelectDay+"",this.calculateType=this.calculateBy,this.cohortType=this.currCohortType)},calculateBy:function(t){"abroadCohort"===this.pageRooter&&(this.basicMetrics=this.syncMetrics,this.coreMetricsArr=this.currCohort&&this.currCohort.split(","),this.dimensions=this.syncDimensions,this.calculateType=this.calculateBy)},tabSelectDay:function(t){this.dataCycle=t+"","chinaCohort"===this.pageRooter&&(this.basicMetrics=this.syncMetrics,this.coreMetrics=this.currCohort,this.cohortType=this.currCohortType,this.dimensions=this.syncDimensions)}},mounted:function(){this.dimensions=this.syncDimensions,this.currCohort?this.metrics=this.syncMetrics.concat(this.currCohort):this.metrics=this.syncMetrics,"gpSalesReport"!==this.pageRooter&&"chinaCumulate"!==this.pageRooter&&"mediabuyDetail"!==this.pageRooter&&"profitLoss"!==this.pageRooter&&"mediabuyCampaignEstimate"!==this.pageRooter&&"chinaCohort"!==this.pageRooter&&"abroadCohort"!==this.pageRooter&&"abroadCohort180"!==this.pageRooter&&"mediabuyCreativeData"!==this.pageRooter&&"analysisRetention"!==this.pageRooter||(this.fileFormat="xlsx_formatted")}}),g=y,b=(i("87dc"),Object(u["a"])(g,f,m,!1,null,null,null)),_=b.exports,v=i("4b65"),C=(i("8dc2"),i("ca62"),i("1157")),M=i.n(C);function x(t,e){var i="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=S(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,n=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw n}}}}function S(t,e){if(t){if("string"===typeof t)return D(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?D(t,e):void 0}}function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}var R={name:"TableData",props:{data:{type:Array,default:function(){return[]}},footerData:{type:Object,default:function(){return{}}},pageData:{type:Object,default:function(){return{page_size:20,has_next:!1,has_prev:!1,total_num:20}}},fieldFormaters:{type:Object,default:function(){return{}}},knownFields:{type:Array,default:function(){return[]}},dimensions:{type:Array,default:function(){return[]}},metrics:{type:Array,default:function(){return[]}},allDimensions:{type:Array,default:function(){return[]}},currAllDimensions:{type:Array,default:function(){return[]}},allCalculationMethod:{type:Array,default:function(){return[]}},defaultDimensions:{type:Array,default:function(){return[]}},allMetrics:{type:Array,default:function(){return[]}},days:{type:Number,default:function(){return 7}},allApp:{type:Array,default:function(){return[]}},allMediaSource:{type:Array,default:function(){return[]}},allMediabuyChannel:{type:Array,default:function(){return[]}},pageReset:{type:Boolean,default:function(){return!1}},tableLoading:{type:Boolean,default:function(){return!1}},syncDimensions:{type:Array,default:function(){return[]}},syncMetrics:{type:Array,default:function(){return[]}},fixMetrics:{type:Boolean,default:function(){return!1}},allCohorts:{type:Array,default:function(){return[]}},allSpecialCohorts:{type:Array,default:function(){return[]}},currCohort:{type:String,default:function(){return null}},calculateBy:{type:String,default:function(){return null}},currCalculateType:{type:String,default:function(){return null}},dayRange:{type:Number,default:function(){return null}},moneyType:{type:String,default:function(){return null}},currCohortType:{type:String,default:function(){return null}},searchTag:{type:Boolean,default:function(){return!1}},pageAeo:{type:Boolean,default:function(){return!1}},pageRooter:{type:String,default:function(){return null}},tabSelectDay:{type:Number,default:function(){return null}},haveIndex:{type:Boolean,default:function(){return!1}},haveDimension:{type:Boolean,default:function(){return!0}},haveTotal:{type:Boolean,default:function(){return!0}},tableIndex:{type:Number,default:function(){return 0}},showDays:{type:Boolean,default:function(){return!1}},showMultiSort:{type:Boolean,default:function(){return!1}},showTable:{type:Boolean,default:function(){return!0}},tableCol:{type:Array,default:function(){return[]}},totalTableCol:{type:Array,default:function(){return[]}},pageSizeOpts:{type:Array,default:function(){return[10,20,30,50,100,200]}},cur_sys_name:{type:String,default:function(){return"none"}},noDownloadModal:{type:Boolean,default:function(){return!1}}},components:{TableDimensions:p,TableDownload:_},data:function(){return{tmpTag:!1,tableHeight:"395",tableColumnsData:[],totalColumnsData:[]}},computed:{tableColumns:function(){return"eventInfoDetail"===this.pageRooter?this.tableCol:this.getColumns()},totalColumns:function(){return"eventInfoDetail"===this.pageRooter?this.totalTableCol:this.getColumns()},tableData:function(){var t=Object(n["a"])(this.data);return t.length>0&&t.push({test_id:"1"}),t}},methods:{getColumns:function(){return"eventInfoDetail"===this.pageRooter?this.tableCol:Object(v["a"])(this,this.fieldFormaters,this.knownFields,this.dimensions,this.metrics,this.allApp,this.allMediaSource,this.fixMetrics,this.currCohort,this.dayRange,this.moneyType,this.pageAeo,this.pageRooter,this.allMediabuyChannel,this.haveIndex,this.onClickCell,this.calculateBy)},handleSetDimensions:function(t){this.$emit("on-set-dimensions",t)},handleDimensionsChange:function(t){this.$emit("on-dimensions-change",t)},handleSelectDayChange:function(t){this.$emit("on-select-day-change",t)},dimensionsOk:function(t){this.$emit("dimensions-ok",t)},metricsOk:function(t){var e=this;setTimeout((function(){e.$emit("metrics-ok",t)}),300)},handleRefresh:function(t,e,i){this.$emit("on-table-refresh",t,e,i)},download:function(t){this.$emit("on-download",t)},handleSortChange:function(t,e,i){this.$refs.childTableDimensions.clearMultiSort(),this.$emit("on-sort-change",t,e,i,this.currCohort)},pageChange:function(t){this.$emit("on-page-change",t,this.currCohort)},pageSizeChange:function(t){this.$emit("on-page-size-change",t,this.currCohort)},handleMultiSortChange:function(t){this.$emit("on-multi-sort-change",t)},getData:function(){var t=JSON.parse(JSON.stringify(this.footerData)),e={},i="country_dimensionality"===this.cur_sys_name;for(var r in this.totalColumnsData.forEach((function(r,o){var n=r.key;0===o?e[n]={key:n,value:"合计"}:isNaN(Number(t[n]))?i||(e[n]={key:n,value:"-"}):e[n]={key:n,value:t[n]}})),t)null==e[r]&&(e[r]={key:r,value:t[r]});return e},tableDataFun:function(){if("eventInfoDetail"===this.pageRooter)return this.footerData.data;var t=this.getData(),e=[],i={};for(var r in t){var o=t[r],n=o.key,s=o.value;i[n]=s}return e.push(i),e},handleSummary:function(t){t.columns,t.data;var e=this.getData();return e},resetDimension:function(){this.$refs.childTableDimensions.resetDimension()},_expandable:function(){this.client_width=document.body.clientWidth;var t=navigator.userAgent;this.client_width>1450&&("abroadCohort"===this.pageRooter||this.pageAeo)?t.indexOf("Firefox")>-1?this.tableHeight="500":t.indexOf("Safari")>-1?this.tableHeight="540":this.tableHeight="480":this.client_width>1450&&("chinaCohort"===this.pageRooter||"eventFunnelActivity"===this.pageRooter)?t.indexOf("Firefox")>-1?this.tableHeight="600":t.indexOf("Safari")>-1?this.tableHeight="640":this.tableHeight="395":this.tableHeight="540"},onClickCell:function(t,e){this.$emit("on-click-cell",t,e)},handleColumnWidthResize:function(t,e,i,r){var o=this.totalColumnsData.findIndex((function(t){return t.key===i.key}));o>=0&&(this.totalColumnsData[o].width=t)},handleSpan:function(t){t.row,t.column,t.rowIndex;var e=t.columnIndex;if("eventInfoDetail"===this.pageRooter){var i=this.totalTableCol.filter((function(t){return!t.children>0})),r=i.length;if(r>1){if(0===e)return[1,r];if(e>0&&e<r)return[1,0]}}}},beforeMount:function(){this.tmpTag=this.searchTag},mounted:function(){var t=this;this.tableColumnsData=this.getColumns(),this.totalColumnsData=this.getColumns(),history.pushState(null,null,document.URL),window.addEventListener("popstate",(function(){history.pushState(null,null,document.URL)}));var e=0;document.getElementsByClassName("ivu-table-body")[2*this.tableIndex].addEventListener("scroll",(function(i){var r=i.target.scrollLeft;e=i.target.scrollTop,M()(".ivu-table-body")[2*t.tableIndex+1].scrollLeft=r})),document.getElementsByClassName("ivu-table-body")[2*this.tableIndex+1].addEventListener("scroll",(function(i){var r=i.target.scrollLeft;M()(".ivu-table-body")&&(M()(".ivu-table-body")[2*t.tableIndex].scrollLeft=r,M()(".ivu-table-body")[2*t.tableIndex].scrollTop=e,M()(".ivu-table-body")[2*t.tableIndex+1].scrollTop=0)})),this.haveTotal||M()((function(){M()(".topTable").addClass("hiddenTable")})),this._expandable();var i=this;window.onresize=function(){i._expandable()}},watch:{pageReset:{immediate:!0,handler:function(t){t&&!0===t&&(M()(".ivu-table-body")[2*this.tableIndex+1]&&(M()(".ivu-table-body")[2*this.tableIndex+1].scrollTop=0),this.$refs["tablePages"]&&(this.$refs["tablePages"].currentPage=1),this.$emit("on-page-reset-true"))}},tableColumns:function(t){var e=this,i=JSON.parse(JSON.stringify(this.tableColumnsData));this.tableColumnsData=this.tableColumns;var r,o=x(i);try{var n=function(){var t=r.value,i=e.tableColumnsData.findIndex((function(e){return e.key===t.key}));i>=0&&(e.tableColumnsData[i].width=t.width)};for(o.s();!(r=o.n()).done;)n()}catch(s){o.e(s)}finally{o.f()}},totalColumns:function(t){var e=this,i=JSON.parse(JSON.stringify(this.totalColumnsData));this.totalColumnsData=this.totalColumns;var r,o=x(i);try{var n=function(){var t=r.value,i=e.totalColumnsData.findIndex((function(e){return e.key===t.key}));i>=0&&(e.totalColumnsData[i].width=t.width)};for(o.s();!(r=o.n()).done;)n()}catch(s){o.e(s)}finally{o.f()}}}},A=R,T=(i("8a8d"),i("3334"),Object(u["a"])(A,r,o,!1,null,"266c246b",null));e["a"]=T.exports},ff87:function(t,e,i){"use strict";i("1357")}}]);