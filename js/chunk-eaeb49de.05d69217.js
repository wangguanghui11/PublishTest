(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eaeb49de"],{"0c72":function(e,t,n){"use strict";n("ae09")},"64c1":function(e,t,n){"use strict";n("88d4")},"87b5":function(e,t,n){},"88d4":function(e,t,n){},"88e6":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"dom",style:{width:e.previewStatus?e.client_width:"auto"}})},i=[],r=(n("7f7f"),n("28a5"),n("20d6"),n("ac6a"),n("313e")),s=n.n(r),l=n("90de"),o=n("6612"),c=n.n(o),u=n("4b65"),p={name:"group-line-chart",props:{chartData:{type:Object,default:function(){return{legendData:[],xAxisData:[],values:[]}}},knownFields:{type:Array,default:function(){return[]}},fieldFormaters:{type:Object,default:function(){return{}}},defaultFormater:{type:String,default:function(){return""}},xAxisType:{type:String,default:function(){return"日期"}},status:{type:Boolean,default:function(){return!1}},previewStatus:{type:Boolean,default:function(){return!1}},moneyType:{type:String,default:function(){return null}},events:{type:Array,default:function(){return[]}},inverseStatus:{type:Boolean,default:function(){return!1}}},data:function(){return{dom:null,client_width:1400,client_height:500}},methods:{resize:function(){this.dom.resize()},wrapOption:function(e){var t=this,n=[],a=this.fieldFormaters[this.chartData.chartField];null==a&&(a=this.defaultFormater);var i="数值";null!=this.chartData.chartField&&(i=this.knownFields.filter((function(e){return e.val===t.chartData.chartField}))[0].label);for(var r=parseInt(this.chartData.xAxisData.length/15),s=0;s<this.chartData.values.length;s++)n.push({name:this.chartData.legendData[s],type:"line",showAllSymbol:!0,data:this.chartData.values[s],itemStyle:{normal:{label:{show:this.status,formatter:function(t){if(t.dataIndex%(r+1)!==0)return"";var n=c()(t.value).format(a);return e&&n&&n.indexOf("$")>-1&&(n="¥"+n.substring(n.indexOf("$")+1,n.length)),n}}}}});var l=0===this.chartData.legendData.length,o=[];this.chartData.groups&&(o=this.chartData.groups.findIndex((function(e){return"total"===e}))>=0?[{label:"Total",val:"total"}]:Object(u["j"])(this.knownFields,this.chartData.groups));var p=this.xAxisType,f=this.events,h=this.chartData.xAxisData,d=Object.hasOwnProperty.call(this.chartData,"grid")?this.chartData.grid.left:"1.2%";return{title:{show:l,text:"暂无数据",left:"center",top:"center",textStyle:{color:"#464c5b",fontSize:16,fontWeight:400}},animation:!1,tooltip:{trigger:"item",axisPointer:{type:"cross",label:{formatter:function(t){if("y"===t.axisDimension){var n=c()(t.value).format(a);return e&&n&&n.indexOf("$")>-1&&(n="¥"+n.substring(n.indexOf("$")+1,n.length)),n}var i=t.value;if(f.length>0){i="转化率 ";var r=h.findIndex((function(e){return e===t.value}));i+=r+1+": ",i+=f[r]+"  "+(r+2)+": ",i+=f[r+1]}return i},backgroundColor:"#6a7985"}},formatter:function(t){var n=t.seriesName.split("/"),r=c()(t.value).format(a);e&&r&&r.indexOf("$")>-1&&(r="¥"+r.substring(r.indexOf("$")+1,r.length));for(var s=p+(""!==p?": ":"")+t.name,l=0;l<o.length;l++)s+="<br/>",s+=o[l].label,s+=": ",s+=n[l];return s+="<br/>",s+=i,s+=": ",s+=r,s}},legend:{formatter:function(e){return e?(e.length>32&&(e=e.slice(0,32)+"..."),e):""},tooltip:{show:!0},orient:"vertical",type:"scroll",right:10,icon:"circle",data:this.chartData.legendData},grid:{top:"10%",left:d||"1.2%",right:"260px",bottom:"3%",height:"80%",width:"auto",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,axisLabel:{rotate:15,interval:r},axisLine:{onZero:!this.inverseStatus},data:this.chartData.xAxisData}],yAxis:[{inverse:!!this.inverseStatus,type:"value",axisLabel:{formatter:function(t){var n=c()(t).format(a);return e&&n&&n.indexOf("$")>-1&&(n="¥"+n.substring(n.indexOf("$")+1,n.length)),n}}}],series:n}},renderChart:function(){var e=this,t=this.wrapOption(this.moneyType);this.$nextTick((function(){e.dom=s.a.init(e.$refs.dom),e.dom.setOption(t,!0),e.autoHeight=e.previewStatus?500:350,e.dom.resize({height:e.autoHeight}),Object(l["m"])(window,"resize",e.resize)}))},reRenderChartSeries:function(){var e=this,t=this.wrapOption(this.moneyType),n=this.dom.getOption();null!=n&&(n.series=t.series),this.$nextTick((function(){e.dom=s.a.init(e.$refs.dom),e.dom.setOption(n,!0),e.autoHeight=e.previewStatus?500:350,e.dom.resize({height:e.autoHeight}),Object(l["m"])(window,"resize",e.resize)}))},callMethod:function(e){},_expandable:function(){this.client_width=document.body.clientWidth,this.client_height=document.body.clientHeight}},watch:{chartData:{deep:!0,handler:function(e,t){this.renderChart()}},status:function(e){this.reRenderChartSeries()},previewStatus:function(e){this.reRenderChartSeries()}},mounted:function(){this.renderChart(),this._expandable();var e=this;window.onresize=function(){e._expandable()}},beforeDestroy:function(){Object(l["l"])(window,"resize",this.resize)}},f=p,h=n("2877"),d=Object(h["a"])(f,a,i,!1,null,null,null);t["a"]=d.exports},ab5a:function(e,t,n){"use strict";n("87b5")},ae09:function(e,t,n){},eaae:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Row",[n("page-filter",{ref:"pageFilter",attrs:{loading:e.tableLoading},on:{"on-filter-apply":e.onFilterApply}})],1),n("Row",{staticStyle:{"margin-top":"5px"}},[n("Card",{attrs:{shadow:""}},[n("table-data",{ref:"table",attrs:{data:e.tableData,"table-loading":e.tableLoading,days:e.days,"all-app":e.allApp,"footer-data":e.totalData,"page-reset":e.pageReset,"page-data":e.pageData,"field-formaters":e.field_formaters,"known-fields":e.monetization_placement_sdk_fields,dimensions:e.currDimensions,metrics:e.metrics,"default-dimensions":e.defaultDimensions,"all-dimensions":e.allDimensions,"all-metrics":e.allMetrics,"sync-dimensions":e.syncDimensions,"sync-metrics":e.syncMetrics,"page-rooter":"profitLoss"},on:{"on-sort-change":e.handleSortChange,"metrics-ok":e.metricsOk,"on-table-refresh":e.handleTableRefresh,"on-download":e.download,"on-page-change":e.pageChange,"on-page-size-change":e.pageSizeChange,"on-page-reset-true":e.pageResetFalse,"on-dimensions-change":e.handleDimensionsChange}})],1),e.downloadLoading?n("Spin",{attrs:{size:"large",fix:""}}):e._e()],1)],1)},i=[],r=(n("8e6e"),n("456d"),n("ac6a"),n("5df3"),n("ade3")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Card",{ref:"filter",staticClass:"filter-selection"},[n("div",[n("a-select",{staticClass:"inline-width",staticStyle:{"font-size":"12px"},attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"",autoClearSearchValue:!1,"max-tag-count":this.maxTagArr[0],"max-tag-text-length":this.maxTagTextArr[0],placeholder:"项目组-全部",optionFilterProp:"children"},on:{focus:function(t){return e.focusFun(0)},blur:function(t){return e.blurFun()},mouseenter:function(t){return e.mouseenterFun(0)},mouseleave:function(t){return e.mouseleaveFun()},change:e.projectsChange},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return n("div",{},[n("v-nodes",{attrs:{vnodes:t}}),n("a-divider",{staticClass:"select-all-divider"}),n("div",{staticClass:"select-all-div",on:{mousedown:function(e){return e.preventDefault()}}},[n("span",{staticClass:"select-all-span"},[e._v(e._s(e.projects.length)+"/"+e._s(e.allProjects.length))]),n("Button",{attrs:{type:"primary"},on:{click:function(t){e.projects=e.allProjects}}},[e._v("全选")])],1)],1)}}]),model:{value:e.projects,callback:function(t){e.projects=t},expression:"projects"}},e._l(e.allProjects,(function(t){return n("Option",{key:t,attrs:{value:t}},[e._v(e._s(t)+"\n      ")])})),1),n("a-select",{staticClass:"inline-width",staticStyle:{"font-size":"12px"},attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"",autoClearSearchValue:!1,"max-tag-count":this.maxTagArr[1],"max-tag-text-length":this.maxTagTextArr[1],placeholder:"App-全部",optionFilterProp:"children"},on:{focus:function(t){return e.focusFun(1)},blur:function(t){return e.blurFun()},mouseenter:function(t){return e.mouseenterFun(1)},mouseleave:function(t){return e.mouseleaveFun()},change:e.appsChange},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return n("div",{},[n("v-nodes",{attrs:{vnodes:t}}),n("a-divider",{staticClass:"select-all-divider"}),n("div",{staticClass:"select-all-div",on:{mousedown:function(e){return e.preventDefault()}}},[n("span",{staticClass:"select-all-span"},[e._v(e._s(e.apps.length)+"/"+e._s(e.canSelectAllApp.length))]),n("Button",{attrs:{type:"primary"},on:{click:function(t){e.apps=e.canSelectAllApp.map((function(e){return e.app_id}))}}},[e._v("全选")])],1)],1)}}]),model:{value:e.apps,callback:function(t){e.apps=t},expression:"apps"}},e._l(e.canSelectAllApp,(function(t){return n("Option",{key:t.app_id,attrs:{value:t.app_id}},[e._v(e._s(t.app_name)+"\n      ")])})),1),n("a-select",{staticClass:"inline-width",staticStyle:{"font-size":"12px"},attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"",autoClearSearchValue:!1,"max-tag-count":this.maxTagArr[2],"max-tag-text-length":this.maxTagTextArr[2],placeholder:"App Version-全部",optionFilterProp:"children"},on:{focus:function(t){return e.focusFun(2)},blur:function(t){return e.blurFun()},mouseenter:function(t){return e.mouseenterFun(2)},mouseleave:function(t){return e.mouseleaveFun()},change:e.appVersionsChange},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return n("div",{},[n("v-nodes",{attrs:{vnodes:t}}),n("a-divider",{staticClass:"select-all-divider"}),n("div",{staticClass:"select-all-div",on:{mousedown:function(e){return e.preventDefault()}}},[n("span",{staticClass:"select-all-span"},[e._v(e._s(e.appVersions.length)+"/"+e._s(e.canSelectAllAppVersion.length))]),n("Button",{attrs:{type:"primary"},on:{click:function(t){e.appVersions=e.canSelectAllAppVersion}}},[e._v("全选")])],1)],1)}}]),model:{value:e.appVersions,callback:function(t){e.appVersions=t},expression:"appVersions"}},e._l(e.canSelectAllAppVersion,(function(t){return n("Option",{key:t,attrs:{value:t}},[e._v(e._s(t)+"\n      ")])})),1),n("a-select",{staticClass:"inline-width",staticStyle:{"font-size":"12px"},attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"",autoClearSearchValue:!1,"max-tag-count":this.maxTagArr[3],"max-tag-text-length":this.maxTagTextArr[3],placeholder:"国家-全部",optionFilterProp:"children"},on:{focus:function(t){return e.focusFun(3)},blur:function(t){return e.blurFun()},mouseenter:function(t){return e.mouseenterFun(3)},mouseleave:function(t){return e.mouseleaveFun()}},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return n("div",{},[n("v-nodes",{attrs:{vnodes:t}}),n("a-divider",{staticClass:"select-all-divider"}),n("div",{staticClass:"select-all-div",on:{mousedown:function(e){return e.preventDefault()}}},[n("span",{staticClass:"select-all-span"},[e._v(e._s(e.countries.length)+"/"+e._s(e.allCountries.length))]),n("Button",{attrs:{type:"primary"},on:{click:function(t){e.countries=e.allCountries.map((function(e){return e.country_id}))}}},[e._v("全选")])],1)],1)}}]),model:{value:e.countries,callback:function(t){e.countries=t},expression:"countries"}},e._l(e.allCountries,(function(t){return n("Option",{key:t.country_id,attrs:{value:t.country_id}},[e._v(e._s(t.country_name+"("+t.country_id+")")+"\n      ")])})),1),n("a-select",{staticClass:"inline-width",staticStyle:{"font-size":"12px"},attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"",autoClearSearchValue:!1,"max-tag-count":this.maxTagArr[4],"max-tag-text-length":this.maxTagTextArr[4],placeholder:"广告类型-全部",optionFilterProp:"children"},on:{focus:function(t){return e.focusFun(4)},blur:function(t){return e.blurFun()},change:e.adTypeChange,mouseenter:function(t){return e.mouseenterFun(4)},mouseleave:function(t){return e.mouseleaveFun()}},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return n("div",{},[n("v-nodes",{attrs:{vnodes:t}}),n("a-divider",{staticClass:"select-all-divider"}),n("div",{staticClass:"select-all-div",on:{mousedown:function(e){return e.preventDefault()}}},[n("span",{staticClass:"select-all-span"},[e._v(e._s(e.adTypes.length)+"/"+e._s(e.canSelectAllAdType.length))]),n("Button",{attrs:{type:"primary"},on:{click:function(t){e.adTypes=e.canSelectAllAdType}}},[e._v("全选")])],1)],1)}}]),model:{value:e.adTypes,callback:function(t){e.adTypes=t},expression:"adTypes"}},e._l(e.canSelectAllAdType,(function(t){return n("Option",{key:t,attrs:{value:t}},[e._v(e._s(t)+"\n      ")])})),1),n("a-select",{staticClass:"inline-width",staticStyle:{"font-size":"12px"},attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"",autoClearSearchValue:!1,"max-tag-count":this.maxTagArr[5],"max-tag-text-length":this.maxTagTextArr[5],placeholder:"广告位-全部",optionFilterProp:"children"},on:{focus:function(t){return e.focusFun(5)},blur:function(t){return e.blurFun()},mouseenter:function(t){return e.mouseenterFun(5)},mouseleave:function(t){return e.mouseleaveFun()},change:e.placementsChange},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return n("div",{},[n("v-nodes",{attrs:{vnodes:t}}),n("a-divider",{staticClass:"select-all-divider"}),n("div",{staticClass:"select-all-div",on:{mousedown:function(e){return e.preventDefault()}}},[n("span",{staticClass:"select-all-span"},[e._v(e._s(e.placements.length)+"/"+e._s(e.canSelectAllPlacement.length))]),n("Button",{attrs:{type:"primary"},on:{click:function(t){e.placements=e.canSelectAllPlacement}}},[e._v("全选")])],1)],1)}}]),model:{value:e.placements,callback:function(t){e.placements=t},expression:"placements"}},e._l(e.canSelectAllPlacement,(function(t){return n("Option",{key:t,attrs:{value:t}},[e._v(e._s(t)+"\n      ")])})),1),n("a-select",{staticClass:"inline-width",staticStyle:{"font-size":"12px"},attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"",autoClearSearchValue:!1,"max-tag-count":this.maxTagArr[6],"max-tag-text-length":this.maxTagTextArr[6],placeholder:"关卡-全部",optionFilterProp:"children"},on:{focus:function(t){return e.focusFun(6)},blur:function(t){return e.blurFun()},mouseenter:function(t){return e.mouseenterFun(6)},mouseleave:function(t){return e.mouseleaveFun()}},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return n("div",{},[n("v-nodes",{attrs:{vnodes:t}}),n("a-divider",{staticClass:"select-all-divider"}),n("div",{staticClass:"select-all-div",on:{mousedown:function(e){return e.preventDefault()}}},[n("span",{staticClass:"select-all-span"},[e._v(e._s(e.levels.length)+"/"+e._s(e.canSelectAllLevel.length))]),n("Button",{attrs:{type:"primary"},on:{click:function(t){e.levels=e.canSelectAllLevel}}},[e._v("全选")])],1)],1)}}]),model:{value:e.levels,callback:function(t){e.levels=t},expression:"levels"}},e._l(e.canSelectAllLevel,(function(t){return n("Option",{key:t,attrs:{value:t}},[e._v(e._s(t)+"\n      ")])})),1),n("DatePicker",{staticClass:"inline-width",attrs:{type:"daterange",options:e.daterangeoption,clearable:!1,placement:"bottom-start",placeholder:"选择日期范围"},model:{value:e.rangeDates,callback:function(t){e.rangeDates=t},expression:"rangeDates"}}),n("Button",{attrs:{type:"primary",disabled:e.loading},on:{click:e.handleSubmit}},[e._v("Apply Filter")])],1),n("div",{staticClass:"optionsContents",attrs:{id:"optionsContent"}},e._l(e.tmpOptions,(function(t){return n("li",{key:t},[e._v(e._s(t))])})),0)])},l=[],o=(n("f400"),n("20d6"),n("1c4c"),n("55dd"),n("4f7f"),n("2f62")),c=n("90de"),u=n("9839"),p=n("4b65"),f=(n("1ef0"),n("1157")),h=n.n(f);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={name:"page-filter",components:{ASelect:u["d"],Option:u["d"].Option,VNodes:{functional:!0,render:function(e,t){return t.props.vnodes}}},data:function(){return{projects:[],apps:[],countries:[],appVersions:[],adTypes:[],placements:[],levels:[],allFilters:[],allProjects:[],canSelectAllApp:[],canSelectAllAppVersion:[],canSelectAllAdType:[],canSelectAllPlacement:[],canSelectAllLevel:[],allApp:[],allAppVersion:[],allCountries:[],allAdTypes:[],allPlacement:[],allLevel:[],daterangeoption:{},rangeDates:[],maxTagArr:[1,1,1,1,1,1,1,1],maxTagTextArr:[20,20,20,20,20,20,20],tmpAllOptions:[],tmpOptions:[],mark:0}},props:{loading:{type:Boolean,default:function(){return!1}}},methods:m(m({},Object(o["b"])(["getMonetizationPlacementSdkFilterData","getAllCountry"])),{},{filterAppsVersionsLevelsPlacements:function(e,t,n,a,i){this.filterPlacement(e,t,n,a),this.filterLevel(e,t,n),this.filterAppVersion(e,t),this.filterApp(e)},filterApp:function(e){if(this.canSelectAllApp=[].concat(this.allApp),e.length>0){this.apps=[];var t=new Set(e);this.canSelectAllApp=this.uniqueApp(Array.from(new Set(this.allFilters.filter((function(e){return t.has(e.project)})).map((function(e){return{app_id:e.app_id,app_name:e.app_name}})))).sort((function(e,t){return e.app_name.localeCompare(t.app_name)}))),this.filterAppVersion(e,this.apps)}},filterAppVersion:function(e,t){this.canSelectAllAppVersion=[].concat(this.allAppVersion);var n=[].concat(this.allFilters);if(e.length>0){this.appVersions=[];var a=new Set(e);n=this.allFilters.filter((function(e){return a.has(e.project)})),this.canSelectAllAppVersion=Array.from(new Set(n.map((function(e){return e.app_version})))).filter((function(e){return void 0!==e})).sort((function(e,t){return e.localeCompare(t)}))}if(t.length>0){this.appVersions=[];var i=new Set(t);n=n.filter((function(e){return i.has(e.app_id)})),this.canSelectAllAppVersion=Array.from(new Set(n.map((function(e){return e.app_version})))).filter((function(e){return void 0!==e})).sort((function(e,t){return e.localeCompare(t)}))}this.filterAdType(this.projects,this.apps,this.appVersions)},filterAdType:function(e,t,n){this.canSelectAllAdType=[].concat(this.allAdTypes);var a=[].concat(this.allFilters);if(e.length>0){this.adTypes=[];var i=new Set(e);a=this.allFilters.filter((function(e){return i.has(e.project)})),this.canSelectAllAdType=Array.from(new Set(a.map((function(e){return e.ad_type})))).filter((function(e){return void 0!==e})).sort((function(e,t){return e.localeCompare(t)}))}if(t.length>0){this.adTypes=[];var r=new Set(t);a=a.filter((function(e){return r.has(e.app_id)})),this.canSelectAllAdType=Array.from(new Set(a.map((function(e){return e.ad_type})))).filter((function(e){return void 0!==e})).sort((function(e,t){return e.localeCompare(t)}))}if(n.length>0){this.adTypes=[];var s=new Set(n);a=a.filter((function(e){return s.has(e.app_version)})),this.canSelectAllAdType=Array.from(new Set(a.map((function(e){return e.ad_type})))).filter((function(e){return void 0!==e})).sort((function(e,t){return e.localeCompare(t)}))}this.filterPlacement(this.projects,this.apps,this.appVersions,this.adTypes)},filterPlacement:function(e,t,n,a){this.canSelectAllPlacement=[].concat(this.allPlacement);var i=[].concat(this.allFilters);if(e.length>0){this.placements=[];var r=new Set(e);i=this.allFilters.filter((function(e){return r.has(e.project)})),this.canSelectAllPlacement=Array.from(new Set(i.map((function(e){return e.ad_placement})))).filter((function(e){return void 0!==e})).sort((function(e,t){return e.localeCompare(t)}))}if(t.length>0){this.placements=[];var s=new Set(t);i=i.filter((function(e){return s.has(e.app_id)})),this.canSelectAllPlacement=Array.from(new Set(i.map((function(e){return e.ad_placement})))).filter((function(e){return void 0!==e})).sort((function(e,t){return e.localeCompare(t)}))}if(n.length>0){this.placements=[];var l=new Set(n);i=i.filter((function(e){return l.has(e.app_version)})),this.canSelectAllPlacement=Array.from(new Set(i.map((function(e){return e.ad_placement})))).filter((function(e){return void 0!==e})).sort((function(e,t){return e.localeCompare(t)}))}if(a.length>0){this.placements=[];var o=new Set(a);i=i.filter((function(e){return o.has(e.ad_type)})),this.canSelectAllPlacement=Array.from(new Set(i.map((function(e){return e.ad_placement})))).filter((function(e){return void 0!==e})).sort((function(e,t){return e.localeCompare(t)}))}this.filterLevel(this.projects,this.apps,this.appVersions,this.adTypes,this.placements)},filterLevel:function(e,t,n,a,i){this.canSelectAllLevel=[].concat(this.allLevel);var r=[].concat(this.allFilters);if(e.length>0){this.levels=[];var s=new Set(e);r=this.allFilters.filter((function(e){return s.has(e.project)})),this.canSelectAllLevel=Array.from(new Set(r.map((function(e){return e.level})))).filter((function(e){return void 0!==e})).sort((function(e,t){return e.localeCompare(t)}))}if(t.length>0){this.levels=[];var l=new Set(t);r=r.filter((function(e){return l.has(e.app_id)})),this.canSelectAllLevel=Array.from(new Set(r.map((function(e){return e.level})))).filter((function(e){return void 0!==e})).sort((function(e,t){return e.localeCompare(t)}))}if(n.length>0){this.levels=[];var o=new Set(n);r=r.filter((function(e){return o.has(e.app_version)})),this.canSelectAllLevel=Array.from(new Set(r.map((function(e){return e.level})))).filter((function(e){return void 0!==e})).sort((function(e,t){return e.localeCompare(t)}))}if(a.length>0){this.levels=[];var c=new Set(a);r=r.filter((function(e){return c.has(e.ad_type)})),this.canSelectAllLevel=Array.from(new Set(r.map((function(e){return e.level})))).filter((function(e){return void 0!==e})).sort((function(e,t){return e.localeCompare(t)}))}if(i.length>0){this.levels=[];var u=new Set(i);r=r.filter((function(e){return u.has(e.ad_placement)})),this.canSelectAllLevel=Array.from(new Set(r.map((function(e){return e.level})))).filter((function(e){return void 0!==e})).sort((function(e,t){return e.localeCompare(t)}))}},projectsChange:function(e){this.filterApp(e)},appsChange:function(e){this.filterAppVersion(this.projects,e)},appVersionsChange:function(e){this.filterAdType(this.projects,this.apps,e)},adTypeChange:function(e){this.filterPlacement(this.projects,this.apps,this.appVersions,e)},placementsChange:function(e){this.filterLevel(this.projects,this.apps,this.appVersions,this.adTypes,e)},handleSubmit:function(e){var t={projects:this.projects,apps:this.apps,appVersions:this.appVersions,countries:this.countries,adTypes:this.adTypes,placements:this.placements,levels:this.levels,rangeDates:this.rangeDates};this.$emit("on-filter-apply",t)},maxTagCountfun:function(e){return this.maxTagCountObj&&this.maxTagCountObj[e]?this.maxTagCountObj[e]:1},focusFun:function(e){this.mark=1,h()("#optionsContent").length&&h()("#optionsContent").css({display:"none"}),this.maxTagArr=[1,1,1,1,1,1,1,1],this.maxTagTextArr=[20,20,20,20,20,20,20];var t=this;setTimeout((function(){t.maxTagArr.splice(e,0,10),t.maxTagTextArr.splice(e,0,100)}),500)},blurFun:function(){this.mark=0,this.maxTagArr.findIndex((function(e){return 10===e}))>=0&&(this.maxTagArr=[1,1,1,1,1,1,1,1],this.maxTagTextArr=[20,20,20,20,20,20,20]),this.setItemValues()},mouseenterFun:function(e){if(1!==this.mark){this.tmpOptions=this.tmpAllOptions[e];var t=Object(p["g"])(this.$refs["filter"].$el.clientWidth,e),n=document.getElementById("optionsContent");h()("#optionsContent").length&&this.tmpOptions&&this.tmpOptions.length>0&&n&&(h()("#optionsContent").css({display:"block",left:t.left+"px"}),n.style.setProperty("top",t.top+"px","important"))}},mouseleaveFun:function(){this.hideContentItem(),this.setItemValues()},setItemValues:function(){var e=this;this.tmpAllOptions[0]=this.projects;var t=[];this.apps&&this.apps.map((function(n,a){e.canSelectAllApp&&e.canSelectAllApp.map((function(e,a){n===e.app_id&&t.push(e.app_name)}))})),this.tmpAllOptions[1]=t;var n=[];this.appVersions&&this.appVersions.map((function(t,a){e.allAppVersion&&e.allAppVersion.map((function(e,a){e===t&&n.push(e)}))})),this.tmpAllOptions[2]=n;var a=[];this.countries&&this.countries.map((function(t,n){e.allCountries&&e.allCountries.map((function(e,n){t===e.country_id&&a.push(e.country_name+"("+t+")")}))})),this.tmpAllOptions[3]=a;var i=[];this.adTypes&&this.adTypes.map((function(t,n){e.allAdTypes&&e.allAdTypes.map((function(e,n){t===e&&i.push(e)}))})),this.tmpAllOptions[4]=i;var r=[];this.placements&&this.placements.map((function(t,n){e.allPlacement&&e.allPlacement.map((function(e,n){e===t&&r.push(e)}))})),this.tmpAllOptions[5]=r;var s=[];this.levels&&this.levels.map((function(t,n){e.allLevel&&e.allLevel.map((function(e,n){e===t&&s.push(e)}))})),this.tmpAllOptions[6]=s},getFilter:function(){return{projects:this.projects,apps:this.apps,appVersions:this.appVersions,countries:this.countries,adTypes:this.adTypes,placements:this.placements,levels:this.levels,rangeDates:[Object(p["c"])(this.rangeDates[0]),Object(p["c"])(this.rangeDates[1])],time_type:Object(p["i"])(this.rangeDates)}},setFilter:function(e){this.projects=e.projects,this.apps=e.apps,this.appVersions=e.appVersions,this.countries=e.countries,this.adTypes=e.adTypes,this.placements=e.placements,this.levels=e.levels,this.rangeDates=e.rangeDates,e.time_type&&(this.rangeDates=Object(c["f"])(e.time_type))},hideContentItem:function(){h()("#optionsContent").length&&h()("#optionsContent").css({display:"none"})},uniqueApp:function(e){var t=new Map;return e.filter((function(e){return!t.has(e.app_id)&&t.set(e.app_id,1)}))}}),mounted:function(){var e=this;this.daterangeoption=Object(c["b"])(),this.daterangeoption=Object(c["b"])(),Promise.all([this.getMonetizationPlacementSdkFilterData(),this.getAllCountry()]).then((function(t){e.allFilters=t[0],e.allCountries=t[1],e.allProjects=Array.from(new Set(t[0].map((function(e){return e.project})))).filter((function(e){return void 0!==e})).sort((function(e,t){return e.localeCompare(t)})),e.allApp=e.uniqueApp(Array.from(new Set(t[0].map((function(e){return{app_id:e.app_id,app_name:e.app_name}})))).filter((function(e){return void 0!==e})).sort((function(e,t){return e.app_name.localeCompare(t.app_name)}))),e.allAppVersion=Array.from(new Set(t[0].map((function(e){return e.app_version})))),e.allAdTypes=Array.from(new Set(t[0].map((function(e){return e.ad_type})))),e.allPlacement=Array.from(new Set(t[0].map((function(e){return e.ad_placement})))),e.allLevel=Array.from(new Set(t[0].map((function(e){return e.level})))),e.canSelectAllApp=[].concat(e.allApp).sort((function(e,t){return e.app_name.localeCompare(t.app_name)})),e.canSelectAllAppVersion=[].concat(e.allAppVersion.filter((function(e){return void 0!==e}))).sort((function(e,t){return e.localeCompare(t)})),e.canSelectAllAdType=[].concat(e.allAdTypes.filter((function(e){return void 0!==e}))).sort((function(e,t){return e.localeCompare(t)})),e.canSelectAllPlacement=[].concat(e.allPlacement.filter((function(e){return void 0!==e}))).sort((function(e,t){return e.localeCompare(t)})),e.canSelectAllLevel=[].concat(e.allLevel.filter((function(e){return void 0!==e}))).sort((function(e,t){return e.localeCompare(t)}))}))},created:function(){this.rangeDates=Object(c["f"])("1 week")}},g=v,y=(n("ab5a"),n("2877")),b=Object(y["a"])(g,s,l,!1,null,"b2d67d80",null),S=b.exports,A=n("f0e6"),_=n("bdcb"),w=(n("ca62"),n("4481"));function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x={name:"profit-loss",components:{PageFilter:S,TabsList:A["a"],TableData:_["a"]},data:function(){return{inited:!1,rowGutter:20,filteredCountry:!1,defaultDimensions:["date"],knownDimensions:["date","app_name","app_version","country","ad_type","ad_placement","level","uuid"],knownMetrics:["adbutton_click_counts","adshow_success_counts","adshow_fail_counts","click_ad_counts","rewarded_counts","estimated_revenue","ecpm"],inFields:[["projects","project"],["apps","app_id"],["appVersions","app_version"],["countries","country"],["adTypes","ad_type"],["placements","ad_placement"],["levels","level"]],metrics:[],currFilterApply:{},currSortField:{},currDimensions:[],currMetrics:[],currDownloadParams:{},currPageIndex:1,currPageSize:100,pageReset:!1,tableLoading:!0,downloadLoading:!1,syncDimensions:[],syncMetrics:[],checkStatus:!1,previewStatus:!1,visible:!0,tabPaneData:[{label:"name1",value:"总收入"},{label:"name2",value:"总花费"},{label:"name3",value:"ROAS"},{label:"name4",value:"买量CPI"},{label:"name5",value:"总ARPU"},{label:"name6",value:"广告收入"},{label:"name7",value:"ECPM"},{label:"name8",value:"广告ARPU"},{label:"name9",value:"人均展示次数"},{label:"name10",value:"内购收入"},{label:"name11",value:"内购ARPU"},{label:"name12",value:"内购ARPPU"},{label:"name13",value:"人均内购次数"},{label:"name14",value:"付费率"},{label:"name15",value:"次留"},{label:"name16",value:"用户在线时长"},{label:"name17",value:"DAU"},{label:"name18",value:"DNU"}]}},computed:D(D({},Object(o["d"])({field_formaters:function(e){return e.dashboard_field.field_formaters},monetization_placement_sdk_fields:function(e){return e.dashboard_field.monetization_placement_sdk_fields},allApp:function(e){return e.app_reporting.allApp},tableData:function(e){if(!0===this.inited)return e.monetization_placement_sdk.monetizationPlacementSdkTableData.data},totalData:function(e){if(!0===this.inited){var t=e.monetization_placement_sdk.monetizationPlacementSdkTotalData.data;if(t&&t.length>0)return t[0]}},pageData:function(e){if(!0===this.inited){var t=e.monetization_placement_sdk.monetizationPlacementSdkTableData,n={page_size:t.page_size,has_next:t.has_next,has_prev:t.has_prev,total_num:t.total_num};return n}}})),{},{allDimensions:function(){return Object(p["j"])(this.monetization_placement_sdk_fields,this.knownDimensions)},allMetrics:function(){return Object(p["j"])(this.monetization_placement_sdk_fields,this.knownMetrics)},days:function(){var e=Object(p["h"])(this.currFilterApply);return e}}),methods:D(D({},Object(o["b"])(["getMonetizationPlacementSdkData","getMonetizationPlacementSdkTotalData","setMonetizationPlacementSdkDownloadUrl"])),{},{onFilterApply:function(e){this.currFilterApply=JSON.parse(JSON.stringify(e)),this.currSortField={},this.currDimensions=JSON.parse(JSON.stringify(this.currDimensions)),this.currFilterApply.countries&&this.currFilterApply.countries.length>0?this.filteredCountry=!0:this.filteredCountry=!1,this.currPageIndex=1,this.pageReset=!0,this.updatePageData(1)},handleSortChange:function(e,t,n){this.currPageIndex=1,this.currSortField={key:e.key,order:e.order},this.pageReset=!0,this.updateTableData(2)},handleTableRefresh:function(e,t){if(this.currDimensions=JSON.parse(JSON.stringify(e)),0===this.currDimensions.length){this.currDimensionsLength=0;var n=JSON.stringify(this.knownDimensions);this.currDimensions=JSON.parse(n)}else this.currDimensionsLength=1;if(this.currMetrics=t,this.currSortField={},this.currMetrics=t,this.metrics=t,0===this.currMetrics.length){var a=JSON.stringify(this.knownMetrics);this.currMetrics=JSON.parse(a),this.metrics=JSON.parse(a)}this.currPageIndex=1,this.updateTableData(1),this.updateTotalData(),this.pageReset=!0},handleDimensionsChange:function(e){this.syncDimensions=JSON.parse(JSON.stringify(e))},metricsOk:function(e){this.currMetrics=e,this.metrics=e,this.syncMetrics=JSON.parse(JSON.stringify(e)),this.metrics.length<=0&&(this.metrics=JSON.parse(JSON.stringify(this.knownMetrics)),this.syncMetrics=JSON.parse(JSON.stringify(this.knownMetrics)))},download:function(e){this.currDownloadParams=JSON.parse(JSON.stringify(e)),this.downloadFile()},pageChange:function(e){this.currPageIndex=e,this.updateTableData(1)},pageSizeChange:function(e){this.currPageSize=e,this.pageReset=!0,this.updateTableData(1,1)},setDefaultDimensionsAndMetrics:function(){var e=JSON.stringify(this.defaultDimensions);this.currDimensions=JSON.parse(e),this.syncDimensions=JSON.parse(e),e=JSON.stringify(this.knownMetrics),this.metrics=JSON.parse(e),this.currMetrics=JSON.parse(e),this.syncMetrics=JSON.parse(e)},updateTableData:function(e,t){var n=this;this.tableLoading=!0;var a=this.wrapTableReqParams(e,t);this.getMonetizationPlacementSdkData(a).then((function(e){n.tableLoading=!1})).catch((function(e){n.tableLoading=!1,n.showError(e)}))},updateTotalData:function(){var e=this,t=this.wrapTotalReqParams();t.group_by&&this.getMonetizationPlacementSdkTotalData(t).then((function(e){})).catch((function(t){return e.showError(t)}))},updatePageData:function(e){var t=this;this.tableLoading=!0,Promise.all([this.getMonetizationPlacementSdkData(this.wrapTableReqParams(e)),this.getMonetizationPlacementSdkTotalData(this.wrapTotalReqParams())]).then((function(e){t.inited=!0,t.tableLoading=!1})).catch((function(e){t.tableLoading=!1,t.showError(e)}))},downloadFile:function(){var e=this;this.downloadLoading=!0;var t=this.wrapDownloadReqParams();this.setMonetizationPlacementSdkDownloadUrl(t).then((function(t){e.downloadLoading=!1;var n=document.createElement("a");n.href=t.url,n.click()})).catch((function(t){e.downloadLoading=!1,e.showError(t)}))},wrapTableReqParams:function(e,t){var n={time_range:Object(p["r"])(this.currFilterApply),page:JSON.stringify({count:2===e||1===t?1:this.currPageIndex,size:this.currPageSize}),filtering:Object(p["m"])(this.currFilterApply,this.inFields),group_by:Object(p["n"])(this.currDimensions),fields:Object(p["l"])(this.knownMetrics),sort:Object(p["p"])(this.currSortField,e,this.currDimensions,this.currDimensionsLength)};return n},wrapTotalReqParams:function(){var e={time_range:Object(p["r"])(this.currFilterApply),filtering:Object(p["m"])(this.currFilterApply,this.inFields),fields:Object(p["l"])(this.knownMetrics)};return e},wrapDownloadReqParams:function(){var e={time_range:Object(p["r"])(this.currFilterApply),filtering:Object(p["m"])(this.currFilterApply,this.inFields),group_by:Object(p["n"])(this.currDownloadParams.dimensions,!0),fields:Object(p["l"])(this.currDownloadParams.metrics),file_format:this.currDownloadParams.fileFormat};return e},showError:function(e){this.$Modal.error({title:"Error",content:e})},pageResetFalse:function(){this.pageReset=!1},changeCheckbox:function(e){this.checkStatus=e},previewFun:function(){this.visible=!1,this.previewStatus=!0;var e=document.getElementsByClassName("contentsItem");if(h()("#mainItem").length&&h()("#closeBtn").length&&e){var t=document.body.clientWidth;h()("#mainItem").css({width:t+"px",height:"100vh",background:"rgba(0,0,0,.8)",position:"fixed",top:"0",left:"0",zIndex:"1000"}),h()("#closeBtn").css({position:"fixed",top:"10%",right:"0",zIndex:"1000",marginTop:"12px",marginRight:"12px",display:"block"}),e[0].style.top="8%"}},onSelectPageInfo:function(e){var t=JSON.parse(e);this.$refs.pageFilter.setFilter(t.filter),this.checkStatus=t.checkStatus,this.$refs.table.$refs.childTableDimensions.setData(t.dimensions),this.currDimensions=JSON.parse(JSON.stringify(t.dimensions.dimensions.length>0?t.dimensions.dimensions:this.knownDimensions)),this.metrics=JSON.parse(JSON.stringify(t.dimensions.metrics.length>0?t.dimensions.metrics:this.knownMetrics)),t.filter.time_type&&(t.filter.rangeDates=Object(c["f"])(t.filter.time_type)),this.onFilterApply(t.filter)},onGetPageInfo:function(e){var t=this.$refs.pageFilter.getFilter(),n=this.$refs.table.$refs.childTableDimensions.getData(),a=JSON.stringify({filter:t,checkStatus:this.checkStatus,dimensions:n});w["a"].$emit("setPageInfo",e,a)},closeFun:function(){this.visible=!0,this.previewStatus=!1,h()("#mainItem").length&&h()("#closeBtn").length&&(h()("#mainItem").css({width:"auto",height:"auto",position:"static",background:"#ffffff"}),h()("#closeBtn").css({display:"none"}))}}),mounted:function(){this.setDefaultDimensionsAndMetrics(),this.updatePageData();var e=this;w["a"].$on("selectPageInfo",(function(t){e.onSelectPageInfo(t)})),w["a"].$on("getPageInfo",(function(t){e.onGetPageInfo(t)}))},beforeDestroy:function(){w["a"].$off("selectPageInfo"),w["a"].$off("getPageInfo")}},C=x,T=(n("0c72"),Object(y["a"])(C,a,i,!1,null,"a1abff26",null));t["default"]=T.exports},f0e6:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",["profitLoss"===e.pageRooter?n("RadioGroup",{staticClass:"radioWapper",model:{value:e.tabItem,callback:function(t){e.tabItem=t},expression:"tabItem"}},e._l(e.tabPaneData,(function(t,a){return n("Radio",{key:a,staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{label:t.label}},[e._v(e._s(t.value))])})),1):e._e(),"profitLoss"===e.pageRooter?n("Divider"):e._e(),e._t("refresh"),n("Tabs",{class:["profitLoss"===e.pageRooter?"hideTabItem":"tabItems"],attrs:{animated:!1},model:{value:e.tabItem,callback:function(t){e.tabItem=t},expression:"tabItem"}},e._l(e.tabPaneData,(function(t,a){return n("TabPane",{key:a,attrs:{label:t.value,name:t.label}},[t.label===e.tabItem?n("group-line-chart",{ref:"child",refInFor:!0,attrs:{"field-formaters":e.fieldFormaters,"known-fields":e.knownFields,"chart-data":e.lineChartData[a],status:e.checkStatus,previewStatus:e.previewStatus,"money-type":e.moneyType}}):e._e()],1)})),1)],2)},i=[],r=n("88e6"),s={name:"tabs-list",components:{GroupLineChart:r["a"]},props:{tabValue:{type:String,default:function(){return"name1"}},pageRooter:{type:String,default:function(){return""}},fieldFormaters:{type:Object,default:function(){return{}}},knownFields:{type:Array,default:function(){return[]}},lineChartData:{type:Array,default:function(){return[]}},tabPaneData:{type:Array,default:function(){return[]}},checkStatus:{type:Boolean,default:function(){return!1}},previewStatus:{type:Boolean,default:function(){return!1}},moneyType:{type:String,default:function(){return null}}},data:function(){return{tabItem:"name1"}},methods:{}},l=s,o=(n("64c1"),n("2877")),c=Object(o["a"])(l,a,i,!1,null,null,null);t["a"]=c.exports}}]);