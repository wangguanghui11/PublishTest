(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bab15"],{"37fa":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Card",[a("fruit-console-tables",{ref:"tables",attrs:{topadd:"",batchDelete:!1,stripe:"",editable:"",searchable:"","search-place":"top",loading:e.loading,columns:e.columns,selectData:[{key:"media_source",value:e.allMediaType}],hideDelete:"hideDelBtn"},on:{"on-add":e.handleAdd,"on-delete":e.handleDelete,"on-edit":e.handleEdit},model:{value:e.tableData,callback:function(t){e.tableData=t},expression:"tableData"}}),a("Modal",{attrs:{"footer-hide":!0,width:450},model:{value:e.showWindowBDrawer,callback:function(t){e.showWindowBDrawer=t},expression:"showWindowBDrawer"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:e.formHeadIcon,size:18}}),a("b",[e._v(" "+e._s(e.formHeaderName))])],1),a("div",{staticStyle:{"margin-right":"30px"}},[a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":110}},[a("FormItem",{attrs:{label:"Media Source",prop:"media_source"}},[a("Select",{attrs:{disabled:e.mediaSourceDisabled,placeholder:"Select Media Source"},on:{"on-change":e.getMediaType},model:{value:e.formValidate.media_source,callback:function(t){e.$set(e.formValidate,"media_source",t)},expression:"formValidate.media_source"}},e._l(e.allMediaType,(function(t){return a("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1),e.emailDisplay?a("FormItem",{attrs:{label:"Login Email",prop:"login_email"}},[a("Input",{attrs:{placeholder:"请输入登录邮箱"},model:{value:e.formValidate.login_email,callback:function(t){e.$set(e.formValidate,"login_email",t)},expression:"formValidate.login_email"}})],1):e._e(),e.accountIdDisplay?a("FormItem",{attrs:{label:"Account ID  ",prop:"account_id"}},[a("Input",{attrs:{placeholder:e.account_id_defaultVal},model:{value:e.formValidate.account_id,callback:function(t){e.$set(e.formValidate,"account_id",t)},expression:"formValidate.account_id"}})],1):e._e(),e.apiKeyDisplay?a("FormItem",{attrs:{label:"API key",prop:"api_key"}},[a("Input",{attrs:{placeholder:"请输入api key"},model:{value:e.formValidate.api_key,callback:function(t){e.$set(e.formValidate,"api_key",t)},expression:"formValidate.api_key"}})],1):e._e(),e.tokenDisplay?a("FormItem",{attrs:{label:"Token",prop:"token"}},[a("Input",{attrs:{placeholder:e.token_defaultVal},model:{value:e.formValidate.token,callback:function(t){e.$set(e.formValidate,"token",t)},expression:"formValidate.token"}})],1):e._e(),e.secretDisplay?a("FormItem",{attrs:{label:"Secret",prop:"secret"}},[a("Input",{attrs:{placeholder:e.secret_defaultVal},model:{value:e.formValidate.secret,callback:function(t){e.$set(e.formValidate,"secret",t)},expression:"formValidate.secret"}})],1):e._e(),e.clientIdDisplay?a("FormItem",{attrs:{label:"Client ID ",prop:"client_id"}},[a("Input",{attrs:{placeholder:"请输入client id  "},model:{value:e.formValidate.client_id,callback:function(t){e.$set(e.formValidate,"client_id",t)},expression:"formValidate.client_id"}})],1):e._e(),e.appIdDisplay?a("FormItem",{attrs:{label:"APP ID ",prop:"app_id"}},[a("Input",{attrs:{placeholder:"请输入app id  "},model:{value:e.formValidate.app_id,callback:function(t){e.$set(e.formValidate,"app_id",t)},expression:"formValidate.app_id"}})],1):e._e(),e.tSecretDisplay?a("FormItem",{attrs:{label:"Token Secret ",prop:"token_secret"}},[a("Input",{attrs:{placeholder:"请输入token secret "},model:{value:e.formValidate.token_secret,callback:function(t){e.$set(e.formValidate,"token_secret",t)},expression:"formValidate.token_secret"}})],1):e._e(),a("FormItem",{staticStyle:{"margin-bottom":"5px"}},[a("Button",{staticStyle:{float:"right","margin-left":"8px"},attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formValidate")}}},[e._v("Submit")]),a("Button",{staticStyle:{float:"right"},on:{click:function(t){return e.handleReset("formValidate")}}},[e._v("Reset")])],1)],1)],1)])],1)],1)},r=[],o=(a("8e6e"),a("456d"),a("ac6a"),a("5df3"),a("7f7f"),a("ade3")),n=a("cd9b"),l=a("7d75"),d=a("2f62");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u={name:"media-account",components:{FruitConsoleTables:n["a"],DragDrawer:l["a"]},data:function(){return{columns:[{title:"序号",key:"id",fixed:"left",width:60,render:function(e,t){var a=t?t.index+1:"-";return e("div",a)}},{title:"Media Source",key:"media_source",searchable:!0,isSelect:!0,fixed:"left",width:120},{title:"Login Email",key:"login_email",searchable:!0,fixed:"left",width:180,render:function(e,t){var a=t.row.login_email&&""!==t.row.login_email?t.row.login_email:"-";return e("div",a)}},{title:"(Manager）Account ID",key:"account_id",searchable:!0,fixed:"left",width:180,render:function(e,t){var a=t.row.account_id&&""!==t.row.account_id?t.row.account_id:"-";return e("div",a)}},{title:"Token",key:"token",width:130,render:function(e,t){var a=t.row.token&&""!==t.row.token?t.row.token:"-";return e("div",a)}},{title:"API Key",key:"api_key",width:130,render:function(e,t){var a=t.row.api_key&&""!==t.row.api_key?t.row.api_key:"-";return e("div",a)}},{title:"Secret",key:"secret",width:130,render:function(e,t){var a=t.row.secret&&""!==t.row.secret?t.row.secret:"-";return e("div",a)}},{title:"Client ID",key:"client_id",width:130,render:function(e,t){var a=t.row.client_id&&""!==t.row.client_id?t.row.client_id:"-";return e("div",a)}},{title:"APP ID",key:"app_id",width:130,render:function(e,t){var a=t.row.app_id&&""!==t.row.app_id?t.row.app_id:"-";return e("div",a)}},{title:"Token Secret",key:"token_secret",width:130,render:function(e,t){var a=t.row.token_secret&&""!==t.row.token_secret?t.row.token_secret:"-";return e("div",a)}},{title:"Last-updated-date",key:"date",width:190},{title:"Operator",key:"edit_user",width:150,render:function(e,t){var a=t&&t.row&&t.row.edit_user&&""!==t.row.edit_user&&" "!==t.row.edit_user?t.row.edit_user:"";return e("div",a)}},{title:"Handle",key:"handle",width:120,options:["edit","delete"]}],tableData:[],allMediaType:[],placement:!1,showWindowBDrawer:!1,width1:300,width2:200,draggable:!0,mediaSourceDisabled:!1,formHeadIcon:"ios-add",formHeaderName:"Add New Account",account_id_defaultVal:"",token_defaultVal:"",secret_defaultVal:"",formValidate:{media_source:"",login_email:"",api_key:"",account_id:"",token:"",secret:"",client_id:"",app_id:"",token_secret:""},rowEvent:{name:"",country_group_id:""},emailDisplay:!1,apiKeyDisplay:!1,accountIdDisplay:!1,tokenDisplay:!1,secretDisplay:!1,clientIdDisplay:!1,appIdDisplay:!1,tSecretDisplay:!1,submitBtn:!1,ruleValidate:{media_source:[{required:!0,message:"Please select the project",trigger:"change"}],login_email:[{required:!0,trigger:"blur",type:"email"}],api_key:[{required:!0,trigger:"blur"}],account_id:[{required:!0,trigger:"blur"}],token:[{required:!0,trigger:"blur"}],secret:[{required:!0,trigger:"blur"}],client_id:[{required:!0,trigger:"blur"}],token_secret:[{required:!0,trigger:"blur"}],app_id:[{required:!0,trigger:"blur"}]},loading:!0}},methods:s(s({},Object(d["b"])(["getMediaAccount","getAllMediaSourceArr","saveMediaAccount","delMediaAccount"])),{},{fun:function(){return"q请叔叔叔叔"},handleSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var a=t.formValidate,i=a.media_source,r=a.login_email,o=a.account_id,n=a.token,l=a.api_key,d=a.secret,c=a.client_id,s=a.app_id,u=a.token_secret,p={media_source:i,login_email:r,account_id:o,token:n,api_key:l,secret:d,client_id:c,app_id:s,token_secret:u};"edit"===t.rowEvent.name&&(p.mediabuy_account_id=t.rowEvent.mediabuy_account_id),t.saveMediaAccount({app:p}).then((function(e){if("edit"===t.rowEvent.name){p.mediabuy_account_id=t.rowEvent.mediabuy_account_id;var a=[];t.tableData&&t.tableData.map((function(t,i){t.mediabuy_account_id!==e.mediabuy_account_id?a.push(t):a.push(e)})),t.tableData=a}else t.tableData.push(e);t.showWindowBDrawer=!1;var i="edit"===t.rowEvent.name?"Update Success!":"Add Success!";t.$Message.success(i);var r=t;setTimeout((function(){r.rowEvent={name:"",country_group_id:""}}),0)})).catch((function(e){t.$Modal.error({title:"Error",content:e.message})}))}}))},handleAdd:function(){this.mediaSourceDisabled=!1,this.$refs["formValidate"].resetFields(),this.formHeadIcon="ios-add",this.formHeaderName="Add New Account",this.dealOptionStatus(),this.showWindowBDrawer=!0},dealOptionStatus:function(){this.formValidate={media_source:"",login_email:"",api_key:"",account_id:"",token:"",secret:"",client_id:"",app_id:"",token_secret:""},this.emailDisplay=!1,this.apiKeyDisplay=!1,this.accountIdDisplay=!1,this.tokenDisplay=!1,this.secretDisplay=!1,this.clientIdDisplay=!1,this.appIdDisplay=!1,this.tSecretDisplay=!1,this.submitBtn=!1},handleReset:function(e){this.$refs[e].resetFields(),this.formValidate.state=!1,this.showWindowBDrawer=!1},handleEdit:function(e){this.mediaSourceDisabled=!0,this.formHeaderName="Update admob info",this.formHeadIcon="ios-create",this.submitAdd=!1,this.showWindowBDrawer=!0,this.getMediaType(e.row.media_source),this.rowEvent={name:"edit",mediabuy_account_id:e.row.mediabuy_account_id},this.formHeaderName="Update New Account",this.$refs["formValidate"].resetFields(),this.formValidate.media_source=e.row.media_source,this.formValidate.login_email=e.row.login_email,this.formValidate.api_key=e.row.api_key,this.formValidate.account_id=e.row.account_id,this.formValidate.token=e.row.token,this.formValidate.secret=e.row.secret,this.formValidate.client_id=e.row.client_id,this.formValidate.app_id=e.row.app_id,this.formValidate.token_secret=e.row.token_secret},handleDelete:function(e){var t=this;this.delMediaAccount({value:e.row}).then((function(e){var a=t.tableData.filter((function(t){return t.mediabuy_account_id!==e.mediabuy_account_id})),i=[];a&&a.map((function(e,t){i.push(e)})),t.tableData=i,t.$Message.success("Delete Success!")})).catch((function(e){t.$Modal.error({title:"Error",content:e.message})}))},getMediaType:function(e){this.emailDisplay=["applovin","unity","vungle","ironsource","tiktok","twitter"].indexOf(e)>-1,this.apiKeyDisplay=["applovin","unity","vungle","twitter"].indexOf(e)>-1,this.accountIdDisplay=["facebook","google","unity"].indexOf(e)>-1,this.tokenDisplay=["facebook","google","ironsource","twitter"].indexOf(e)>-1,this.secretDisplay=["tiktok","google","twitter","ironsource"].indexOf(e)>-1,this.clientIdDisplay=["google"].indexOf(e)>-1,this.appIdDisplay=["tiktok"].indexOf(e)>-1,this.tSecretDisplay=["twitter"].indexOf(e)>-1,this.submitBtn=!0,this.account_id_defaultVal="facebook"===e?"请输入bm id":"google"===e?"请输入mcc id":"unity"===e?"请输入organization core id":"请输入",this.token_defaultVal="ironsource"===e?"请输入refresh token":"twitter"===e?"请输入access token":"请输入developer token",this.secret_defaultVal="google"===e?"请输入client secret":"请输入secret key"}}),computed:{placementComputed:function(){return this.placement?"left":"right"}},mounted:function(){var e=this;Promise.all([this.getAllMediaSourceArr(),this.getMediaAccount()]).then((function(t){e.allMediaType=t[0],e.tableData=t[1],e.loading=!1}))}},p=u,m=a("2877"),f=Object(m["a"])(p,i,r,!1,null,"7f00e929",null);t["default"]=f.exports}}]);