(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-098de5fa"],{"303c":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",[a("page-filter",{ref:"pageFilter",attrs:{loading:t.mainPageLoading,"page-rooter":"abroadCohort"},on:{"on-filter-apply":t.onFilterApply}})],1),a("Layout",{staticStyle:{position:"relative"}},[t.mainPageLoading?a("Spin",{attrs:{size:"large",fix:""}}):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:t.inited&&0===t.appInfos.length&&!t.mainPageLoading,expression:"inited && appInfos.length === 0 && !mainPageLoading"}],staticStyle:{padding:"20px 0","margin-left":"500px","font-size":"initial"}},[t._v("暂无数据")]),a("Sider",{directives:[{name:"show",rawName:"v-show",value:t.inited&&t.appInfos.length>0&&t.showAppState,expression:"inited && appInfos.length > 0 && showAppState"}],staticStyle:{background:"white"},attrs:{width:"200"}},[a("Menu",{ref:"appMenu",attrs:{theme:"light","active-name":t.curApp,mode:"vertical",width:"200"}},t._l(t.appInfos,(function(e){return a("MenuItem",{key:e.id,attrs:{name:e.id},nativeOn:{click:function(a){return t.handleSelectApp(e.id)}}},[a("div",{staticStyle:{"white-space":"normal","word-break":"break-all",overflow:"hidden"}},[t._v(t._s(e.name))])])})),1)],1),a("Content",{directives:[{name:"show",rawName:"v-show",value:t.inited&&t.appInfos.length>0,expression:"inited && appInfos.length > 0"}]},[a("Card",[a("Button",{directives:[{name:"show",rawName:"v-show",value:t.showAppState,expression:"showAppState"}],staticStyle:{width:"40px","margin-top":"-30px","margin-left":"-25px"},on:{click:function(e){return t.showApps(!1)}}},[t._v("<<")]),a("Button",{directives:[{name:"show",rawName:"v-show",value:!t.showAppState,expression:"!showAppState"}],staticStyle:{width:"40px","margin-top":"-30px","margin-left":"-25px"},on:{click:function(e){return t.showApps(!0)}}},[t._v(">>")]),a("Tabs",{on:{"on-click":t.handleSelectDate},model:{value:t.curDate,callback:function(e){t.curDate=e},expression:"curDate"}},t._l(t.appDates,(function(t,e){return a("TabPane",{key:e,attrs:{label:t.start.replace(/-/g,"/")+" - "+t.end.replace(/-/g,"/"),name:String(t.id)}})})),1),a("div",{staticStyle:{"border-bottom":"1px solid red",height:"45px","margin-bottom":"5px"}},[a("div",{staticStyle:{float:"left",width:"40px",height:"40px"}},[t.icon_url?a("img",{staticStyle:{"object-fit":"contain"},attrs:{width:"100%",height:"100%",src:t.icon_url}}):t._e()]),a("h4",{staticStyle:{"margin-left":"20px",float:"left",width:"300px","word-break":"break-all",color:"red"}},[t._v(t._s(t.app_name)+"测试报告(第"+t._s(t.date.round)+"轮)")]),a("Button",{staticStyle:{float:"right",width:"80px"},attrs:{type:"primary"},on:{click:t.handleDownloadPpt}},[t._v("下载PPT")]),a("Button",{staticStyle:{float:"right",width:"80px","margin-right":"20px"},attrs:{type:"primary"},on:{click:t.handleDownloadExcel}},[t._v("下载Excel")])],1),a("div",{staticStyle:{display:"flex","overflow-y":"hidden","overflow-x":"auto"}},[a("div",[a("div",{staticStyle:{width:"300px"}},[a("div",{staticStyle:{"margin-top":"15px","word-break":"break-all","line-height":"15px"}},[a("b",[t._v("项目组：")]),t._v(t._s(t.project))]),a("div",{staticStyle:{"margin-top":"15px","word-break":"break-all","line-height":"15px"}},[a("b",[t._v("产品名称：")]),t._v(t._s(t.app_name)),a("b",[t._v(" (")]),t._v(t._s(t.actual_name)),a("b",[t._v(") ")])]),a("div",{staticStyle:{"margin-top":"15px","word-break":"break-all","line-height":"15px"}},[a("b",[t._v("测试国家：")]),t._v(t._s(t.countrys.join("/")))]),a("div",{staticStyle:{"margin-top":"15px","word-break":"break-all","line-height":"15px"}},[a("b",[t._v("测试目的：")]),t._v(t._s(t.purpose))]),a("div",{staticStyle:{"margin-top":"15px","word-break":"break-all","line-height":"15px"}},[a("b",[t._v("测试时间：")]),t._v(t._s(t.date.start&&t.date.end?t.date.start.replace(/-/g,"/")+" - "+t.date.end.replace(/-/g,"/"):""))]),a("div",{staticStyle:{"margin-top":"15px","word-break":"break-all","line-height":"15px"}},[a("b",[t._v("测试账号：")]),t._v(t._s(t.accounts.join("/")))]),a("div",{staticStyle:{"margin-top":"15px","word-break":"break-all","line-height":"15px","white-space":"pre-wrap"}},[a("b",[t._v("测试结论：")]),a("br"),t._v(t._s(t.conclusion))])])]),a("div",{staticStyle:{display:"flex","margin-top":"10px"}},t._l(t.shop_images,(function(e,n){return a("div",{key:n,staticStyle:{"margin-left":"2px","margin-right":"2px",float:"left",width:"200px",height:"200px"}},[a("a",{on:{click:t.showImage}},[a("img",{staticStyle:{width:"100%",height:"100%","object-fit":"contain"},attrs:{src:e}})])])})),0)])],1),a("Card",[t.downloading?a("Spin",{attrs:{size:"large",fix:""}}):t._e(),a("div",{staticStyle:{"border-bottom":"1px solid red","margin-bottom":"5px",height:"40px"}},[a("h3",{staticStyle:{float:"left",color:"red"}},[t._v("投放端详情")]),a("Button",{staticStyle:{float:"right",width:"80px"},attrs:{type:"primary"},on:{click:t.handleDownloadData}},[t._v("下载数据")])],1),a("div",{staticStyle:{"margin-top":"10px"}},[a("h4",[t._v("1、分国家数据")]),a("local-table",{attrs:{data:t.countryTableData,"footer-data":t.countryTotalData,"table-loading":t.countryTableLoading,"known-fields":t.test_report,noPage:!0,"dynamic-height":!0,"table-index":0,formater:t.field_formaters,metrics:t.countryMetrics}})],1),a("div",{staticStyle:{"margin-top":"10px"}},[a("h4",[t._v("2、分国家分日期数据")]),a("local-table",{attrs:{data:t.countryDateTableData,"footer-data":t.countryDateTotalData,"table-loading":t.countryDateTableLoading,"known-fields":t.test_report,noPage:!0,"dynamic-height":!0,"table-index":1,formater:t.field_formaters,metrics:t.countryDateMetrics}})],1),a("div",{staticStyle:{"margin-top":"10px"}},[a("h4",[t._v("3、分版位数据")]),a("local-table",{attrs:{data:t.platformTableData,"footer-data":t.platformTotalData,"table-loading":t.platformTableLoading,"known-fields":t.test_report,noPage:!0,"table-height":270,"table-index":2,formater:t.field_formaters,metrics:t.platformMetrics}})],1),a("div",{staticStyle:{"margin-top":"10px"}},[a("h4",[t._v("4、分性别数据")]),a("local-table",{attrs:{data:t.genderTableData,"footer-data":t.genderTotalData,"table-loading":t.genderTableLoading,"known-fields":t.test_report,noPage:!0,"table-height":220,"table-index":3,formater:t.field_formaters,metrics:t.genderMetrics}})],1),a("div",{staticStyle:{"margin-top":"10px"}},[a("h4",[t._v("5、分年龄数据")]),a("local-table",{attrs:{data:t.ageTableData,"footer-data":t.ageTotalData,"table-loading":t.ageTableLoading,"known-fields":t.test_report,noPage:!0,"table-height":460,"table-index":4,formater:t.field_formaters,metrics:t.ageMetrics}})],1)],1),a("Card",[a("div",{staticStyle:{"border-bottom":"1px solid red","margin-bottom":"5px"}},[a("h3",{staticStyle:{color:"red"}},[t._v("素材数据")])]),a("local-table",{attrs:{data:t.materialTableData,"footer-data":t.materialTotalData,"table-loading":t.materialTableLoading,"known-fields":t.test_report,noPage:!0,"dynamic-height":!0,"table-index":5,formater:t.field_formaters,metrics:t.materialMetrics},on:{"on-click-cell":t.handleClickCell}}),a("div")],1)],1)],1),a("Modal",{attrs:{"footer-hide":!0,width:662,"mask-closable":!1},model:{value:t.showImageState,callback:function(e){t.showImageState=e},expression:"showImageState"}},[a("h2",[t._v("商店图")]),a("div",{staticStyle:{"border-bottom":"1px solid gray",height:"45px","margin-bottom":"5px","margin-top":"20px"}},[a("div",{staticStyle:{float:"left",width:"40px",height:"40px"}},[a("img",{staticStyle:{"object-fit":"contain"},attrs:{width:"100%",height:"100%",src:t.icon_url}})]),a("div",{staticStyle:{"margin-left":"20px",float:"left",width:"300px"}},[t._v(t._s(t.app_name)+"(第"+t._s(t.date.round)+"轮)")])]),t.showImageState?a("div",{staticStyle:{width:"622px",height:"512px"}},[a("Carousel",{staticClass:"shop-image",attrs:{loop:"",arrow:"always",dots:"outside"}},t._l(t.shop_images,(function(t){return a("CarouselItem",{key:t},[a("div",{staticStyle:{"margin-left":"55px",width:"512px",height:"512px"}},[a("img",{staticStyle:{"object-fit":"contain"},attrs:{width:"100%",height:"100%",src:t}})])])})),1)],1):t._e(),a("div",{staticStyle:{width:"512px",height:"20px"}})])],1)},r=[],i=(a("8e6e"),a("456d"),a("ac6a"),a("5df3"),a("c5f6"),a("ade3")),o=a("ae3e"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",{ref:"filter",staticClass:"filter-selection"},[a("div",[a("a-select",{staticClass:"inline-width",staticStyle:{"font-size":"12px"},attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"",autoClearSearchValue:!1,"max-tag-count":this.maxTagArr[0],"max-tag-text-length":this.maxTagTextArr[0],placeholder:"项目组-全部",optionFilterProp:"children"},on:{focus:function(e){return t.focusFun(0)},blur:function(e){return t.blurFun()},change:t.projectsChange,mouseenter:function(e){return t.mouseenterFun(0)},mouseleave:function(e){return t.mouseleaveFun()}},scopedSlots:t._u([{key:"dropdownRender",fn:function(e){return a("div",{},[a("v-nodes",{attrs:{vnodes:e}}),a("a-divider",{staticClass:"select-all-divider"}),a("div",{staticClass:"select-all-div",on:{mousedown:function(t){return t.preventDefault()}}},[a("span",{staticClass:"select-all-span"},[t._v(t._s(t.projects.length)+"/"+t._s(t.allProjects.length))]),a("Button",{attrs:{type:"primary"},on:{click:function(e){t.projects=t.allProjects}}},[t._v("全选")])],1)],1)}}]),model:{value:t.projects,callback:function(e){t.projects=e},expression:"projects"}},t._l(t.allProjects,(function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1),a("a-select",{staticClass:"inline-width",staticStyle:{"font-size":"12px"},attrs:{mode:"multiple",allowClear:"",filterable:"",showArrow:"",autoClearSearchValue:!1,"max-tag-count":this.maxTagArr[1],"max-tag-text-length":this.maxTagTextArr[1],placeholder:"测试产品名称-全部",optionFilterProp:"children"},on:{focus:function(e){return t.focusFun(1)},blur:function(e){return t.blurFun()},mouseenter:function(e){return t.mouseenterFun(1)},mouseleave:function(e){return t.mouseleaveFun()}},scopedSlots:t._u([{key:"dropdownRender",fn:function(e){return a("div",{},[a("v-nodes",{attrs:{vnodes:e}}),a("a-divider",{staticClass:"select-all-divider"}),a("div",{staticClass:"select-all-div",on:{mousedown:function(t){return t.preventDefault()}}},[a("span",{staticClass:"select-all-span"},[t._v(t._s(t.apps.length)+"/"+t._s(t.canSelectAllApp.length))]),a("Button",{attrs:{type:"primary"},on:{click:function(e){t.apps=t.canSelectAllApp.map((function(t){return t.app_id}))}}},[t._v("全选")])],1)],1)}}]),model:{value:t.apps,callback:function(e){t.apps=e},expression:"apps"}},t._l(t.canSelectAllApp,(function(e){return a("Option",{key:e.app_id,attrs:{value:e.app_id}},[t._v(t._s(e.app_name)+"\n    ")])})),1),a("span",{staticStyle:{"margin-left":"5px"}},[t._v("测试开始时间:\n    "),a("DatePicker",{staticClass:"inline-width",attrs:{type:"daterange",options:t.daterangeoption,clearable:!1,placement:"bottom-start",placeholder:"选择日期范围"},model:{value:t.rangeDates,callback:function(e){t.rangeDates=e},expression:"rangeDates"}})],1),a("Button",{attrs:{type:"primary",disabled:t.loading},on:{click:t.handleSubmit}},[t._v("生成测试报告")])],1),a("div",{staticClass:"optionsContents",attrs:{id:"optionsContent"}},t._l(t.tmpOptions,(function(e){return a("li",{key:e},[t._v(t._s(e))])})),0)])},s=[],p=(a("7f7f"),a("20d6"),a("4f7f"),a("2f62")),c=a("90de"),u=a("4b65"),d=a("9839"),h=(a("1ef0"),a("1157")),g=a.n(h);function f(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?f(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var b={name:"page-filter",components:{ASelect:d["d"],Option:d["d"].Option,VNodes:{functional:!0,render:function(t,e){return e.props.vnodes}}},props:{pageAeo:{type:Boolean,default:function(){return!1}},pageRooter:{type:String,default:function(){return null}},loading:{type:Boolean,default:function(){return!1}}},data:function(){return{projects:[],apps:[],allProjects:[],canSelectAllApp:[],allApp:[],daterangeoption:{},rangeDates:[],maxTagArr:[1,1,1,1,1,1,1,1,1,1],maxTagTextArr:[20,20,20,20,20,20,20,20,20,20],tmpAllOptions:[],tmpOptions:[],mark:0}},methods:m(m({},Object(p["b"])(["getAllProject","getAppList"])),{},{filterApp:function(t,e){if(this.canSelectAllApp=[].concat(this.allApp),t&&t.length>0){this.apps=[];var a=new Set(t);this.canSelectAllApp=this.canSelectAllApp.filter((function(t){return a.has(t.project)}))}if(e&&e.length>0){this.apps=[];var n=new Set(e);this.canSelectAllApp=this.canSelectAllApp.filter((function(t){return n.has(t.app_type)}))}},projectsChange:function(t){if(this.canSelectAllApp=[].concat(this.allApp),t&&t.length>0){this.apps=[];var e=new Set(t);this.canSelectAllApp=this.canSelectAllApp.filter((function(t){return e.has(t.project)}))}},handleSubmit:function(t){var e={projects:this.projects,apps:this.apps,rangeDates:this.rangeDates};this.$emit("on-filter-apply",e)},maxTagCountfun:function(t){return this.maxTagCountObj&&this.maxTagCountObj[t]?this.maxTagCountObj[t]:1},focusFun:function(t){this.mark=1,g()("#optionsContent").length&&g()("#optionsContent").css({display:"none"}),this.maxTagArr=[1,1,1,1,1,1,1,1,1,1,1],this.maxTagTextArr=[20,20,20,20,20,20,20,20,20,20];var e=this;setTimeout((function(){e.maxTagArr.splice(t,0,10),e.maxTagTextArr.splice(t,0,100)}),500)},blurFun:function(){this.mark=0,this.maxTagArr.findIndex((function(t){return 10===t}))>=0&&(this.maxTagArr=[1,1,1,1,1,1,1,1,1,1],this.maxTagTextArr=[20,20,20,20,20,20,20,20,20,20]),this.setItemValues()},mouseenterFun:function(t){if(1!==this.mark){this.tmpOptions=this.tmpAllOptions[t];var e=Object(u["g"])(this.$refs["filter"].$el.clientWidth,t),a=document.getElementById("optionsContent");g()("#optionsContent").length&&this.tmpOptions&&this.tmpOptions.length>0&&a&&(g()("#optionsContent").css({display:"block",left:e.left+"px"}),a.style.setProperty("top",e.top+"px","important"))}},mouseleaveFun:function(){this.hideContentItem(),this.setItemValues()},setItemValues:function(){var t=this;this.tmpAllOptions[0]=this.projects;var e=[];this.appTypes&&this.appTypes.map((function(a,n){t.allAppTypes&&t.allAppTypes.map((function(t,n){t.id===a&&e.push(t.name)}))}));var a=[];this.apps&&this.apps.map((function(e,n){t.canSelectAllApp&&t.canSelectAllApp.map((function(t,n){e===t.app_id&&a.push(t.app_name)}))})),this.tmpAllOptions[1]=a},getFilter:function(){return{projects:this.projects,apps:this.apps,rangeDates:[Object(u["c"])(this.rangeDates[0]),Object(u["c"])(this.rangeDates[1])],time_type:Object(u["i"])(this.rangeDates)}},setFilter:function(t){this.projects=t.projects,this.apps=t.apps,this.rangeDates=t.rangeDates,t.time_type&&(this.rangeDates=Object(c["f"])(t.time_type))},hideContentItem:function(){g()("#optionsContent").length&&g()("#optionsContent").css({display:"none"})}}),mounted:function(){var t=this;this.daterangeoption=Object(c["b"])(),Promise.all([this.getAllProject(),this.getAppList("testReport")]).then((function(e){t.allApp=e[1],t.canSelectAllApp=[].concat(t.allApp),t.allProjects=e[0].filter((function(e){return t.allApp.findIndex((function(t){return t.project===e}))>=0}))}))},created:function(){this.rangeDates=Object(c["f"])("1 week")}},y=b,_=(a("b510"),a("2877")),v=Object(_["a"])(y,l,s,!1,null,"1c5d7c52",null),D=v.exports,w=(a("ca62"),a("4481"));function T(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function x(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?T(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var S={name:"test-report",components:{PageFilter:D,localTable:o["a"]},data:function(){return{inFields:[["projects","project"],["apps","app_id"]],countryMetrics:["country","install","cpi","cost","impression","click","ctr","cvr","cpm","ipm"],countryDateMetrics:["country","date","install","cpi","cost","impression","click","ctr","cvr","cpm","ipm"],platformMetrics:["publisher_platform","install","cpi","cost","impression","click","ctr","cvr","cpm","ipm","proportion"],genderMetrics:["gender","install","cpi","cost","impression","click","ctr","cvr","cpm","ipm","proportion"],ageMetrics:["age","install","cpi","cost","impression","click","ctr","cvr","cpm","ipm","proportion"],materialMetrics:["ad_name","install","cpi","cost","impression","click","ctr","cvr","cpm","ipm","material"],inited:!1,currFilterApply:{},mainPageLoading:!1,countryTableLoading:!1,countryDateTableLoading:!1,platformTableLoading:!1,genderTableLoading:!1,ageTableLoading:!1,materialTableLoading:!1,downloading:!1,showAppState:!0,appInfos:[],appDates:[],curApp:"",curDate:"",icon_url:"",excel_url:"",ppt_url:"",app_name:"",actual_name:"",project:"",countrys:[],purpose:"",date:{},accounts:[],conclusion:"",shop_images:[],showImageState:!1}},computed:x({},Object(p["d"])({field_formaters:function(t){return t.dashboard_field.field_formaters},test_report:function(t){return t.dashboard_field.test_report},days:function(){var t=Object(u["h"])(this.currFilterApply);return t},dayRange:function(){return Object(u["f"])(this.currFilterApply,this.currDimensions)},countryTableData:function(t){if(t.test_report.testReportCountryTableData)return t.test_report.testReportCountryTableData.data},countryTotalData:function(t){if(t.test_report.testReportCountryTotalData.data)return t.test_report.testReportCountryTotalData.data[0]},countryDateTableData:function(t){if(t.test_report.testReportCountryDateTableData)return t.test_report.testReportCountryDateTableData.data},countryDateTotalData:function(t){if(t.test_report.testReportCountryDateTotalData.data)return t.test_report.testReportCountryDateTotalData.data[0]},platformTableData:function(t){if(t.test_report.testReportPlatformTableData)return t.test_report.testReportPlatformTableData.data},platformTotalData:function(t){if(t.test_report.testReportPlatformTotalData.data)return t.test_report.testReportPlatformTotalData.data[0]},genderTableData:function(t){if(t.test_report.testReportGenderTableData)return t.test_report.testReportGenderTableData.data},genderTotalData:function(t){if(t.test_report.testReportGenderTotalData.data)return t.test_report.testReportGenderTotalData.data[0]},ageTableData:function(t){if(t.test_report.testReportAgeTableData)return t.test_report.testReportAgeTableData.data},ageTotalData:function(t){if(t.test_report.testReportAgeTotalData.data)return t.test_report.testReportAgeTotalData.data[0]},materialTableData:function(t){if(t.test_report.testReportMaterialTableData)return t.test_report.testReportMaterialTableData.data},materialTotalData:function(t){if(t.test_report.testReportMaterialTotalData.data)return t.test_report.testReportMaterialTotalData.data[0]}})),methods:x(x({},Object(p["b"])(["getTestReportApp","getAppInfo","getTestReportData","getTestReportDownloadUrl"])),{},{handleClickCell:function(t,e){window.open(t.row.material_url,"_blank")},getTimeRange:function(){return JSON.stringify({since:this.date.start,until:this.date.end})},onFilterApply:function(t){var e=this;this.currFilterApply=JSON.parse(JSON.stringify(t)),this.mainPageLoading=!0;var a={time_range:Object(u["r"])(this.currFilterApply),filtering:Object(u["m"])(this.currFilterApply,this.inFields)};this.showAppState=!0,this.appInfos=[],this.curApp="",this.appDates=[],this.curDate="",this.getTestReportApp(a).then((function(t){e.inited=!0,e.appInfos=t,e.appInfos.length>0?(e.curApp=e.appInfos[0].id,e.handleSelectApp(e.curApp),e.$nextTick((function(){e.$refs.appMenu.updateActiveName()}))):e.mainPageLoading=!1})).catch((function(t){e.mainPageLoading=!1,e.showError(t)}))},handleSelectApp:function(t){this.curApp=t,this.appDates=this.appInfos.filter((function(e){return e.id===t}))[0].date,this.appDates.length>0?(this.curDate=String(this.appDates[0].id),this.handleSelectDate(this.curDate)):this.mainPageLoading=!1},handleSelectDate:function(t){var e=this;this.mainPageLoading=!0,this.getAppInfo({app_id:this.curApp,id:Number(this.curDate)}).then((function(t){e.icon_url=t.icon_url,e.excel_url=t.excel_url,e.ppt_url=t.ppt_url,e.app_name=t.app_name,e.actual_name=t.actual_name,e.project=t.project,e.countrys=t.countrys,e.purpose=t.purpose,e.date=t.date,e.accounts=t.accounts,e.conclusion=t.conclusion,e.shop_images=t.shop_images,e.mainPageLoading=!1,e.getCountryData(),e.getCountryDateData(),e.getPlatformData(),e.getGenderData(),e.getAgeData(),e.getMaterialData()})).catch((function(t){e.mainPageLoading=!1,e.showError(t)}))},handleDownloadPpt:function(){if(null!=this.ppt_url&&""!==this.ppt_url){var t=document.createElement("a");t.href=this.ppt_url,t.click()}else this.$Message.info("还没有上传PPT")},handleDownloadExcel:function(){if(null!=this.excel_url&&""!==this.excel_url){var t=document.createElement("a");t.href=this.excel_url,t.click()}else this.$Message.info("还没有上传Excel")},handleDownloadData:function(){var t=this,e=this.getTimeRange();this.downloading=!0,this.getTestReportDownloadUrl({app_name:this.actual_name,time_range:e}).then((function(e){var a=document.createElement("a");a.href=e.url,a.click(),t.downloading=!1})).catch((function(e){t.downloading=!1,t.showError(e)}))},getCountryData:function(){var t=this;this.countryTableLoading=!0;var e=this.getTimeRange();Promise.all([this.getTestReportData({type:"country",summary:!0,params:{app_name:this.actual_name,time_range:e}}),this.getTestReportData({type:"country",summary:!1,params:{group_by:["country"],app_name:this.actual_name,time_range:e}})]).then((function(e){t.countryTableLoading=!1})).catch((function(e){t.countryTableLoading=!1,t.showError(e)}))},getCountryDateData:function(){var t=this;this.countryDateTableLoading=!0;var e=this.getTimeRange();Promise.all([this.getTestReportData({type:"countryDate",summary:!0,params:{app_name:this.actual_name,time_range:e}}),this.getTestReportData({type:"countryDate",summary:!1,params:{group_by:["country","date"],app_name:this.actual_name,time_range:e}})]).then((function(e){t.countryDateTableLoading=!1})).catch((function(e){t.countryDateTableLoading=!1,t.showError(e)}))},getPlatformData:function(){var t=this;this.platformTableLoading=!0;var e=this.getTimeRange();Promise.all([this.getTestReportData({type:"platform",summary:!0,params:{app_name:this.actual_name,time_range:e}}),this.getTestReportData({type:"platform",summary:!1,params:{group_by:["publisher_platform"],app_name:this.actual_name,time_range:e}})]).then((function(e){t.platformTableLoading=!1})).catch((function(e){t.platformTableLoading=!1,t.showError(e)}))},getGenderData:function(){var t=this;this.genderTableLoading=!0;var e=this.getTimeRange();Promise.all([this.getTestReportData({type:"gender",summary:!0,params:{app_name:this.actual_name,time_range:e}}),this.getTestReportData({type:"gender",summary:!1,params:{group_by:["gender"],app_name:this.actual_name,time_range:e}})]).then((function(e){t.genderTableLoading=!1})).catch((function(e){t.genderTableLoading=!1,t.showError(e)}))},getAgeData:function(){var t=this;this.ageTableLoading=!0;var e=this.getTimeRange();Promise.all([this.getTestReportData({type:"age",summary:!0,params:{app_name:this.actual_name,time_range:e}}),this.getTestReportData({type:"age",summary:!1,params:{group_by:["age"],app_name:this.actual_name,time_range:e}})]).then((function(e){t.ageTableLoading=!1})).catch((function(e){t.ageTableLoading=!1,t.showError(e)}))},getMaterialData:function(){var t=this;this.materialTableLoading=!0;var e=this.getTimeRange();Promise.all([this.getTestReportData({type:"material",summary:!0,params:{app_name:this.actual_name,time_range:e}}),this.getTestReportData({type:"material",summary:!1,params:{group_by:["ad_name"],app_name:this.actual_name,time_range:e}})]).then((function(e){t.materialTableLoading=!1})).catch((function(e){t.materialTableLoading=!1,t.showError(e)}))},showApps:function(t){this.showAppState=t},showImage:function(){this.showImageState=!0},showError:function(t){this.$Modal.error({title:"Error",content:t})},onSelectPageInfo:function(t){var e=JSON.parse(t);this.$refs.pageFilter.setFilter(e.filter),this.onFilterApply(e.filter)},onGetPageInfo:function(t){var e=this.$refs.pageFilter.getFilter(),a=JSON.stringify({filter:e});w["a"].$emit("setPageInfo",t,a)}}),mounted:function(){this.onFilterApply({});var t=this;w["a"].$on("selectPageInfo",(function(e){t.onSelectPageInfo(e)})),w["a"].$on("getPageInfo",(function(e){t.onGetPageInfo(e)}))},beforeDestroy:function(){w["a"].$off("selectPageInfo"),w["a"].$off("getPageInfo")}},A=S,k=Object(_["a"])(A,n,r,!1,null,null,null);e["default"]=k.exports},"584d":function(t,e,a){},"8dc2":function(t,e,a){},a10f:function(t,e,a){},ae3e:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.tableData.length>0||t.tableLoading,expression:"tableData.length > 0 || tableLoading"}],staticClass:"localTableDiv"},[a("Row",[a("Table",{staticClass:"topTable",attrs:{data:t.tableData,columns:t.tableColumns,loading:t.tableLoading,border:"",height:t.height},on:{"on-sort-change":t.handleSortChange}}),t.noSummery?t._e():a("Table",{staticClass:"summeryTable",attrs:{data:t.tableDataFun(),columns:t.tableColumns,loading:t.tableLoading,border:"","show-header":!1,height:"58"},on:{"on-sort-change":t.handleSortChange}})],1),t.noPage?t._e():a("Row",{staticStyle:{"text-align":"center"}},[a("Page",{ref:"tablePages",attrs:{"page-size":50,total:t.data.length,current:1,"page-size-opts":t.pageSizeOpts,"show-sizer":"","show-total":"","show-elevator":""}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tableData.length<=0&&!t.tableLoading,expression:"tableData.length <= 0 && !tableLoading"}],staticStyle:{"text-align":"center"}},[a("span",{staticStyle:{"font-size":"15px"}},[t._v("暂无数据")])])])},r=[],i=(a("ac6a"),a("55dd"),a("c5f6"),a("4b65")),o=(a("8dc2"),a("1157")),l=a.n(o),s={name:"LocalTable",props:{data:{type:Array,default:function(){return[]}},footerData:{type:Object,default:function(){return{}}},pageData:{type:Object,default:function(){return{page_size:20,has_next:!1,has_prev:!1,total_num:20}}},knownFields:{type:Array,default:function(){return[]}},tableLoading:{type:Boolean,default:function(){return!1}},dimensions:{type:Array,default:function(){return[]}},metrics:{type:Array,default:function(){return[]}},haveIndex:{type:Boolean,default:function(){return!1}},defaultFormater:{type:String,default:function(){return"0,0"}},formater:{type:Object,default:function(){return{}}},events:{type:Array,default:function(){return[]}},noSummery:{type:Boolean,default:function(){return!1}},noPage:{type:Boolean,default:function(){return!1}},tableIndex:{type:Number,default:function(){return 0}},tableHeight:{type:Number,default:function(){return 550}},dynamicHeight:{type:Boolean,default:function(){return!1}}},data:function(){return{pageSizeOpts:[10,20,30,50]}},computed:{tableColumns:function(){return Object(i["b"])(this,this.knownFields,this.dimensions,this.metrics,this.formater,this.events,this.defaultFormater,this.haveIndex,this.onClickCell)},tableData:function(){var t=this.$refs["tablePages"];if(t){var e=this.$refs["tablePages"].currentPageSize,a=this.$refs["tablePages"].total,n=this.$refs["tablePages"].currentPage,r=(n-1)*e,i=r+e-1;i>a-1&&(i=a-1);var o=this.data.slice(r,i+1);return o.length>0&&o.push({test_id:"1"}),o}var l=this.data;return l.length>0&&l.push({test_id:"1"}),l},height:function(){return this.dynamicHeight?this.data.length<=1?120:this.data.length<=3?220:this.data.length<=5?315:this.data.length<=7?415:this.tableHeight:this.tableHeight}},methods:{handleSortChange:function(t,e,a){"asc"===t.order?this.data.sort((function(e,a){var n=e[t.key],r=a[t.key];return null!=n&&isNaN(n)||null!=r&&isNaN(r)?(null==n&&(n="0"),null==r&&(r="0"),n>r?1:-1):(null==n&&(n=-1e7),null==r&&(r=-1e7),n-r)})):this.data.sort((function(e,a){var n=e[t.key],r=a[t.key];return null!=n&&isNaN(n)||null!=r&&isNaN(r)?(null==n&&(n="0"),null==r&&(r="0"),r>n?1:-1):(null==n&&(n=-1e7),null==r&&(r=-1e7),r-n)}))},getData:function(){var t=JSON.parse(JSON.stringify(this.footerData)),e={};for(var a in this.tableColumns.forEach((function(a,n){var r=a.key;0===n?e[r]={key:r,value:"合计"}:isNaN(Number(t[r]))?e[r]={key:r,value:"-"}:e[r]={key:r,value:t[r]}})),t)null==e[a]&&(e[a]={key:a,value:t[a]});return e},tableDataFun:function(){var t=this.getData(),e=[],a={};for(var n in t){var r=t[n],i=r.key,o=r.value;a[i]=o}return e.push(a),e},onClickCell:function(t,e){this.$emit("on-click-cell",t,e)}},beforeMount:function(){this.tmpTag=this.searchTag},mounted:function(){var t=this;history.pushState(null,null,document.URL),window.addEventListener("popstate",(function(){history.pushState(null,null,document.URL)}));var e=0;document.getElementsByClassName("ivu-table-body")[2*this.tableIndex].addEventListener("scroll",(function(a){var n=a.target.scrollLeft;e=a.target.scrollTop,l()(".ivu-table-body")[2*t.tableIndex+1].scrollLeft=n})),document.getElementsByClassName("ivu-table-body")[2*this.tableIndex+1].addEventListener("scroll",(function(a){var n=a.target.scrollLeft;l()(".ivu-table-body")[2*t.tableIndex].scrollLeft=n,l()(".ivu-table-body")[2*t.tableIndex].scrollTop=e})),l()((function(){l()(".topTable").addClass("hiddenTopTable")}))},watch:{tableLoading:function(t){var e=this.$refs["tablePages"];e&&!1===t&&(this.$refs["tablePages"].currentPage=1)}}},p=s,c=(a("d236"),a("2877")),u=Object(c["a"])(p,n,r,!1,null,null,null);e["a"]=u.exports},b510:function(t,e,a){"use strict";a("a10f")},d236:function(t,e,a){"use strict";a("584d")}}]);